var PaperParam=function(){function c(){var a=getRootPath(1)+"/DataInterface/Api?Author=0cf7187bf9fa92a76e26aaa380aa532b72247fd5&ID=24&M=3&t=1",b=ReadData(a);InitSelect("prod_ID",b),a=getRootPath(1)+"/DataInterface/Api?Author=0cf7187bf9fa92a76e26aaa380aa532b72247fd5&ID=25&M=3&t=3",b=ReadData(a),InitSelect("oper_ID",b),$("input[name='rec_date']").val(today(5)),$("input[name='remark']").val("\u65e0")}function d(){return""===$('select[name="oper_ID"]').val()||""===$('select[name="prod_ID"]').val()?($(".portlet.light").hide(),!0):($(".portlet.light").show(),!1)}function e(){var a=[3,6,7,9,10,13,14,15,16,17];"103-G-2A"===$('select[name="prod_ID"]').find("option:selected").text()?a.map(function(a){$(".form-md-checkboxes:nth("+a+")").hide()}):a.map(function(a){$(".form-md-checkboxes:nth("+a+")").show()}),$("input[name='remark']").val("\u65e0"),$("input[name='rec_date']").val(today(5)),f()}function f(){var a=$("input[name='rec_date']").val();a=a.substr(6,4)+a.substr(0,2);var b=$('select[name="prod_ID"]').val(),c=getRootPath(1)+"/DataInterface/Api?Author=0cf7187bf9fa92a76e26aaa380aa532b72247fd5&ID=27&M=3&tmonth="+a+"&prod="+b,d=ReadData(c);c=getRootPath(1)+"/DataInterface/Api?Author=0cf7187bf9fa92a76e26aaa380aa532b72247fd5&ID=28&M=3&tmonth="+a+"&prod="+b;var e=ReadData(c);$(".grey-cascade").html("\u7269\u7406\u6307\u6807\u5f97\u5206\uff1a"+xround(d.data[0][0],2)+"\uff0c\u5916\u89c2\u6307\u6807\u5f97\u5206\uff1a"+xround(e.data[0][0],2));var f=(parseInt(e.data[0][0],10)+parseInt(d.data[0][0],10))/2;$('input[name="chk_ID"]').val(parseInt(e.data[0][1],10)+1),$(".list-unstyled.amounts li:nth(0)").html("<strong>\u7269\u7406\u6307\u6807:</strong> "+xround(d.data[0][0],2)),$(".list-unstyled.amounts li:nth(1)").html("<strong>\u5916\u89c2\u6307\u6807:</strong> "+xround(e.data[0][0],2)),$(".list-unstyled.amounts li:nth(2)").html("<h4><strong>\u5f53\u524d\u5f97\u5206:</strong> 100</h4>"),$(".list-unstyled.amounts li:nth(3)").html('<h4 class="font-green"><strong>\u5f53\u6708\u8bc4\u4ef7\u603b\u5206:</strong> '+xround(f,2)+"</h4>")}function g(){var a={tbl:"2",score:parseFloat($(".list-unstyled.amounts li:nth(2)").text().replace("\u5f53\u524d\u5f97\u5206:","")),chk_ID:$('input[name="chk_ID"]').val(),prod_ID:$('select[name="prod_ID"]').val(),oper_ID:$('select[name="oper_ID"]').val(),rec_date:$("input[name='rec_date']").val(),remark:$("input[name='remark']").val()},b=["size","founder_degree","watermark","white_watermark","watermark_size","white_watermark_size","watermark_clarity","white_watermark_clarity","watermark_consistency","white_watermark_consistency","white_watermark_tile","paper_evenness","cleanliness","open_window","line_bare","line_thick","line_break","anti_fake","commence","other"],c=JSON.stringify(a);return c=c.replace("}",""),$(".md-check").map(function(a){c="checked"==$(this).attr("checked")?c+',"'+b[a]+'":1':c+',"'+b[a]+'":0'}),c+="}",$.parseJSON(c)}function h(){var a=getRootUrl("PaperPara")+"insert",b={url:a,type:"post",resetForm:!0,data:g(),success:function(a){var b=$.parseJSON(a);infoTips(b.message,b.type),$('button[type="reset"]').click()},error:function(a){infoTips(JSON.stringify(a))}};return $(this).ajaxSubmit(b),!1}var a=function(){jQuery().datepicker&&$(".date-picker").datepicker({rtl:Metronic.isRTL(),orientation:"left",autoclose:!0})},b=[.5,.5,3,3,.75,.75,1,1,.75,.75,.75,.5,.5,.5,.5,3,3,.5,1,1];return $(".md-check").click(function(){var e,f,a=parseFloat($(".list-unstyled.amounts li:nth(1)").text().replace("\u5916\u89c2\u6307\u6807:","")),c=parseFloat($(".list-unstyled.amounts li:nth(0)").text().replace("\u7269\u7406\u6307\u6807:","")),d=parseInt($(this).attr("ID").replace("checkbox",""),10)-1;e="checked"==$(this).attr("checked")?a-b[d]:a+b[d];var g=$('input[name="chk_ID"]').val()-1;if(0===g)a=e;else{var h=a*g;a=(e+h)/(g+1)}f=(c+a)/2,$(".list-unstyled.amounts li:nth(1)").html("<strong>\u5916\u89c2\u6307\u6807:</strong> "+xround(a,2)),$(".list-unstyled.amounts li:nth(2) h4").html("<strong>\u5f53\u524d\u5f97\u5206:</strong> "+xround(e,2)),$(".list-unstyled.amounts li:nth(3)").html('<h4 class="font-green"><strong>\u5f53\u6708\u8bc4\u4ef7\u603b\u5206:</strong> '+xround(f,2)+"</h4>"),95>f?$('a[name="submit"]').attr("href","#info"):$('a[name="submit"]').attr("href","")}),$('select[name="oper_ID"]').change(function(){d()||e()}),$('select[name="prod_ID"]').change(function(){return d()?($('input[name="chk_ID"]').val(""),void $(".grey-cascade").html("")):void e()}),$('button[type="reset"]').click(function(){$("form[name=theForm]").resetForm(),$(".portlet.light").hide(),$("input[name='remark']").val("\u65e0"),$("input[name='rec_date']").val(today(5))}),{init:function(){$(".portlet.light").hide(),a(),c(),f(),$(".modal-footer .green").click(function(){h()}),$('a[name="submit"]').click(function(){var a=parseFloat($(".list-unstyled.amounts li:nth(3)").text().replace("\u5f53\u6708\u8bc4\u4ef7\u603b\u5206:",""));a>=95&&h()})}}}();