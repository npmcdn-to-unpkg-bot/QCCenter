function SaveSettings(){var a=$("#RefreshTime").val(),b=$("#AutoRefresh").bootstrapSwitch("state")===!0?1:0,c=$("#FixTblHead").bootstrapSwitch("state")===!0?1:0,d=$("#FixTblCol").bootstrapSwitch("state")===!0?1:0,e=$("#FootSearch").bootstrapSwitch("state")===!0?1:0,f=$("#InputToggle").bootstrapSwitch("state")===!0?1:0,g=$("#InputInner").bootstrapSwitch("state")===!0?1:0,h=getRootUrl("QualityTable")+"/SaveSettings";$.post(h,{RefreshTime:a,AutoRefresh:b,FixTblHead:c,FixTblCol:d,FootSearch:e,InputToggle:f,InputInner:g},function(a,b){if("success"==b){var c=jQuery.parseJSON(a);infoTips(c.message,1)}else infoTips("\u4fdd\u5b58\u8bbe\u7f6e\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\u6216\u8054\u7cfb\u7ba1\u7406\u5458!",0)})}function ReadSettings(){var a=getRootUrl("QualityTable")+"/ReadSettings";$.ajax({type:"POST",async:!1,url:a,success:function(a){var b=jQuery.parseJSON(a),c=b.data[0];$("#RefreshTime").val(c.RefreshTime),0===c.AutoRefresh&&$("#AutoRefresh").bootstrapSwitch("toggleState"),0===c.FixTblHead&&$("#FixTblHead").bootstrapSwitch("toggleState"),0===c.FixTblCol&&$("#FixTblCol").bootstrapSwitch("toggleState"),0===c.FootSearch&&$("#FootSearch").bootstrapSwitch("toggleState")}})}function GetJsonUrl(){var a=$("#dashboard-report-range span").html(),b=a.split(" ~ ")[0],c=a.split(" ~ ")[1],d=getRootPath()+"/DataInterface/Api?Author=0cf7187bf9fa92a76e26aaa380aa532b72247fd5&ID=16&M=3&tstart="+b+"&tend="+c+"&tstart2="+b+"&tend2="+c+"&t="+Math.random();return d}$("#HideTips").click(function(){$(".note.note-success").addClass("hide")}),$("#SaveSettings").click(function(){SaveSettings()});var dataTable=function(){function a(){g("#sample",GetJsonUrl())}function e(a){var b;return b={bRetrieve:!0,language:{url:getRootPath()+"/assets/admin/pages/controller/DataTableLanguage.json"},order:[[1,"asc"]],lengthMenu:[[5,10,15,20,50,100,-1],[5,10,15,20,50,100,"All"]],pageLength:15,dom:"<'row tbTools' <'col-md-6 col-sm-12 pull-right'B>><'row'<'col-md-6 col-sm-12'l><'col-md-6 col-sm-12'f>>t<'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",buttons:[{extend:"copyHtml5",exportOptions:{columns:":visible"},text:"\u590d\u5236"},{extend:"excelHtml5",exportOptions:{columns:":visible"}},{extend:"csvHtml5",exportOptions:{columns:":visible"}},{extend:"pdfHtml5",orientation:a.cols>10?"landscape":"portrit",pageSize:a.cols>10?"A3":"A4",message:a.source+"\n\xa9\u6210\u90fd\u5370\u949e\u6709\u9650\u516c\u53f8 \u6280\u672f\u8d28\u91cf\u90e8",title:a.title,exportOptions:{columns:":visible"}},{extend:"print",autoPrint:!1,text:"\u6253\u5370",message:a.source+"<br>\xa9\u6210\u90fd\u5370\u949e\u6709\u9650\u516c\u53f8 \u6280\u672f\u8d28\u91cf\u90e8",title:a.title,exportOptions:{columns:":visible"}},{extend:"colvis",text:'\u9690\u85cf\u6570\u636e\u5217<i class="fa fa-angle-down"></i>',className:"btn-fit-height green-haze dropdown-toggle"}],bDeferRender:!0,bProcessing:!0,bStateSave:!0,bserverSide:!1,bInfo:!0,bAutoWidth:!0,bSortClasses:!1,bScrollInfinite:!0,aoColumns:a.header,data:a.data,searchHighlight:!0,colReorder:{realtime:!0},scroolY:"70v",scrollCollapse:!0,initComplete:function(){var b=this.api();b.$("td").click(function(){b.search(this.innerText).draw()}),$(".tools").append($(".tabletools-btn-group").clone(!0)),$(".tbTools").remove(),infoTips(JSON.stringify(a),2)}}}function f(a,c){var d=$(a),f=e(c);b=d.dataTable(f)}function g(a,c){var d=$(a);if(Data=ReadData(c),$("#TableTitle").text(Data.title),$("#datasource").text("("+Data.source+")"),Data.cols<2)return void infoTips("\u8bf7\u786e\u4fdd\u6570\u636e\u5217\u57282\u5217\u4ee5\u4e0a\uff0c\u5f53\u524d\u4e3a\uff1a"+Data.cols);if(!(Data.rows>0))return void infoTips("\u8be5\u65f6\u95f4\u8303\u56f4\u5185\u65e0\u8d28\u91cf\u6570\u636e\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u67e5\u8be2\u65f6\u95f4!",1);if(!$("#sample tbody").length)return void f(a,Data);b=d.dataTable(),b.fnClearTable(this);for(var e=b.fnSettings(),g=0;g<Data.rows;g++)b.oApi._fnAddData(e,Data.data[g]);e.aiDisplay=e.aiDisplayMaster.slice(),b.fnDraw(),infoTips(JSON.stringify(Data),2)}var b;return{init:function(){$("button.applyBtn").live("click",function(){a()}),$("#Preview").click(function(){var a=$("#PreviewUrl").val();g("#sample",a)})}}}();