var PaperParam=function(){function t(){var t=getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=23&M=3&t=1",a=ReadData(t);InitSelect("machine_ID",a),t=getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=25&M=3&t=2",a=ReadData(t),InitSelect("oper_ID",a),$("input[name='rec_date']").val(today(6)),$("input[name='remark']").val("无"),$("input[name='rec_date']").val(today(6));var e=ReadData(getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=30&M=3");$('input[name="pulp_code"]').val(e.data[0])}function a(){var t=(new Date).getHours();t>=0&&8>t?SetRadioChecked("class_ID",2):t>=8&&16>t?SetRadioChecked("class_ID",0):SetRadioChecked("class_ID",1)}function e(){return""===$('select[name="oper_ID"]').val()||""===$('select[name="machine_ID"]').val()?($(".portlet.light").hide(),1):($(".portlet.light").show(),0)}function o(){var t=$("input[name='rec_date']").val();t=t.replace(/-/g,"");var a=getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=26&M=3&tstart="+t+"&tend="+t,e=ReadData(a);$(".page-toolbar button").html("当天已录入数据："+e.rows+"条");for(var o=0;o<e.rows;o++)$(".page-toolbar ul").append('<li><a href="'+getRootPath(1)+"/PaperPara/chemy#p="+e.data[o][1]+'">'+e.data[o][1]+"</a></li>"),o&&o%3===0&&$(".page-toolbar ul").append('<li class="divider"></li>')}function r(t){if("undefined"==typeof t){var a=window.location.hash.substr(1).match(RegExp("(^|&)p=([^&]*)(&|$)"));if(null===a)return;t=unescape(a[2])}$('input[name="pulp_code"]').val(t);var e=getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=32&M=2&p="+t,o=ReadData(e);o.header.map(function(t){var a=t.title;$('form .form-control[name="'+a+'"]').val(o.data[0][a])}),SetRadioChecked("class_ID",o.data[0].class_ID),$('.portlet button[type="submit"]').attr("data-sn",o.data[0].ID),$('.portlet button[type="submit"]').html($('.portlet button[type="submit"]').html().replace("提交","更新")),$(".portlet.light div").removeClass("form-md-floating-label"),$(".portlet.light").show()}var n=function(){jQuery().datepicker&&$(".date-picker").datepicker({rtl:App.isRTL(),orientation:"left",autoclose:!0,format:"yyyy-mm-dd"})};return $('select[name="oper_ID"]').change(function(){e()}),$('select[name="machine_ID"]').change(function(){e()}),{init:function(){$(".portlet.light").hide(),n(),t(),a(),o(),$("form[name=theForm]").submit(function(){var t,a;return"提交"!==$('.portlet button[type="submit"]').text().trim()?(t=getRootPath()+"/DataInterface/update",a={url:t,type:"post",resetForm:!0,data:{tbl:"1",class_ID:GetRadioChecked("class_ID"),utf2gbk:["remark"],id:$('.portlet button[type="submit"]').attr("data-sn"),record_Time:today(1)},success:function(t){var a=$.parseJSON(t);infoTips(a.message,a.type),$('button[type="reset"]').click(),$(".portlet.light").hide();var e=ReadData(getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=30&M=3");$('input[name="pulp_code"]').val(e.data[0]),$('.portlet button[type="submit"]').html($('.portlet button[type="submit"]').html().replace("更新","提交")),$(".portlet.light div").addClass("form-md-floating-label")},error:function(t){infoTips(JSON.stringify(t))}}):(t=getRootPath()+"/DataInterface/insert",a={url:t,type:"post",resetForm:!0,data:{tbl:"1",class_ID:GetRadioChecked("class_ID"),utf2gbk:["remark"],record_Time:today(1),pulp_code:$('input[name="pulp_code"]').val()},success:function(t){var a=$.parseJSON(t);infoTips(a.message,a.type),$('button[type="reset"]').click(),$(".portlet.light").hide(),$(".page-toolbar button").text("当天已录入数据："+(parseInt($(".page-toolbar button").text().replace("当天已录入数据：","").replace("条",""),10)+1)+"条");var e=ReadData(getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=30&M=3");$('input[name="pulp_code"]').val(e.data[0])},error:function(t){infoTips(JSON.stringify(t))}}),$(this).ajaxSubmit(a),!1}),$(document).on("click",".page-toolbar a",function(){var t=$(this).attr("href").split("#p=")[1];r(t)}),r()}}}();jQuery(document).ready(function(){initDom(),PaperParam.init()}),jQuery(window).resize(function(){HeadFix()});
//# sourceMappingURL=PaperPara_chemy.min.js.map