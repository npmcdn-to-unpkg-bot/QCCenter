var worklogEdit=function(){function e(){$("#ErrDesc").summernote({height:300,minHeight:null,maxHeight:null,focus:!0}),$(".form_advance_datetime").datetimepicker({isRTL:App.isRTL(),format:"yyyy-mm-dd hh:ii",autoclose:!0,todayBtn:!0,startDate:"2015-01-01 00:00",pickerPosition:App.isRTL()?"bottom-right":"bottom-left",minuteStep:10,language:"zh-CN"}),iChechBoxInit(),t(),SetiCheckChecked("proc_id",$('div[name="proc_id"]').attr("data-proc")),initSelect2(),a(),$("#today").text(today(0)),initDashboardDaterange("YYYY-MM-DD"),RoundedTheme(0),HeadFix()}function t(){var e=(new Date).getHours();e>=0&&8>e?SetiCheckChecked("class_id",2):e>=8&&16>e?SetiCheckChecked("class_id",0):SetiCheckChecked("class_id",1)}function a(){var e,t;switch($('div[name="proc_id"]').attr("data-proc")){case"0":e=getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=24&M=3";break;default:e=getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=35&M=3"}switch(t=ReadData(e),InitSelect("prod_id",t),$('div[name="proc_id"]').attr("data-proc")){case"0":e=getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=23&M=3";break;default:e=getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=36&M=3&p="+$('div[name="proc_id"]').attr("data-proc")}t=ReadData(e),InitSelect("machine_id",t),e=getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=38&M=3&p="+GetiCheckChecked("proc_id"),t=ReadData(e),InitSelect("oper_name",t)}return $("#SaveChanges").on("click",function(){for(var e=GetSwitchValue("proc_id",4),t=GetSwitchValue("workClass",3),a=$("#MachineName").val(),o=$("#ProductName").val(),i=$("#ProStatus").val(),r=$("#ProTime").val(),c="",n="",s=["无","于潇","丰锋","彭鹏","赵文倩","蒲明玥","舒粤","马可","胡新玥","李超群","徐闵","李宾","杨林","金鑫","包诚"],d=iProUserName.length-1;d>=0;d--)iProUserName[d]&&(""!==n&&(n+=","),n+=s[d]);for(d=iTransUserName.length-1;d>=0;d--)iTransUserName[d]&&(""!==c&&(c+=","),c+=s[d]);""===n&&(n="无"),""===c&&(c="无");var u=$("#ProInfo").val(),h=$("#ReportOutput").bootstrapSwitch("state")===!0?1:0,p=$("#RecordUserName").val(),l=$("#MainDesc").val(),m=$("#SubDesc").val(),f=$("#ErrDesc").code(),k=getRootUrl("worklog")+"AddLog";$.post(k,{proc_id:e,WorkClass:t,MachineName:a,ProductName:o,ProStatus:i,ProTime:r,ProUserName:n,TransUserName:c,ProInfo:u,ReportOutput:h,RecordUserName:p,RecordTime:strRecordTime,MainDesc:l,SubDesc:m,ErrDescHTML:f},function(e,t){var a=jQuery.parseJSON(e);a>0?infoTips("日志添加成功，请继续添加！</br>更新状态："+t+"</br>所添加数据ID:"+e,1):infoTips("日志添加失败，请检查拼写或联系管理员!</br>错误信息："+t+"</br>所添加数据:"+e,0)})}),$("#SaveSettings").on("click",function(){var e=$("#ProcID").val(),t=$("#LoadingNum").val(),a=$("#ProStatus").val(),o=$("#RefreshTime").val(),i=$("#AutoRefresh").bootstrapSwitch("state")===!0?1:0,r=getRootUrl("worklog")+"SaveLogQuerySettings";$.post(r,{ProcID:e,NumsID:t,Status:a,RefreshTime:o,AutoRefresh:i},function(e,t){if("success"==t){var a=jQuery.parseJSON(e);infoTips(a.message,1)}else infoTips("保存设置失败，请稍后重试或联系管理员!",0)})}),{init:function(){e(),$(".icheck").on("ifChanged",function(){$('div[name="proc_id"]').attr("data-proc",GetiCheckChecked("proc_id")),a()})}}}();jQuery(document).ready(function(){UIIdleTimeout.init(),worklogEdit.init()}),jQuery(window).resize(function(){HeadFix()});
//# sourceMappingURL=WorkLogEdit.min.js.map