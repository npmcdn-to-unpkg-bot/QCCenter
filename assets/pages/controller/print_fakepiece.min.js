var FakePiece=function(){function e(){var e=getRootPath(1)+"/DataInterface/Api?Token="+config.TOKEN+"&ID=35&M=3&t=1",t=ReadData(e);InitSelect("prod_ID",t),e=getRootPath(1)+"/DataInterface/Api?Token="+config.TOKEN+"&ID=189&M=3",t=ReadData(e),InitSelect("ProcID",t),$("input[name='rec_date']").val(today(6)),$("input[name='remark']").val("无"),initSelect2(),$(".page-header .dropdown-quick-sidebar-toggler").hide(),o()}function t(){var e={tbl:TBL.PRINT_FAKEPIECE,CartNumber:$("input[name='cart_number']").val(),ProductType:GetSelect2Text("prod_ID"),ProcID:$('select[name="ProcID"]').val(),Date:$("input[name='rec_date']").val().replace(/-/g,""),Describe:$("input[name='remark']").val(),utf2gbk:["Describe"]},t=["FakePiece","HalfPiece","NoNum"],a=JSON.stringify(e);a=a.replace("}","");var r;return $(".fakeNum input").map(function(e){r=$(this).val(),""===r&&(r=0),a=a+',"'+t[e]+'":'+r}),a+="}",$.parseJSON(a)}function a(){SetSelect2Val("ProcID",-1),$(".fakeNum input").val("0"),$("[name='remark']").val("无"),$("[name='cart_number']").focus()}function r(){var e=getRootPath()+"/DataInterface/insert",r={url:e,type:"post",resetForm:!0,data:t(),success:function(e){var t=$.parseJSON(e);bsTips(t.message,t.type),a(),n()},error:function(e){infoTips(JSON.stringify(e))}};return $.ajax(r),!1}function n(){function e(e,t){var a="<tr>	<td>"+t+"</td>";return e.map(function(e){a+="	<td>"+e+"</td>"}),a+="</tr>"}var t=$('[name="fakeList"] tbody'),a=$("input[name='rec_date']").val();a=a.replace(/-/g,"");var r=getRootPath(1)+"/DataInterface/Api?Token="+config.TOKEN+"&ID=190&M=3&tstart="+a,n=ReadData(r);if(0===n.rows)return void t.html('<tr><td class="text-center" colspan='+(n.cols+1)+">指定时间内无数据</td></tr>");var i="";n.data.map(function(t,a){i+=e(t,a+1)}),t.html(i)}var i=function(){jQuery().datepicker&&$(".date-picker").datepicker({rtl:App.isRTL(),orientation:"left",autoclose:!0,format:"yyyy-mm-dd"})},o=function(){$("input[name='cart_number']").maxlength({limitReachedClass:"label label-danger",threshold:3}),extendValidateRule();var e=getValidateRule("theForm");e.cart_number={minlength:8,maxlength:8,isCartNumber:!0,required:!0},e.rec_date.number=!1,e.FakePiece={digits:!0,required:!1},e.HalfPiece=e.FakePiece,e.NoNum=e.FakePiece,$("form[name=theForm]").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,rules:e,messages:{cart_number:{required:"车号不能为空."}},highlight:function(e){$(e).closest(".form-group").addClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error"),e.remove()},submitHandler:function(e){r()}})};return $('input[name="cart_number"]').on("keyup",function(){var e=$(this).val();if(e.length>=3){var t=e.substr(2,1);SetSelect2Val("prod_ID",t)}}),$('[name="reset"]').on("click",function(){a()}),{init:function(){i(),e(),n()}}}();jQuery(document).ready(function(){initDom(),FakePiece.init()}),jQuery(window).resize(function(){HeadFix()});
//# sourceMappingURL=print_fakepiece.min.js.map