function GetJsonUrl(a){var e=getDateRange(),t=getUrlParam("token");null==t&&(t="79d84495ca776ccb523114a2120e273ca80b315b");var r=getRootPath()+"/DataInterface/Api?Token="+t+"&ID="+a+"&M=3&tstart="+e.start+"&tend="+e.end+"&tstart2="+e.start+"&tend2="+e.end+"&t="+Math.random();return r}$("#HideTips").on("click",function(){$(".mt-element-ribbon").addClass("hide")});var mECharts=function(){function a(){require.config({baseUrl:"assets/global/plugins/",paths:{theme:"echarts/theme",echarts:"echarts/js/echarts.min",chartDataTool:"echarts/js/extension/chartDataTool.min",Clipboard:"clipboard/clipboard.min"}}),require(["echarts","chartDataTool","Clipboard"],function(a,r,n){var i;h=a,d=r,p=n,"undefined"==typeof localStorage.eChartsTheme?(i="ali_G2",localStorage.setItem("eChartsTheme","ali_G2")):i=localStorage.eChartsTheme;(function(){new p("#share button")})();require(["theme/"+i],function(a){u=a,e(),b(),t(u)})})}function e(){var a=$(".page-content");for(i=1;i<P;i++){var e='<div class="portlet light bordered">\n  <div class="portlet-title">\n    <button class="btn blue btn-circle" name="downloadExample" data-clipboard-action="copy" data-clipboard-target="#share textarea"  data-chartid="'+i+'"><i class="glyphicon glyphicon-download-alt"> </i> 下载图表</button>\n  <a class="btn red btn-circle" name="shareExample" data-chartid="'+i+'"><i class="fa fa-share-alt"> </i> 分享 </a>';e+='\n   <div class="actions">          \n              <a class="btn btn-circle btn-icon-only btn-default fullscreen" href="#">\n              </a>\n            </div>\n          </div>\n          <div class="portlet-body form">',e+='\n      <div id="eChart-main'+i+'" optionKey="Line" class="eCharts-main margin-top-5"></div>',e+="\n          </div>\n        </div>",a.append(e)}$('[name="showTable"]').attr({href:getRootPath(0)+"/QualityTable?tid="+getUrlParam("tid")})}function t(a,e){if(P&&h){var t,r={},n={id:getUrlParam("tid").split(","),type:null===getUrlParam("type")?["line"]:getUrlParam("type").split(","),smooth:null===getUrlParam("smooth")?["1"]:getUrlParam("smooth").split(","),markLine:null===getUrlParam("markline")?["0"]:getUrlParam("markline").split(","),markLineValue:null===getUrlParam("marklinevalue")?["0"]:getUrlParam("marklinevalue").split(","),markPoint:null===getUrlParam("markpoint")?["0"]:getUrlParam("markpoint").split(","),barMaxWidth:null===getUrlParam("barwidth")?["100"]:getUrlParam("barwidth").split(","),splitArea:null===getUrlParam("splitarea")?["0"]:getUrlParam("splitarea").split(","),dataZoom:null===getUrlParam("zoom")?["0"]:getUrlParam("zoom").split(","),minMax:null===getUrlParam("minmax")?["0"]:getUrlParam("minmax").split(","),lineAreaStyle:null===getUrlParam("linearea")?["0"]:getUrlParam("linearea").split(","),reverse:null===getUrlParam("reverse")?["0"]:getUrlParam("reverse").split(","),circle:null===getUrlParam("circle")?["0"]:getUrlParam("circle").split(","),roseType:null===getUrlParam("rose")?["0"]:getUrlParam("rose").split(","),dimension:null===getUrlParam("dimension")?["0"]:getUrlParam("dimension").split(","),squareRatio:null===getUrlParam("squareratio")?["1.618"]:getUrlParam("squareratio").split(","),shape:null===getUrlParam("shape")?["polygon"]:getUrlParam("shape").split(","),scatterSize:null===getUrlParam("scattersize")?["20"]:getUrlParam("scattersize").split(","),force:null===getUrlParam("force")?["1"]:getUrlParam("force").split(","),banknoteColor:null===getUrlParam("banknoteColor")?["1"]:getUrlParam("banknoteColor").split(","),stack:null===getUrlParam("stack")?["0"]:getUrlParam("stack").split(","),max:null===getUrlParam("max")?["0"]:getUrlParam("max").split(","),min:null===getUrlParam("min")?["0"]:getUrlParam("min").split(","),symbolSize:null===getUrlParam("symbolsize")?["10"]:getUrlParam("symbolsize").split(","),opacity:null===getUrlParam("opacity")?["0"]:getUrlParam("opacity").split(",")};for(t=0;P>t;t++)r={url:GetJsonUrl(n.id[t]),type:handleParam(n.type,t,"line"),smooth:"1"===handleParam(n.smooth,t,"1"),blind:"0"!==getUrlParam("blind")&&null!==getUrlParam("blind"),toolbox:!0,markLine:handleParam(n.markLine,t,"average"),markLineValue:handleParam(n.markLineValue,t,"0"),markPoint:"1"===handleParam(n.markPoint,t,"0"),barMaxWidth:handleParam(n.barMaxWidth,t,100),splitArea:"1"===handleParam(n.splitArea,t,"0"),dataZoom:handleParam(n.dataZoom,t,"0"),minMax:"1"===handleParam(n.minMax,t,"0"),lineAreaStyle:"1"===handleParam(n.lineAreaStyle,t,"0"),reverse:"1"===handleParam(n.reverse,t,"0"),circle:"1"===handleParam(n.circle,t,"1"),roseType:handleParam(n.roseType,t,"0"),dimension:Number.parseInt(handleParam(n.dimension,t,"1"),10)-1,squareRatio:Number.parseFloat(handleParam(n.squareRatio,t,"1.618")),shape:handleParam(n.shape,t,"polygon"),scatterSize:Number.parseFloat(handleParam(n.scatterSize,t,"20")),force:handleParam(n.force,t,"1"),banknoteColor:handleParam(n.banknoteColor,t,"1"),stack:"1"===handleParam(n.stack,t,"0"),max:handleParam(n.max,t,"1"),min:handleParam(n.min,t,"1"),symbolSize:handleParam(n.symbolSize,t,"10"),opacity:handleParam(n.opacity,t,.4)},"undefined"!=typeof a.valueAxis?a.valueAxis.splitArea.show=!!r.splitArea[t]:a.color=["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],r.color=a.color,f[t]=d.getOption(r),f[t]!==!1?(g[t]=h.init(document.getElementById("eChart-main"+t),a),g[t].setOption(f[t])):bsTips("第"+(t+1)+"张图表无数据，请重新选择查询时间",2);r.blind&&l()}}function r(){if($(".actions select opotion").length)return!1;var a,e=$(".actions select"),t="",r=["default","ali_G2","ali_G2_2","real","real2","real3","powerBI","darkColor","whiteDark","magzin","magzin2","colorful","helianthus","blue","green","red","gray"];r.map(function(a,e){t+='<option value="'+a+'">'+a+"</option>"}),e.html(t),"undefined"==typeof localStorage.eChartsTheme?(a="real2",localStorage.setItem("eChartsTheme","real2")):a=localStorage.eChartsTheme,$('.bs-select[name="ratio"]').find("option").data("icon","fa fa-desktop"),$(".bs-select").selectpicker({iconBase:"fa",tickIcon:"fa-check"}),e.selectpicker("val",a)}function n(a){"undefined"==typeof a&&(a=$('.bs-select[name="ratio"]').val()),localStorage.setItem("chartRatio",a);var e=$(".portlet-body.form"),t=$(".eCharts-main"),r=e.width(),n=r/a;t.css("height",n.toFixed(0))}function l(){for(var a=[],e=0;P>e;e++)a.push(g[e]);h.connect(a)}function o(a){localStorage.setItem("eChartsTheme",a),require(["theme/"+a],function(a){u=a,t(u)})}function s(){var a=$(".actions select");a&&$(a).change(function(){o($(this).val())})}function c(a){var e='<!DOCTYPE html>\n<html style="height: 100%">\n   <head>\n       <meta charset="utf-8">\n   </head>\n   <body style="height: 100%; margin: 0" onresize = "resize()">\n       <div id="container" style="height: 100%"></div>\n       <script type="text/javascript" src="'+getRootPath(1)+'/assets/global/plugins/echarts/js/echarts.min.js"></script>\n       <script type="text/javascript">\nvar dom = document.getElementById("container");\nvar theme = '+JSON.stringify(u)+";\nvar myChart = echarts.init(dom,theme);\nvar app = {};\noption = null;\noption = "+JSON.stringify(f[a]).replace(/null/g,NaN)+'\nif (option && typeof option === "object") {\n    var startTime = +new Date();\n    myChart.setOption(option,true);\n    var endTime = +new Date();\n    var updateTime = endTime - startTime;\n    console.log("Time used:", updateTime);\n}\nfunction resize(){\n    myChart.resize();\n}       </script>\n   </body>\n</html>',t=new Blob([e],{type:"text/html;charset=UTF-8",encoding:"UTF-8"}),r=document.createElement("a");r.href=URL.createObjectURL(t),r.download=f[a].title[0].text+".html",r.click()}function m(a){var e='<!DOCTYPE html>\n<html style="height: 100%">\n   <head>\n       <meta charset="utf-8">\n   </head>\n   <body style="height: 100%; margin: 0" onresize = "resize()">\n       <div id="container" style="height: 100%"></div>\n       <script type="text/javascript" src="'+getRootPath(1)+'/assets/global/plugins/echarts/js/echarts.min.js"></script>\n       <script type="text/javascript">\nvar dom = document.getElementById("container");\nvar theme = '+JSON.stringify(u)+";\nvar myChart = echarts.init(dom,theme);\nvar app = {};\noption = null;\noption = "+JSON.stringify(f[a]).replace(/null/g,NaN)+'\nif (option && typeof option === "object") {\n    var startTime = +new Date();\n    myChart.setOption(option,true);\n    var endTime = +new Date();\n    var updateTime = endTime - startTime;\n    console.log("Time used:", updateTime);\n}\nfunction resize(){\n    myChart.resize();\n}       </script>\n   </body>\n</html>',t=$.base64.encode((new Date).getTime());$("#share textarea").text(" "),$.ajax({url:getRootPath(0)+"/demo/chartShare.php",type:"POST",async:!1,data:{filename:t+".html",contents:e},success:function(a){try{var e=$.parseJSON(a),t=getRootPath(0)+e.url;$("#share textarea").text(t),$("#successShare").click()}catch(r){console.log(r),infoTips(a),bsTips("图表分享失败，请稍后重试",0)}},error:function(a){console.log(a),bsTips("图表分享失败，请稍后重试",0)}})}var h,d,p,u,g=[],P=null===getUrlParam("tid")?0:getUrlParam("tid").split(",").length,f=[],b=function(){var a=$('.bs-select[name="ratio"]');a.find("option").data("icon","fa fa-down"),"undefined"==typeof localStorage.chartRatio?(chartRatio=1.5,localStorage.setItem("chartRatio",chartRatio)):(chartRatio=localStorage.chartRatio,a.selectpicker("val",chartRatio),n(chartRatio)),a&&$(a).change(function(){for(n($(this).val()),i=0;i<P;i++)g[i].resize()})};return $(document).on("click",".ranges li:not(:last),button.applyBtn",function(){var a;a=$(".actions select"),require(["theme/"+a.val()],function(a){u=a,setTimeout(t(u),500)})}),$("#Preview a").on("click",function(){var a=$("#Preview input").val(),e=$(".actions select");require(["theme/"+e.val()],function(e){u=e,setTimeout(t(u,a+"&chartType=line"),500)})}),$(".page-content").on("click",'[name="shareExample"]',function(){m($(this).data("chartid"))}),$(".page-content").on("click",'[name="downloadExample"]',function(){c($(this).data("chartid"))}),{init:function(){r(),a(),s()},resize:function(){for(n(),i=0;i<P;i++)g[i].resize()}}}();jQuery(document).ready(function(){initDashboardDaterange("YYYYMMDD"),initDom(),mECharts.init(),1==App.getURLParameter("debug")||null===App.getURLParameter("tid")?$("#Preview").show():$("#Preview").hide(),hideSidebarTool()}),jQuery(window).resize(function(){HeadFix(),mECharts.resize()});
//# sourceMappingURL=QualityChart.min.js.map