function QueryMicroblog(t){var a=$("#LoadingNum").val(),e=$("#LogID").val(),o=$("#dashboard-report-range span").html(),i=o.split(" ~ ")[0],n=o.split(" ~ ")[1];t||(i="2015-01-01");var s,r=getRootUrl("MicroBlog")+"QueryLogInfo";switch(a){case"1":s=20;break;case"2":s=30;break;case"3":s=40;break;case"4":s=50}$.post(r,{Nums:s,CurID:e,TimeStart:i,TimeEnd:n},function(t,a){var e=jQuery.parseJSON(t);if(e.rows>0){e=jQuery.parseJSON(t);for(var o='<div class="timeline-item"><div class="timeline-badge"><div class="timeline-badge"><img class="timeline-badge-userpic" src="http://localhost/assets/admin/pages/media/users/realeve.jpg"></div></div><div class="timeline-body"><div class="timeline-body-arrow"></div><div class="timeline-body-head"><div class="timeline-body-head-caption"><a href="#" class="timeline-body-title font-blue-madison">',i='</a><span class="timeline-body-time font-grey-cascade">发表于',n="</span></div></div></div>",s=e.rows-1;s>=0;s--){var r='</small></span></div><div class="timeline-body-head-actions"><div class="btn-group"><button class="btn btn-circle green-haze btn-sm dropdown-toggle" type="button" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">操作 <i class="fa fa-angle-down"></i></button><ul class="dropdown-menu pull-right" role="menu"><li><a href="http://localhost/comment?ID='+e.data[s].ID+'" id="UpdateLog'+s+'" ><i class="icon-pencil"></i>&nbsp;&nbsp;评论 </a></li>';r+='<li><a href="http://localhost/Del?ID='+e.data[s].ID+'" id="Del'+s+'" data-toggle="confirmation" data-singleton="true" data-popout="true" data-placement="left" data-title="确定删除该条日志?" data-btn-ok-label="是" data-btn-ok-icon="icon-trash" data-btn-ok-class="btn-success" data-btn-cancel-label="取消" data-btn-cancel-icon="icon-close" data-btn-cancel-class="btn-danger"><i class="icon-trash"></i>&nbsp;&nbsp;删除 </a></li>',r+='<li><a href="http://localhost/Marky?ID='+e.data[s].ID+'" id="Mark"><i class="icon-star"></i>&nbsp;&nbsp;收藏 </a></li>',r+='</ul></div></div></div><div class="timeline-body-content"><span class="font-grey-cascade">';var l=ReadLog(e.data[s].ID);$(".timeline:first").prepend(o+e.data[s].UserName+i+e.data[s].RecordTime+r+l+n)}$("#LogID").val(e.data[0].ID)}else infoTips("该时间范围内无日志，请重新设置!</br>错误信息："+a+"</br>返回值:"+t,0)})}function ReadLog(t){var a=getRootUrl("MicroBlog")+"ReadLog",e="该条记录未填写任何日志";return $.ajax({type:"POST",async:!1,url:a,data:{ID:t},success:function(t){e=t}}),e}function ReadLogSettings(){var t=getRootUrl("MicroBlog")+"ReadLogQuerySettings";console.log(t),$.ajax({type:"POST",async:!1,url:t,success:function(t){var a=jQuery.parseJSON(t),e=a.data[0];$("#LoadingNum").val(e.NumsID),$("#RefreshTime").val(e.RefreshTime),0===e.AutoRefresh&&$("#AutoRefresh").bootstrapSwitch("toggleState"),QueryMicroblog(0)}})}function SwitchSelect(t,a){var e="input:radio[name="+t+"]:nth("+a+")";return e}function GetSwitchValue(t,a){for(var e=$("input:radio[name="+t+"]:nth(0)").bootstrapSwitch("state"),o=1;a>=o&&!e;o++)e=$("input:radio[name="+t+"]:nth("+o+")").bootstrapSwitch("state");return o}function PromotAlert(t){bootbox.prompt(t,function(t){alert(null===t?"Prompt dismissed":"Hi <b>"+t+"</b>")})}$("#PostMicriBlog").on("click",function(){var t=$("#BlogContent").val();if(t.length<=140&&t.length){var a=getRootUrl("MicroBlog")+"AddLog";$.ajax({type:"POST",async:!1,url:a,data:{BlogHTML:t},success:function(){$("#QueryData").click(),$("#BlogContent").val(""),$("#WordNum").html("还可以输入140字")}})}}),$("#BlogContent").bind("input propertychange",function(){var t=140-$("#BlogContent").val().length;$("#WordNum").html(t>=0?"还可以输入"+t+"字":"已超出"+-t+"字")}),$("#dashboard-report-range").on("apply.daterangepicker",function(){QueryMicroblog(1)}),$("#QueryData").on("click",function(){QueryMicroblog(1)}),$("#SaveSettings").on("click",function(){var t=$("#LoadingNum").val(),a=$("#RefreshTime").val(),e=$("#AutoRefresh").bootstrapSwitch("state")===!0?1:0,o=getRootUrl("MicroBlog")+"SaveLogQuerySettings";$.post(o,{NumsID:t,RefreshTime:a,AutoRefresh:e},function(t){var a=jQuery.parseJSON(t);a.rows>0?infoTips(a.message,1):infoTips("保存设置失败，请稍后重试或联系管理员!",0)})}),jQuery(document).ready(function(){UIIdleTimeout.init(),initDashboardDaterange("YYYY-MM-DD"),initDom(),ReadLogSettings()}),jQuery(window).resize(function(){HeadFix()});
//# sourceMappingURL=MicroBlog.min.js.map