var PaperParamAbnormal=function(){function e(){$('form input[type="text"]').eq(0).focus()}function t(){var t=getRootPath(1)+"/DataInterface/Api?Token="+config.TOKEN+"&ID=24&M=3&t=1",a=ReadData(t);InitSelect("prod_id",a),t=getRootPath(1)+"/DataInterface/Api?Token="+config.TOKEN+"&ID=23&M=3&t=0",a=ReadData(t),InitSelect("machine_id",a),t=getRootPath(1)+"/DataInterface/Api?Token="+config.TOKEN+"&ID=25&M=3&t=1",a=ReadData(t),InitSelect("oper_id",a),$("input[name='rec_date']").val(today(6)),$("input[name='reel_code']").maxlength({limitReachedClass:"label label-danger",threshold:3}),initSelect2(),$(".page-header .dropdown-quick-sidebar-toggler").hide(),$('[name="director_name"]').val("无"),e()}var a=function(){jQuery().datepicker&&$(".date-picker").datepicker({rtl:App.isRTL(),orientation:"left",autoclose:!0,format:"yyyy-mm-dd"})};$('input[name="reel_code"]').on("keyup",function(){var e=$(this).val();if(e.length>1){var t=e.substr(1,1);SetSelect2Val("prod_id",t);var a=e.substr(2,1);SetSelect2Val("machine_id",a)}});var r=function(){function t(e){var t,a="";return $('form[name="'+e+'"] input[type="text"]').map(function(e){a+='"'+$(this).attr("name")+'":{"number":true},'}),$('form[name="'+e+'"] select').map(function(e){a+='"'+$(this).attr("name")+'":{"min":0},'}),a="{"+jsOnRight(a,1)+"}",t=$.parseJSON(a),t.remark={require:!1,number:!1},t}function a(){var e=getRootPath()+"/DataInterface/insert",t=getFormData("theForm");t.tbl=TBL.PPR_ABNORMAL,t.utf2gbk=["remark","director_name"],t.rec_time=today(1),$.ajax({url:e,type:"POST",data:t,success:function(e){var t=$.parseJSON(e);bsTips(t.message,t.type),r()},error:function(e){infoTips("保存数据失败，请稍后重试或联系管理员!",0),infoTips(JSON.stringify(e))}})}function r(){$('form input[type="text"]').val(""),SetSelect2Val("oper_id",-1),SetSelect2Val("prod_id",-1),SetSelect2Val("machine_id",-1),$(".detail input").val("0"),$("input[name='rec_date']").val(today(6)),$('[name="remark"]').val("无"),$('[name="director_name"]').val("无"),e()}extendValidateRule();var n=t("theForm");n.reel_code={minlength:8,maxlength:8,isReelCode:!0,required:!0},n.oper_id={required:!0,min:0},n.rec_date={number:!1},n.director_name={number:!1},$("form[name=theForm]").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,rules:n,messages:{reel_code:{required:"轴号不能为空."},oper_id:{min:"操作人员信息不能为空"}},highlight:function(e){$(e).closest(".form-group").addClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error"),e.remove()},submitHandler:function(e){a()}}),$('a[name="reset"]').on("click",function(){r()})};return{init:function(){a(),t(),r()}}}();jQuery(document).ready(function(){initDom(),PaperParamAbnormal.init()}),jQuery(window).resize(function(){HeadFix()});
//# sourceMappingURL=PaperAbnormal.min.js.map