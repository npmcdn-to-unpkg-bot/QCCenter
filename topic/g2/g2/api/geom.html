<!DOCTYPE html>
<html>

<!-- Mirrored from g2.alipay.com/api/geom.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 25 May 2016 05:58:48 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="utf-8">
  <title>G2 - The Grammar Of Graphics </title>
  <meta name="keywords" content="G2, The Grammar of Graphics, 图形语法,图表绘制引擎,图表库,可视化,数据可视化,AntV,Data Visualization,visualization,visualisation">
  <meta name="description" content="G2(The Grammar Of Graphics) 是一个由纯 javascript 编写、强大的语义化图表生成工具，它提供了一整套图形语法，可以让用户通过简单的语法搭建出无数种图表，并且集成了大量的统计工具，支持多种坐标系绘制，可以让用户自由得定制图表，是为大数据时代而准备的强大的可视化工具。">
  <link rel="icon" href="../../os.alipayobjects.com/rmsportal/VuIJNnUTtJpfuej.png" type="image/x-icon">
  <link rel="shortcut icon" href="../../os.alipayobjects.com/rmsportal/PBJkVCMxFjrRGEl.png" type="image/x-icon">
  <link rel="stylesheet" type="text/css" href="../../as.alipayobjects.com/g/datavis/g2-static/0.0.6/style.css" />
  <link rel="stylesheet" type="text/css" href="../../as.alipayobjects.com/g/datavis/g2-static/0.0.6/codemirror.css" />
  <script src="../../a.alipayobjects.com/jquery/jquery/1.11.1/jquery.js"></script>
  <script src="../../g.alicdn.com/bui/index1d21.html??seajs/2.3.0/sea.js"></script>
  <script src="../../g.alicdn.com/bui/bui/1.1.17/config.js"></script>
  <script src="../../as.alipayobjects.com/g/datavis/g2-static/0.0.6/script.js"></script>
</head>
<body><header id="header">
  <div class="nav-wrapper">
    <div class="nav-content gradient-line clearfix" >
      <a href="../index.html" class="nav-logo">
        <img src="../../os.alipayobjects.com/rmsportal/nAStiIiXOkhKVdi.svg"/>
        <span class="logo-text">G2</span> 一套图形语法
      </a>
      <div class="nav pull-right">
        <ul id="J_nav" class="clearfix">
          <li id="start">
            <a href="../start/index.html">快速上手</a>
          </li>
          <li id="tutorial">
            <a href="../tutorial/index.html">教程</a>
          </li>
          <li id="api">
            <a class="hover" href="index.html">API</a>
          </li>
          <li id="download">
            <a href="../download/index.html">下载</a>
          </li>
          <li id="demo">
            <a href="../demo/index.html">图表</a>
          </li>
          <li>
            <a href="../about/index.html">关于</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</header>

<link rel="stylesheet" href="../../as.alipayobjects.com/g/datavis/g2-static/0.0.6/prettify-min.css">

<script src="../../as.alipayobjects.com/g/datavis/g2/1.2.1/index.js"></script>
<div class="banner api">
  <div class="banner-inner">
    <h1>G2 语法</h1>
    <p class="intro">在这里详细介绍 G2 API 的使用和可配置项<p/>
    <p class="intro">G2 的 API 使用非常简单<p/>
  </div>
</div>

  <div class="main-container clearfix">
<div class="body-content api-body-content">
  <div class="doc-nav">
    <p class="title">语法</p>
<ul class="nav-list">
  <li class="">
    <a href="index-2.html" >Chart</a>
  </li>
  <li class="active">
    <a href="geom.html" >Geom</a>
  </li>
  <li class="">
    <a href="scale.html" >Scale</a>
  </li>
  <li class="">
    <a href="frame.html" >Frame</a>
  </li>
  <li class="">
    <a href="stat.html" >Stat</a>
  </li>
  <li class="">
    <a href="global.html" >Global</a>
  </li>
  <li class="">
    <a href="theme.html" >Theme</a>
  </li>
  <li class="">
    <a href="util.html" >Util</a>
  </li>
  <li class="">
    <a href="plugins.html" >Plugins</a>
  </li>
  <li class="">
    <a href="graphic.html" >Graphic</a>
  </li>
</ul>
  </div>

  <div class="doc-content clearfix">
    <div class="doc-inner" id="t2">
      <script src="../../a.alipayobjects.com/alipay-request/3.0.3/index.js"></script>

<h1 id="geom">Geom</h1><h1 id="概述">概述</h1><p>几何图形对象，用于声明绘制的图表类型，具体的介绍请参见<a href="../tutorial/geom.html">Geom</a>。</p>
<h1 id="语法">语法</h1><p>下面是一条简单的绘制柱状图的语法，声明完使用的 geom 类型之后，就可以进行图形上的各种图形属性映射，下面我们会进行详述。</p>
<div class="highlight"><pre><code class="javascript">chart.interval().position(<span class="string">'x*y'</span>).color(<span class="string">'x'</span>);</code></pre></div><p>以下是目前 Geom 的基本类型：</p>
<table>
<thead>
<tr>
<th>type</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>point</td>
<td>点，用于点图的构建。</td>
</tr>
<tr>
<td>path</td>
<td>路径，无序的点连接而成的一条线。</td>
</tr>
<tr>
<td>line</td>
<td>线，点按照 x 轴连接成一条线，构成线图。</td>
</tr>
<tr>
<td>area</td>
<td>填充线图跟坐标系之间构成区域图，也可以指定上下范围。</td>
</tr>
<tr>
<td>interval</td>
<td>使用矩形或者弧形，用面积来表示大小关系的图形，一般构成柱状图、饼图等图表。</td>
</tr>
<tr>
<td>polygon</td>
<td>多边形，可以用于构建热力图、地图等图表类型。</td>
</tr>
<tr>
<td>schema</td>
<td>自定义图形，用于构建箱须图、蜡烛图等图表。</td>
</tr>
<tr>
<td>heatmap</td>
<td>用于绘制热力图。</td>
</tr>
<tr>
<td>contour</td>
<td>用于绘制等高线。</td>
</tr>
</tbody>
</table>
<p>另外结合对数据的调整方式，G2 还提供了如下的类型：</p>
<table>
<thead>
<tr>
<th>type</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>pointStack</td>
<td>层叠的点图</td>
</tr>
<tr>
<td>pointJitter</td>
<td>扰动点图</td>
</tr>
<tr>
<td>pointDodge</td>
<td>分组的线</td>
</tr>
<tr>
<td>intervalStack</td>
<td>层叠柱状图</td>
</tr>
<tr>
<td>intervalDodge</td>
<td>分组柱状图</td>
</tr>
<tr>
<td>intervalSymmetric</td>
<td>对称的柱状图，多用于绘制漏斗图。</td>
</tr>
<tr>
<td>areaStack</td>
<td>层叠面积图</td>
</tr>
<tr>
<td>schemaDodge</td>
<td>分组自定义图形</td>
</tr>
</tbody>
</table>
<p>在这里我用下面的图来解释下什么是数据的调整，在 G2 里面称之为 Adjust：</p>
<ul>
<li><p>stack 层叠
<img src="../../024028.oss-cn-hangzhou-zmf.aliyuncs.com/uploads/datavis/g2/d2984e6f74fd30d0d0ff7ec3922f5976/image.png" alt="image"></p>
</li>
<li><p>jitter 将点抖开
<img src="../../024028.oss-cn-hangzhou-zmf.aliyuncs.com/uploads/datavis/g2/46a30a41f85f1d26713285b82c1b4ba8/image.png" alt="image"></p>
</li>
<li><p>dodge 分组
<img src="../../024028.oss-cn-hangzhou-zmf.aliyuncs.com/uploads/datavis/g2/8ea21c38fe025cc9d92169a265003842/image.png" alt="image"></p>
</li>
<li><p>symmetric 对称
<img src="../../024028.oss-cn-hangzhou-zmf.aliyuncs.com/uploads/datavis/g2/7591dd5c4cc4278fa7e758c906eb404b/image.png" alt="image"></p>
</li>
</ul>
<h2 id="属性">属性</h2><h3>adjustTypes<span class="guide-text">String or Array</span></h3>

<p>【可选】，声明几何对象图形的数据调整方式，主要用于绘制层叠图、扰动图、分组图等。可支持的数据格式为 String 字符串或者 Array 数据（表示多种调整方式组合）。</p>
<p>上述已经已经提到我们除了提供一些基本的几何图形对象类型之外，结合数据的调整方式提供了类似 pointStack 的类型，其实这些类型也可以通过 参数的形式传入，并且用户还可以对这些数据的调整方式进行组合，创造出新颖多样的图表来。下面列出了以上这些类型通过传参的使用方式：</p>
<table>
<thead>
<tr>
<th>type</th>
<th>对应 adjust 类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>pointStack</td>
<td>chart.point(&#39;stack&#39;)</td>
</tr>
<tr>
<td>pointJitter</td>
<td>chart.point(&#39;jitter&#39;)</td>
</tr>
<tr>
<td>pointDodge</td>
<td>chart.point([&#39;dodge&#39;, &#39;stack&#39;])</td>
</tr>
<tr>
<td>intervalStack</td>
<td>chart.interval(&#39;stack&#39;)</td>
</tr>
<tr>
<td>intervalDodge</td>
<td>chart.interval(&#39;dodge&#39;)</td>
</tr>
<tr>
<td>intervalSymmetric</td>
<td>chart.interval(&#39;symmetric&#39;)</td>
</tr>
<tr>
<td>areaStack</td>
<td>chart.area(&#39;stack&#39;)</td>
</tr>
<tr>
<td>schemaDodge</td>
<td>chart.schema(&#39;dodge&#39;)</td>
</tr>
</tbody>
</table>
<h2 id="方法">方法</h2><p>以下方法均返回同一个 geomWrapper 对象，所以支持链式调用非常方便。如果下列方法传入的参数不是数据源的字段名时，G2 会按照属性常量来处理。</p>
<h3>position(dims)<span class="guide-text">Method</span></h3>

<p>将数据值映射到图形的位置上的方法。</p>
<h4 id="chart-geom-position-dim">chart.geom().position(dim)</h4><p>dim 为字符串，代表数据源中某一个字段，用于一维坐标系图表绘制。 <a href="../demo/01-point/linear.html">示例</a>。</p>
<h4 id="chart-geom-position-39-dima-dimb-39">chart.geom().position(&#39;dimA*dimB&#39;)</h4><p>多维使用 <em> 连接，position 属性会对多个字段进行数据的映射，如：cut</em>price，x*y 等，用于二维坐标系图表的绘制。<a href="../demo/01-point/scatter.html">示例</a>。</p>
<h4 id="chart-geom-position-stat-summary-median-39-dima-dimb-39">chart.geom().position(Stat.summary.median(&#39;dimA*dimB&#39;))</h4><p>图形属性还可以与统计函数进行结合，详见<a href="../tutorial/attr.html#图形属性和统计">图形属性和统计</a>。</p>
<h5 id="示例">示例</h5><div class="highlight"><pre><code class="javascript">chart.point().position(<span class="string">'cut'</span>);
chart.interval().position(<span class="string">'cut*price'</span>);
chart.interval().position(Stat.summary.median(<span class="string">'cut*price'</span>));</code></pre></div><h3>color(dim, colors) <span class="guide-text">Method</span></h3>

<p>将数据值映射到图形的颜色上的方法。</p>
<h4 id="chart-geom-color-dim-color">chart.geom().color(dim | color);</h4><h5 id="参数">参数</h5><ul>
<li><p><code>dim</code> or <code>color</code></p>
<p>只支持接收一个参数，dim 可以为映射至颜色属性的数据源字段名，如果数据源中不存在这个字段名的话，则按照常量进行解析，也可以直接指定某一个具体的颜色值 color，如 &#39;#fff&#39;, &#39;white&#39; 等。</p>
</li>
</ul>
<h5 id="示例">示例</h5><div class="highlight"><pre><code class="javascript">chart.point().position(<span class="string">'x*y'</span>).color(<span class="string">'x'</span>);
chart.point().position(<span class="string">'x*y'</span>).color(<span class="string">'red'</span>)</code></pre></div><h4 id="chart-geom-color-dim-colors">chart.geom().color(dim[, colors]);</h4><h5 id="参数">参数</h5><ul>
<li><p><code>dim</code></p>
<p>dim 为映射至颜色属性的数据源字段名</p>
</li>
<li><p><code>colors</code></p>
<p>colors 的参数有以下情况：</p>
<ul>
<li>如果为空，即未指定颜色的数组，那么使用内置的全局的颜色；</li>
<li>如果需要指定颜色，则需要以数组格式传入，那么分类的颜色按照数组中的颜色确定。对于颜色的分配顺序，会默认按照原始数据源中字段的顺序进行分配；</li>
<li>还支持指定颜色的计算方式，目前 G2 默认提供了多种的计算方式：&#39;red&#39;, &#39;blue&#39;, &#39;green&#39;, &#39;rainbow&#39;, &#39;hue&#39;, &#39;lightness&#39;, &#39;brightness&#39;，常用于映射连续类型数据的颜色；</li>
<li>还支持这种格式：<code>color1-color2</code>，用于指定一个渐变色，数据根据分类或者连续类型，在渐变的颜色区间内取颜色。</li>
</ul>
</li>
</ul>
<h5 id="示例">示例</h5><div class="highlight"><pre><code class="javascript">chart.point().position(<span class="string">'x*y'</span>).color(<span class="string">'z'</span>); <span class="comment">// 使用默认的颜色</span>
chart.point().position(<span class="string">'x*y'</span>).color(<span class="string">'z'</span>, [<span class="string">'red'</span>, <span class="string">'blue'</span>]); <span class="comment">// 使用传入的指定颜色</span>
chart.point().position(<span class="string">'x*y'</span>).color(<span class="string">'z'</span>, <span class="string">'hue'</span>); <span class="comment">// 使用某种颜色计算方式，这里是使用色调</span>
chart.point().position(<span class="string">'x*y'</span>).color(<span class="string">'z'</span>,<span class="string">'red-blue'</span>); <span class="comment">// 使用渐变色</span></code></pre></div><h4 id="chart-geom-color-dim-colorcallback">chart.geom().color(dim, colorCallback);</h4><h5 id="参数">参数</h5><ul>
<li><p><code>dim</code></p>
<p>dim 为映射至颜色属性的数据源字段名</p>
</li>
<li><p><code>colorCallback</code> </p>
<p>[Function]，指定一个颜色的回调函数，用于高灵活度的用户自定义。</p>
</li>
</ul>
<h5 id="示例">示例</h5><div class="highlight"><pre><code class="javascript">chart.point().position(<span class="string">'x*y'</span>).color(<span class="string">'z'</span>, <span class="function"><span class="keyword">function</span><span class="params">(value)</span> {</span>
  <span class="keyword">if</span>(value === <span class="number">1</span>) {
    <span class="keyword">return</span> <span class="string">'red'</span>
  }<span class="keyword">else</span> {
    <span class="keyword">return</span> <span class="string">'blue'</span>;
  }
});</code></pre></div><h3>shape(dim, shapes)<span class="guide-text">Method</span></h3>

<p>将数据值映射到图形的形状上的方法。</p>
<h4 id="chart-geom-shape-39-shape-39">chart.geom().shape(&#39;shape&#39;);</h4><h5 id="参数">参数</h5><ul>
<li><p><code>shape</code></p>
<p>只支持接收一个参数，指定几何图像对象绘制的形状。下表列出了不同的 geom 几何图形对象支持的 shape 形状：</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>geom 类型</th>
<th>shape 类型</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>point</td>
<td>&#39;circle&#39;,&#39;square&#39;,&#39;bowtie&#39;,&#39;diamond&#39;,&#39;hexagon&#39;,&#39;triangle&#39;,&#39;triangle-down&#39;,<br>&#39;hollowCircle&#39;,&#39;hollowSquare&#39;,&#39;hollowBowtie&#39;,&#39;hollowDiamond&#39;,<br>&#39;hollowHexagon&#39;,&#39;hollowTriangle&#39;,&#39;hollowTriangle-down&#39;,<br>&#39;cross&#39;,&#39;tick&#39;,&#39;plus&#39;,&#39;hyphen&#39;,&#39;line&#39;</td>
<td>hollow开头的图形都是空心的</td>
</tr>
<tr>
<td>line</td>
<td>&#39;line&#39;,&#39;smooth&#39;,&#39;dot&#39;,&#39;dash&#39;,&#39;dotSmooth&#39;,&#39;spline&#39;</td>
<td>dot ：<a href="https://www.alipay.com/404.html">点线</a>，smooth： <a href="https://www.alipay.com/404.html">平滑线</a>,spline:<a href="https://www.alipay.com/404.html">限定了范围的平滑线</a></td>
</tr>
<tr>
<td>area</td>
<td>&#39;area&#39;,&#39;smooth&#39;,&#39;line&#39;,&#39;dotLine&#39;,&#39;smoothLine&#39;,&#39;dotSmoothLine&#39;</td>
<td><a href="https://www.alipay.com/404.html">area</a>和<a href="https://www.alipay.com/404.html">smooth</a>是填充内容的区域图，其他图表是空心的线图</td>
</tr>
<tr>
<td>interval</td>
<td>&#39;rect&#39;,&#39;hollowRect&#39;,&#39;line&#39;,&#39;tick&#39;,&#39;stroke&#39;</td>
<td><a href="https://www.alipay.com/404.html">hollowRect</a>是空心的矩形， <a href="https://www.alipay.com/404.html">line</a> 和 <a href="https://www.alipay.com/404.html">tick</a> 都是线段,stroke：带边框的矩形</td>
</tr>
<tr>
<td>polygon</td>
<td>&#39;polygon&#39;,&#39;hollow&#39;,&#39;stroke&#39;</td>
<td>polygon：多边形、hollow：空心多边形和 stroke：带边框的多边形</td>
</tr>
<tr>
<td>schema</td>
<td>&#39;box&#39;,&#39;candle&#39;</td>
<td>目前仅支持箱须图、K线图</td>
</tr>
</tbody>
</table>
<h5 id="示例">示例</h5><div class="highlight"><pre><code class="javascript">chart.point().position(<span class="string">'x*y'</span>).shape(<span class="string">'square'</span>); <span class="comment">// 指定所有点的图形是正方形</span></code></pre></div><h4 id="chart-geom-shape-dim-shapes">chart.geom().shape(dim, shapes);</h4><p>指定多个图形，图形的顺序跟字段的值对应。</p>
<h5 id="参数">参数</h5><ul>
<li><p><code>dim</code></p>
<p>dim 为映射至颜色属性的数据源字段名。</p>
</li>
<li><p><code>shapes</code></p>
<p>shapes 是一个可选参数，如果没有声明会按照 G2 默认为特定 geom 类型配置的形状进行渲染，当然用户也可自己指定渲染的形状，具体的形状已在上面列出，下面是 G2 为特定的几何图形对象提供的 shapes:</p>
<div class="highlight"><pre><code class="javascript"><span class="keyword">var</span> shapes = {
point: [<span class="string">'hollowCircle'</span>, <span class="string">'hollowSquare'</span>, <span class="string">'hollowDiamond'</span>, <span class="string">'hollowBowtie'</span>, <span class="string">'hollowTriangle'</span>,
  <span class="string">'hollowHexagon'</span>, <span class="string">'cross'</span>, <span class="string">'tick'</span>, <span class="string">'plus'</span>, <span class="string">'hyphen'</span>, <span class="string">'line'</span>
],
line: [<span class="string">'line'</span>, <span class="string">'dash'</span>, <span class="string">'dot'</span>],
area: [<span class="string">'area'</span>]
};</code></pre></div></li>
</ul>
<h5 id="示例">示例</h5><div class="highlight"><pre><code class="javascript"><span class="keyword">var</span> defs = {
  <span class="string">'cut'</span>: {
    values: [<span class="string">'Ideal'</span>, <span class="string">'Premium'</span>, <span class="string">'Very-Good'</span>, <span class="string">'Good'</span>, <span class="string">'Fair'</span>]
  }
};
chart.source(data, defs);
chart.point().position(<span class="string">'carat*price'</span>).shape(<span class="string">'cut'</span>); <span class="comment">// 使用默认的 shapes</span>
chart.point().position(<span class="string">'carat*price'</span>).shape(<span class="string">'cut'</span>, [<span class="string">'cross'</span>, <span class="string">'tick'</span>, <span class="string">'plus'</span>, <span class="string">'hyphen'</span>, <span class="string">'line'</span>]); <span class="comment">// 使用自定义的 shapes</span></code></pre></div><h4 id="chart-geom-shape-dim-callback">chart.geom().shape(dim, callback);</h4><p>通过回调函数设置图形类型.</p>
<h5 id="参数">参数</h5><ul>
<li><p><code>dim</code></p>
<p>dim 为映射至颜色属性的数据源字段名。</p>
</li>
<li><p><code>callback</code></p>
<p>[Function] 回调函数</p>
</li>
</ul>
<h5 id="示例">示例</h5><div class="highlight"><pre><code class="javascript">chart.point().position(<span class="string">'x*y'</span>).shape(<span class="string">'z'</span>, <span class="function"><span class="keyword">function</span><span class="params">(value)</span> {</span>
  <span class="keyword">if</span> (value === <span class="number">1</span>) {
    <span class="keyword">return</span> <span class="string">'circle'</span>
  }<span class="keyword">else</span> {
    <span class="keyword">return</span> <span class="string">'square'</span>;
  }
});</code></pre></div><h3>size(dim, max, min) <span class="guide-text">Method</span></h3>

<p>将数据值映射到图形的大小上的方法。</p>
<h4 id="chart-geom-size-value）">chart.geom().size(value）</h4><p>传入数字常量，如 <code>chart.point().size(20)</code>。</p>
<p><strong>注意：</strong> 不同图形的 size 的含义有所差别：</p>
<ul>
<li>point 图形的 size 影响点的半径大小；</li>
<li>line, area, path 中的 size 影响线的粗细；</li>
<li>interval 的 size 影响柱状图的宽度。</li>
</ul>
<h4 id="chart-geom-size-dim">chart.geom().size(dim)</h4><p>根据 dim 字段的值映射大小，使用默认的最大值 max:10 和最小值 min: 1。</p>
<h5 id="示例">示例</h5><div class="highlight"><pre><code class="javascript">chart.point().position(<span class="string">'x*y'</span>).size(<span class="string">'z'</span>); <span class="comment">// 使用 z 字段的值来映射大小</span></code></pre></div><h4 id="chart-geom-size-dim-max-min">chart.geom().size(dim, max, min)</h4><p>根据 dim 字段的值映射大小，使用声明的最大值 max 和最小值 min。第二个参数代表最大值，第三个参数代表最小值。</p>
<h5 id="示例">示例</h5><div class="highlight"><pre><code class="javascript">chart.point().position(<span class="string">'x*y'</span>).size(<span class="string">'z'</span>, <span class="number">100</span>); <span class="comment">// 使用 z 字段的值来映射大小，最大值为 100，使用默认的最小值 1</span>
chart.point().position(<span class="string">'x*y'</span>).size(<span class="string">'z'</span>, <span class="number">100</span>, <span class="number">10</span>); <span class="comment">// 使用 z 字段的值来映射大小，最大值为 100，最小值 10</span></code></pre></div><h4 id="chart-geom-size-dim-callback">chart.geom().size(dim, callback)</h4><p>使用回调函数控制图形大小。</p>
<h5 id="示例">示例</h5><div class="highlight"><pre><code class="javascript">chart.point().position(<span class="string">'x*y'</span>).size(<span class="string">'z'</span>, <span class="function"><span class="keyword">function</span><span class="params">(value)</span> {</span>
  <span class="keyword">if</span>(value === <span class="number">1</span>) {
    <span class="keyword">return</span> <span class="number">5</span>;
  }
  <span class="keyword">return</span> <span class="number">10</span>;
});</code></pre></div><h3>opacity(dim[, callback])<span class="guide-text">Method</span></h3>

<p>将数据值映射到图形的透明度上的方法。</p>
<h4 id="chart-geom-opacity-value">chart.geom().opacity(value)</h4><p>直接指定所有图形的透明度，value 为 0 至 1 范围的小数。</p>
<h5 id="示例">示例</h5><div class="highlight"><pre><code class="javascript">chart.interval().position(<span class="string">'x*y'</span>).opacity(<span class="number">0.8</span>); <span class="comment">// 图形颜色为 0.8 透明度</span></code></pre></div><h4 id="chart-geom-opacity-dim">chart.geom().opacity(dim)</h4><p>根据 dim 字段的值计算透明度。</p>
<h5 id="示例">示例</h5><div class="highlight"><pre><code class="javascript">chart.interval().position(<span class="string">'x*y'</span>).opacity(<span class="string">'z'</span>);</code></pre></div><h4 id="chart-geom-opacity-dim-callback">chart.geom().opacity(dim, callback)</h4><p>通过回调函数设置透明度。</p>
<h5 id="示例">示例</h5><div class="highlight"><pre><code class="javascript">chart.point().position(<span class="string">'x*y'</span>).opacity(<span class="string">'z'</span>, <span class="function"><span class="keyword">function</span><span class="params">(value)</span> {</span>
  <span class="keyword">if</span>(value === <span class="number">1</span>) {
    <span class="keyword">return</span> <span class="number">0.5</span>;
  }
  <span class="keyword">return</span> <span class="number">0.8</span>;
});</code></pre></div><h3>label(dim[, cfg])<span class="guide-text">Method</span></h3>

<p>将数据值映射到图形的文本上的方法。</p>
<h4 id="chart-geom-label-dim">chart.geom().label(dim)</h4><p>显示 dim 字段对应的文本。</p>
<h5 id="示例">示例</h5><div class="highlight"><pre><code class="javascript">chart.point().position(<span class="string">'x*y'</span>).label(<span class="string">'x'</span>);</code></pre></div><h4 id="chart-geom-label-dim-cfg">chart.geom().label(dim, cfg)</h4><p>设置显示文本的配置信息。</p>
<h5 id="参数">参数</h5><ul>
<li><code>cfg</code></li>
</ul>
<div class="highlight"><pre><code class="javascript">chart.intervalStack().position(<span class="string">'x*y'</span>).label(<span class="string">'x'</span>, {
  offset: -<span class="number">16</span>, <span class="comment">// 文本距离图形的距离</span>
  lableLine: <span class="literal">false</span>, <span class="comment">//  是否显示点到图形的连接线，目前仅饼图支持，默认为 true，显示连接线</span>
  label: {
    <span class="string">'font-weight'</span>: <span class="string">'bold'</span>, <span class="comment">// 文本粗细</span>
    <span class="string">'font-family'</span>: <span class="string">'宋体'</span>, <span class="comment">// 文本字体</span>
    <span class="string">'font-size'</span>: <span class="number">12</span>, <span class="comment">// 文本大小</span>
    rotate: Math.PI, <span class="comment">// 文本旋转的教师，一般自动计算</span>
    <span class="string">'text-anchor'</span>: <span class="string">'middle'</span> <span class="comment">// 文本对齐方式，可取值 start middle end，默认为 middle </span>
  }, <span class="comment">// 所有文本共享的配置信息</span>
  custom: <span class="literal">false</span>, <span class="comment">// 是否使用自定义文本，如果是true，那么就使用html显示文本</span>
  renderer: <span class="function"><span class="keyword">function</span><span class="params">(text, item, index)</span>  {</span>
    <span class="comment">// 配合 custom 为 true 使用，格式化文本的函数</span>
  }
});</code></pre></div><h5 id="示例">示例</h5><div id="c1" class="chart-container"></div>

<script>(function(){// 格式化饼图文本
'use strict';

function formatter(text, item) {
  var point = item.point; // 每个弧度对应的点
  var proportion = point['..proportion']; // ..proportion 字段由Stat.summary.proportion统计函数生成
  proportion = (proportion * 100).toFixed(2) + '%';
  return '<span class="title">' + text + '</span><br><span style="color:' + point.color + '">' + proportion + '</span>';
}
$.getJSON('/data.json?filename=diamond', function (data) {
  var Stat = G2.Stat;
  var chart = new G2.Chart({
    id: 'c1',
    width: 800,
    height: 400,
    plotCfg: {
      margin: [20, 90, 60, 80]
    }
  });
  chart.source(data);
  chart.coord('theta', { radius: 0.6 });
  // 不同cut（切割工艺）所占的比例
  chart.intervalStack().position(Stat.summary.proportion()).color('cut').label('cut', {
    custom: true, // 使用自定义文本
    renderer: formatter, // 格式化文本的函数
    labelLine: false, // 不显示文本的连接线
    offset: 50 // 文本距离图形的距离
  });
  chart.render();
});})()</script><div class="highlight"><pre><code class="javascript"><span class="comment">// 格式化饼图文本</span>
<span class="function"><span class="keyword">function</span> <span class="title">formatter</span><span class="params">(text, item)</span> {</span>
  <span class="keyword">var</span> point = item.point; <span class="comment">// 每个弧度对应的点</span>
  <span class="keyword">var</span> proportion = point[<span class="string">'..proportion'</span>]; <span class="comment">// ..proportion 字段由Stat.summary.proportion统计函数生成</span>
  proportion = (proportion * <span class="number">100</span>).toFixed(<span class="number">2</span>) + <span class="string">'%'</span>;
  <span class="keyword">return</span> <span class="string">'&lt;span class="title"&gt;'</span> + text + <span class="string">'&lt;/span&gt;&lt;br&gt;&lt;span style="color:'</span> + point.color + <span class="string">'"&gt;'</span> + proportion + <span class="string">'&lt;/span&gt;'</span>;
}
$.getJSON(<span class="string">'/data.json?filename=diamond'</span>,<span class="function"><span class="keyword">function</span> <span class="params">(data)</span> {</span>
  <span class="keyword">var</span> Stat = G2.Stat;
  <span class="keyword">var</span> chart = <span class="keyword">new</span> G2.Chart({
    id: <span class="string">'c1'</span>,
    width: <span class="number">800</span>,
    height: <span class="number">400</span>,
    plotCfg: {
    margin: [<span class="number">20</span>, <span class="number">90</span>, <span class="number">60</span>, <span class="number">80</span>]
    }
  });
  chart.source(data);
  chart.coord(<span class="string">'theta'</span>,{radius: <span class="number">0.6</span>});
  <span class="comment">// 不同cut（切割工艺）所占的比例</span>
  chart.intervalStack()
    .position(Stat.summary.proportion())
    .color(<span class="string">'cut'</span>)
    .label(<span class="string">'cut'</span>, {
      custom: <span class="literal">true</span>, <span class="comment">// 使用自定义文本</span>
      renderer: formatter, <span class="comment">// 格式化文本的函数</span>
      labelLine: <span class="literal">false</span>, <span class="comment">// 不显示文本的连接线</span>
      offset: <span class="number">50</span> <span class="comment">// 文本距离图形的距离</span>
    });
  chart.render();
});</code></pre></div><h4 id="chart-geom-label-dim-callback-labelcfg">chart.geom().label(dim, callback, labelCfg)</h4><p>使用回调函数控制文本显示。</p>
<h5 id="示例">示例</h5><div class="highlight"><pre><code class="javascript">chart.polygon().position(Stat.treemap(<span class="string">'children*value'</span>)).color(<span class="string">'type'</span>).shape(<span class="string">'stroke'</span>)
  .label(<span class="string">'name*children'</span>, <span class="function"><span class="keyword">function</span><span class="params">(name, children)</span> {</span> <span class="comment">// 仅显示没有子节点的名称</span>
    <span class="keyword">if</span> (!children) {
      <span class="keyword">return</span> name;
    }
  }, {
    label: {
      fill: <span class="string">'#fff'</span>
    }
  });</code></pre></div><h3>tooltip(dim)<span class="guide-text">Method</span></h3>

<p>将数据值映射到 Tooltip 上。需要说明的是，如果用户同时在 chart.tooltip() 方法中设置了 map 属性，那么这个 map 会被覆盖。</p>
<h5 id="参数">参数</h5><ul>
<li><p><code>dim</code></p>
<p>对应数据源的某个字段，可以指定一个或者多个，当有多个时，使用 * 来连接。</p>
</li>
</ul>
<h5 id="示例">示例</h5><div id="c2" class="chart-container"></div>

<script>(function(){"use strict";

var data = [{ "gender": "female", "height": 161.2, "weight": 51.6 }, { "gender": "female", "height": 167.5, "weight": 59 }, { "gender": "male", "height": 159.5, "weight": 49.2 }, { "gender": "male", "height": 157, "weight": 63 }, { "gender": "female", "height": 155.8, "weight": 53.6 }];
var chart = new G2.Chart({
  id: 'c2',
  width: 800,
  height: 400
});

chart.source(data, {
  weight: {
    alias: '体重（kg）'
  },
  height: {
    alias: '身高（cm）'
  }
});
chart.tooltip({
  title: null, // 在这里设置不显示 title
  map: {
    name: 'height',
    value: 'weight'
  } // 这个 map 属性被覆盖了
});
chart.point().position('height*weight').color('gender', ['#f96a52', '#00a3d7']).opacity(0.5).shape('circle').tooltip('gender*height*weight');
chart.render();})()</script><div class="highlight"><pre><code class="javascript"><span class="keyword">var</span> data = [
  {<span class="string">"gender"</span>:<span class="string">"female"</span>,<span class="string">"height"</span>:<span class="number">161.2</span>,<span class="string">"weight"</span>:<span class="number">51.6</span>},
  {<span class="string">"gender"</span>:<span class="string">"female"</span>,<span class="string">"height"</span>:<span class="number">167.5</span>,<span class="string">"weight"</span>:<span class="number">59</span>},
  {<span class="string">"gender"</span>:<span class="string">"male"</span>,<span class="string">"height"</span>:<span class="number">159.5</span>,<span class="string">"weight"</span>:<span class="number">49.2</span>},
  {<span class="string">"gender"</span>:<span class="string">"male"</span>,<span class="string">"height"</span>:<span class="number">157</span>,<span class="string">"weight"</span>:<span class="number">63</span>},
  {<span class="string">"gender"</span>:<span class="string">"female"</span>,<span class="string">"height"</span>:<span class="number">155.8</span>,<span class="string">"weight"</span>:<span class="number">53.6</span>}
];
<span class="keyword">var</span> chart = <span class="keyword">new</span> G2.Chart({
  id: <span class="string">'c2'</span>,
  width : <span class="number">800</span>,
  height : <span class="number">400</span>
});

chart.source(data, {
  weight: {
    alias: <span class="string">'体重（kg）'</span>
  },
  height: {
    alias: <span class="string">'身高（cm）'</span>
  }
});
chart.tooltip({
  title: <span class="literal">null</span>, <span class="comment">// 在这里设置不显示 title</span>
  map: {
    name: <span class="string">'height'</span>,
    value: <span class="string">'weight'</span>
  } <span class="comment">// 这个 map 属性被覆盖了</span>
});
chart.point().position(<span class="string">'height*weight'</span>)
  .color(<span class="string">'gender'</span>, [<span class="string">'#f96a52'</span>, <span class="string">'#00a3d7'</span>])
  .opacity(<span class="number">0.5</span>)
  .shape(<span class="string">'circle'</span>)
  .tooltip(<span class="string">'gender*height*weight'</span>);
chart.render();</code></pre></div><h3>style(cfg)<span class="guide-text">Method</span></h3>

<p>用于快速配置图形的样式。不同的几何对象配置项略有不同。</p>
<h5 id="参数">参数</h5><div class="highlight"><pre><code class="javascript"><span class="keyword">var</span> cfg = {
  point: {
    <span class="string">'stroke-width'</span>: <span class="number">1</span>,
    fill: <span class="string">'#999'</span>,
    radius: <span class="number">4</span>
  },
  hollowPoint: {
    fill: <span class="string">'#fff'</span>,
    <span class="string">'stroke-width'</span>: <span class="number">1</span>,
    stroke: <span class="string">'#999'</span>,
    radius: <span class="number">3</span>
  },
  interval: {
    <span class="string">'stroke-width'</span>: <span class="number">0</span>,
    fill: <span class="string">'#999'</span>,
    <span class="string">'fill-opacity'</span>: <span class="number">0.85</span>
  },
  strokeInterval: {
    <span class="string">'stroke-width'</span>: <span class="number">1</span>,
    stroke: <span class="string">'#fff'</span>
  },
  pie: {
    <span class="string">'stroke-width'</span>: <span class="number">1</span>,
    stroke: <span class="string">'#fff'</span>
  },
  hollowInterval: {
    fill: <span class="string">'#fff'</span>,
    stroke: <span class="string">'#999'</span>,
    <span class="string">'fill-opacity'</span>: <span class="number">0</span>,
    <span class="string">'stroke-width'</span>: <span class="number">1</span>
  },
  area: {
    <span class="string">'stroke-width'</span>: <span class="number">0</span>,
    fill: <span class="string">'#999'</span>,
    <span class="string">'fill-opacity'</span>: <span class="number">0.6</span>
  },
  polygon: {
    <span class="string">'stroke-width'</span>: <span class="number">0</span>,
    fill: <span class="string">'#999'</span>,
    <span class="string">'fill-opacity'</span>: <span class="number">1</span>
  },
  hollowPolygon: {
    fill: <span class="string">'#fff'</span>,
    stroke: <span class="string">'#999'</span>,
    <span class="string">'fill-opacity'</span>: <span class="number">0</span>,
    <span class="string">'stroke-width'</span>: <span class="number">1</span>
  },
  strokePolygon: {
    fill: <span class="string">'#999'</span>,
    stroke: <span class="string">'#efefef'</span>,
    <span class="string">'fill-opacity'</span>: <span class="number">1</span>
  },
  hollowArea: {
    fill: <span class="string">'#fff'</span>,
    stroke: <span class="string">'#999'</span>,
    <span class="string">'fill-opacity'</span>: <span class="number">0</span>,
    <span class="string">'stroke-width'</span>: <span class="number">1</span>
  },
  line: {
    stroke: <span class="string">'#999'</span>,
    <span class="string">'stroke-width'</span>: <span class="number">1</span>,
    fill: <span class="literal">null</span>
  }
};</code></pre></div><script type="text/javascript" src="../../as.alipayobjects.com/g/datavis/g2-static/0.0.6/nav-menu.js"></script>
<style type="text/css">
  .preNext {
    margin: 50px 0;
    width: 100%;
  }
</style>
<div class="preNext clearfix">
  <a href="index-2.html" class="pull-left">
    <i class="iconfont icon-pre"></i>
    Chart
  </a>
  <a href="scale.html" class="pull-right">
    Scale
    <i class="iconfont icon-next"></i>
  </a>
</div>
    </div>
    <script type="text/javascript" src="../../as.alipayobjects.com/g/datavis/g2-static/0.0.6/nav-menu.js"></script>
  </div>
</div>
<script src="../../as.alipayobjects.com/g/datavis/g2-static/0.0.6/prettify-min.js"></script>
<script type="text/javascript">
var CLS_PRETTY = 'prettyprint linenums';
BUI.use('bui/common',function(BUI){
  var preEls =  $('pre');
  BUI.each(preEls,function(el){
    var node = $(el), innerText;
    node.addClass(CLS_PRETTY);
    innerText = node.html();
    var a = /^(\s+)/.exec(innerText),
      regex;
    if(a){
      regex = new RegExp('('+a[0]+')(\\s*)','ig');
      innerText = innerText.replace(regex,'$2');
    }

    node.html(innerText);
  });
  if(window.prettyPrint){
    prettyPrint();
  }
});
</script>

  </div>

 <a href="javascript:void(0);" id='toTop' title="返回顶部">
	<i class="iconfont icon-to-top"></i>
</a>
</body>

<!-- Mirrored from g2.alipay.com/api/geom.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 25 May 2016 06:00:14 GMT -->
</html>
