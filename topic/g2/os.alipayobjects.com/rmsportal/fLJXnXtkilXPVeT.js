!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(31)},function(t,e,n){"use strict";var i=n(68);t.exports=i},function(t,e,n){"use strict";var i={Matrix3:n(53),Vector2:n(54),Vector3:n(55)};t.exports=i},function(t,e,n){"use strict";var i=n(1);t.exports=i},function(t,e,n){"use strict";var i=n(52);t.exports=i},function(t,e,n){"use strict";var i=n(30),r=n(19),a=n(18),s=n(17),o=n(2);n(1),o.Vector2;t.exports={line:function(t,e,n,r,a,s,o){var u=i.box(t,e,n,r,a);if(!this.box(u.minX,u.maxX,u.minY,u.maxY,s,o))return!1;var c=i.pointDistance(t,e,n,r,s,o);return isNaN(c)?!1:a/2>=c},polyline:function(t,e,n,i){var r=this,a=t.length-1;if(1>a)return!1;for(var s=0;a>s;s++){var o=t[s][0],u=t[s][1],c=t[s+1][0],h=t[s+1][1];if(r.line(o,u,c,h,e,n,i))return!0}return!1},cubicline:function(t,e,n,i,r,s,o,u,c,h,l){return a.pointDistance(t,e,n,i,r,s,o,u,h,l)<=c/2},quadraticline:function(t,e,n,i,a,s,o,u,c){return r.pointDistance(t,e,n,i,a,s,u,c)<=o/2},arcline:function(t,e,n,i,r,a,o,u,c){return s.pointDistance(t,e,n,i,r,a,u,c)<=o/2},rect:function(t,e,n,i,r,a){return r>=t&&t+n>=r&&a>=e&&e+i>=a},circle:function(t,e,n,i,r){return Math.pow(i-t,2)+Math.pow(r-e,2)<=Math.pow(n,2)},box:function(t,e,n,i,r,a){return r>=t&&e>=r&&a>=n&&i>=a}}},function(t,e,n){"use strict";var i=n(3),r=n(27),a=n(2),s=n(5),o=a.Vector3,u=function c(t){c.superclass.constructor.call(this,t)};i.extend(u,r),i.augment(u,{isShape:!0,createPath:function(){},drawInner:function(){var t=this,e=t.get("context");t.createPath(),t.hasFill()&&e.fill(),t.hasStroke()&&e.stroke()},isPointInPath:function(t,e){return!1},isHit:function(t,e){var n=this,i=n.get("canvas"),r=new o(t,e,1);n.invert(r,i);var a=n.getBBox();if(a&&s.box(a.minX,a.maxX,a.minY,a.maxY,r.x,r.y)){var u=n.__attrs.clip;if(!u)return n.isPointInPath(r.x,r.y);if(u.inside(t,e))return n.isPointInPath(r.x,r.y)}return!1},getBBox:function(){return this.get("box")}}),t.exports=u},function(t,e,n){"use strict";var i=n(8),r={Canvas:n(73),Group:n(28),Shape:n(6),Rect:n(88),Circle:n(77),Ellipse:n(79),Path:n(84),Text:n(89),Line:n(82),Image:n(81),Polygon:n(85),Polyline:n(86),Arc:n(76),Fan:n(80),Cubic:n(78),Quadratic:n(87),debug:function(t){i.debug=t}};t.exports=r},function(t,e){"use strict";var n={prefix:"g",backupContext:function(){return document.createElement("canvas").getContext("2d")}(),debug:!1,warn:function(t){}};t.exports=n},function(t,e,n){"use strict";var i=n(32);t.exports=i},function(t,e,n){"use strict";var i=n(7),r=n(1),a=i.Shape.superclass.constructor,s=document.createElement("table"),o=document.createElement("tr"),u=/^\s*<(\w+|!)[^>]*>/,c={tr:document.createElement("tbody"),tbody:s,thead:s,tfoot:s,td:o,th:o,"*":document.createElement("div")};r.mix(r,{getBoundingClientRect:function(t){var e=t.getBoundingClientRect(),n=document.documentElement.clientTop,i=document.documentElement.clientLeft;return{top:e.top-n,bottom:e.bottom-n,left:e.left-i,right:e.right-i}},upperFirst:function(t){return t.replace(/(\w)/,function(t){return t.toUpperCase()})},getStyle:function(t,e){return window.getComputedStyle?window.getComputedStyle(t,null)[e]:t.currentStyle[e]},modiCSS:function(t,e){var n;for(n in e)t.style[n]=e[n];return t},getRatio:function(){return window.devicePixelRatio?window.devicePixelRatio:1},initClassCfgs:function(t){if(!t.__cfg&&t!==a){var e=t.superclass.constructor;e&&!e.__cfg&&r.initClassCfgs(e),t.__cfg={},r.mix(!0,t.__cfg,e.__cfg),r.mix(!0,t.__cfg,t.CFG)}},mixin:function(t,e){var n=t.CFG?"CFG":"ATTRS";if(t&&e){t._mixins=e,t[n]=t[n]||{};var i={};r.each(e,function(e){r.augment(t,e);var a=e[n];a&&r.mix(i,a)}),t[n]=r.mix(i,t[n])}},createDom:function(t){var e=u.test(t)&&RegExp.$1;e in c||(e="*");var n=c[e];return t=t.replace(/(^\s*)|(\s*$)/g,""),n.innerHTML=""+t,n.childNodes[0]}}),t.exports=r},function(t,e,n){"use strict";var i=n(7),r=n(1),a=i.Shape.superclass.constructor,s=document.createElement("table"),o=document.createElement("tr"),u=/^\s*<(\w+|!)[^>]*>/,c={tr:document.createElement("tbody"),tbody:s,thead:s,tfoot:s,td:o,th:o,"*":document.createElement("div")};r.mix(r,{getBoundingClientRect:function(t){var e=t.getBoundingClientRect(),n=document.documentElement.clientTop,i=document.documentElement.clientLeft;return{top:e.top-n,bottom:e.bottom-n,left:e.left-i,right:e.right-i}},upperFirst:function(t){return t.replace(/(\w)/,function(t){return t.toUpperCase()})},getStyle:function(t,e){return window.getComputedStyle?window.getComputedStyle(t,null)[e]:t.currentStyle[e]},modiCSS:function(t,e){var n;for(n in e)t.style[n]=e[n];return t},getRatio:function(){return window.devicePixelRatio?window.devicePixelRatio:1},initClassCfgs:function(t){if(!t.__cfg&&t!==a){var e=t.superclass.constructor;e&&!e.__cfg&&r.initClassCfgs(e),t.__cfg={},r.mix(!0,t.__cfg,e.__cfg),r.mix(!0,t.__cfg,t.CFG)}},mixin:function(t,e){var n=t.CFG?"CFG":"ATTRS";if(t&&e){t._mixins=e,t[n]=t[n]||{};var i={};r.each(e,function(e){r.augment(t,e);var a=e[n];a&&r.mix(i,a)}),t[n]=r.mix(i,t[n])}},createDom:function(t){var e=u.test(t)&&RegExp.$1;e in c||(e="*");var n=c[e];return t=t.replace(/(^\s*)|(\s*$)/g,""),n.innerHTML=""+t,n.childNodes[0]}}),t.exports=r},function(t,e,n){"use strict";t.exports=n(39)},function(t,e,n){"use strict";function i(t,e,n,i){s(t,a(e,n,i))}function r(t,e,n){var i=n/Math.sin(c);return t.setLength(i/2),e.sub(t),e}function a(t,e,n){var i=new u(1,0).angleTo(t),r=i-c,a=i+c,s=6+3*n;return[{x:e.x-s*Math.cos(r),y:e.y-s*Math.sin(r)},e,{x:e.x-s*Math.cos(a),y:e.y-s*Math.sin(a)}]}function s(t,e){t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y),t.lineTo(e[2].x,e[2].y)}var o=n(2),u=(n(4),n(1),o.Vector2),c=Math.PI/6;t.exports={makeArrow:i,getEndPoint:r}},function(t,e,n){"use strict";function i(t,e){if(a.isNumeric(t)&&a.isNumeric(e))return s.number(t,e);if(a.isString(t)&&a.isString(e)){var n=new u(t),i=new u(e);if(n.getType()&&i.getType())return o.color(n,i)}}function r(t,e){if(a.isNumeric(t)&&a.isNumeric(e))return s.unNumber(t,e);if(a.isString(t)&&a.isString(e)){var n=new u(t),i=new u(e);if(n.getType()&&i.getType())return o.unColor(n,i)}}var a=n(1),s=n(50),o=n(47),u=n(12);t.exports={singular:i,unSingular:r}},function(t,e,n){"use strict";var i=n(33),r=n(21);i.G=n(7),i.Util=n(10),i.Group=r.GroupBase,t.exports=i},function(t,e,n){"use strict";var i=n(1),r=n(45),a=n(63);n(62);i.mix(i,{getFrame:function(t,e,n){var a,s,o,u={attrs:{},matrix:e.matrix};for(o in n.attrs)e.attrs[o]!=n.attrs[o]&&("path"===o?u.attrs[o]=i.pathInterpolation(t,e.attrs[o],n.attrs[o]):(s=r.interpolation(e.attrs[o],n.attrs[o]),u.attrs[o]=s(t)));return n.matrix&&e.matrix&&(a=e.matrix.clone(),"matrix3"===n.matrix.type&&(s=r.interpolation(e.matrix,n.matrix),u.matrix=s(t)),i.isObject(n.matrix)&&(n.matrix.r&&(u.matrix=a.rotate(n.matrix.r*t)),n.matrix.t&&(u.matrix=a.translate(n.matrix.t[0]*t,n.matrix.t[1]*t)),n.matrix.s&&(u.matrix=a.scale(n.matrix.s[0]*t,n.matrix.s[1]*t)),n.matrix.p&&(u.matrix=a.translate(n.matrix.p[0]*t,n.matrix.p[1](n.matrix.p[0]*t))),n.matrix.f&&(u.matrix=n.matrix.f(a,t)))),u},pathInterpolation:function(t,e,n){var s,o,u,c,h=[];e=a.parsePathString(e),n=a.parsePathString(n);for(var l=0;l<e.length;l++){o=e[l],u=n[l],s=[];for(var f=0;f<o.length;f++)i.isNumeric(o[f])?(c=r.interpolation(o[f],u[f]),s.push(c(t))):s.push(o[f]);h.push(s)}return h},getKeyFrameByProps:function(t,e){var n=[],r=i.props2frame(t,e),a={attrs:i.getTargetAttrs(t,r.attrs),matrix:t.getMatrix().clone()};return n[0]=a,n[1]=r,n},props2frame:function(t,e){var n,i={matrix:null,attrs:{}};for(n in e)"matrix"===n?i.matrix=e[n]:"duration"!==n&&(i.attrs[n]=e[n]);return i},getTargetAttrs:function(t,e){var n,i={};for(n in e)i[n]=t.attr(n);return i},cloneFrame:function(t){var e={attrs:{},matrix:null};return i.mix(e.attrs,t.attrs),e.matrix=t.matrix.clone(),e}}),t.exports=i},function(t,e,n){"use strict";function i(t,e,n,i){return{x:Math.cos(i)*n+t,y:Math.sin(i)*n+e}}function r(t,e,n,i){if(i){if(e>t)var r=e-t,a=2*Math.PI-n+t;else if(t>n)var r=2*Math.PI-t+e,a=t-n}else var r=t-e,a=n-t;return r>a?n:e}function a(t,e,n,i){var a=0;return n-e>=2*Math.PI&&(a=2*Math.PI),e=h.mod(e,2*Math.PI),n=h.mod(n,2*Math.PI)+a,t=h.mod(t,2*Math.PI),i?e>=n?t>n&&e>t?t:r(t,n,e,!0):e>t||t>n?t:r(t,e,n):n>=e?t>e&&n>t?t:r(t,e,n,!0):t>e||n>t?t:r(t,n,e)}function s(t,e,n,i,r,s,o,u,h){var l=new c(o,u),f=new c(t,e),g=new c(1,0),x=c.sub(l,f),v=g.angleTo(x);v=a(v,i,r,s);var d=new c(n*Math.cos(v)+t,n*Math.sin(v)+e);h&&(h.x=d.x,h.y=d.y);var p=l.distanceTo(d);return p}function o(t,e,n,r,s,o){var u=0,c=Math.PI/2,h=Math.PI,f=3*Math.PI/2,g=[],x=a(u,r,s,o);x===u&&g.push(i(t,e,n,u)),x=a(c,r,s,o),x===c&&g.push(i(t,e,n,c)),x=a(h,r,s,o),x===h&&g.push(i(t,e,n,h)),x=a(f,r,s,o),x===f&&g.push(i(t,e,n,f)),g.push(i(t,e,n,r)),g.push(i(t,e,n,s));var v=1/0,d=-(1/0),p=1/0,_=-(1/0);return l.each(g,function(t){v>t.x&&(v=t.x),d<t.x&&(d=t.x),p>t.y&&(p=t.y),_<t.y&&(_=t.y)}),{minX:v,minY:p,maxX:d,maxY:_}}var u=n(2),c=u.Vector2,h=n(4),l=n(1);t.exports={nearAngle:a,projectPoint:function(t,e,n,i,r,a,o,u){var c={};return s(t,e,n,i,r,a,o,u,c),c},pointDistance:s,box:o}},function(t,e,n){"use strict";function i(t,e,n,i,r){var a=1-r;return a*a*(a*i+3*r*n)+r*r*(r*t+3*a*e)}function r(t,e,n,i,r){var a=1-r;return 3*(((e-t)*a+2*(n-e)*r)*a+(i-n)*r*r)}function a(t,e,n,r,a,s,o,c,h,l,f){for(var g,x=.005,v=1/0,d=1e-4,p=new u(h,l),_=0;1>_;_+=.05){var m=new u(i(t,n,a,o,_),i(e,r,s,c,_)),y=m.distanceToSquared(p);v>y&&(g=_,v=y)}for(var v=1/0,S=0;32>S&&!(d>x);S++){var w=g-x,b=g+x,m=new u(i(t,n,a,o,w),i(e,r,s,c,w)),y=m.distanceToSquared(p);if(w>=0&&v>y)g=w,v=y;else{var A=new u(i(t,n,a,o,b),i(e,r,s,c,b)),M=A.distanceToSquared(p);1>=b&&v>M?(g=b,v=M):x*=.5}}return f&&(f.x=i(t,n,a,o,g),f.y=i(e,r,s,c,g)),Math.sqrt(v)}function s(t,e,n,i){var r=3*t-9*e+9*n-3*i,a=6*e-12*n+6*i,s=3*n-3*i,o=[];if(c.equal(r,0)){if(!c.equal(a,0)){var u=-s/a;u>=0&&1>=u&&o.push(u)}}else{var h=a*a-4*r*s;if(c.equal(h,0))o.push(-a/(2*r));else if(h>0){var l=Math.sqrt(h),u=(-a+l)/(2*r),f=(-a-l)/(2*r);u>=0&&1>=u&&o.push(u),f>=0&&1>=f&&o.push(f)}}return o}var o=n(2),u=o.Vector2,c=n(4);t.exports={at:i,derivativeAt:r,projectPoint:function(t,e,n,i,r,s,o,u,c,h){var l={};return a(t,e,n,i,r,s,o,u,c,h,l),l},pointDistance:a,extrema:s}},function(t,e,n){"use strict";function i(t,e,n,i){var r=1-i;return r*(r*t+2*i*e)+i*i*n}function r(t,e,n,r,a,s,o,c,h){for(var l,f=.005,g=1/0,x=1e-4,v=new u(o,c),d=0;1>d;d+=.05){var p=new u(i(t,n,a,d),i(e,r,s,d)),_=p.distanceToSquared(v);g>_&&(l=d,g=_)}for(var g=1/0,m=0;32>m&&!(x>f);m++){var y=l-f,S=l+f,p=new u(i(t,n,a,y),i(e,r,s,y)),_=p.distanceToSquared(v);if(y>=0&&g>_)l=y,g=_;else{var w=new u(i(t,n,a,S),i(e,r,s,S)),b=w.distanceToSquared(v);1>=S&&g>b?(l=S,g=b):f*=.5}}return h&&(h.x=i(t,n,a,l),h.y=i(e,r,s,l)),Math.sqrt(g)}function a(t,e,n){var i=t+n-2*e;if(o.equal(i,0))return[.5];var r=(t-e)/i;return 1>=r&&r>=0?[r]:[]}var s=n(2),o=n(4),u=s.Vector2;t.exports={at:i,projectPoint:function(t,e,n,i,a,s,o,u){var c={};return r(t,e,n,i,a,s,o,u,c),c},pointDistance:r,extrema:a}},function(t,e,n){"use strict";var i=n(10),r=n(7),a=r.Group,s=function o(t){o.superclass.constructor.call(this,t),this._beforeRenderUI(),this._renderUI(),this._bindUI()};s.CFG={},i.extend(s,a),i.augment(s,{_beforeRenderUI:function(){this._initCfg(),this._multiRatioCfg()},_renderUI:function(){},_multiRatioCfg:function(){},_initCfg:function(){},_bindUI:function(){}}),t.exports=s},function(t,e,n){"use strict";t.exports={GMixin:n(34),GroupBase:n(20),GroupMixin:n(35)}},function(t,e,n){"use strict";var i=n(36),r=n(24);i.G=n(7),i.Util=n(11),i.Group=r.GroupBase,t.exports=i},function(t,e,n){"use strict";var i=n(11),r=n(7),a=r.Group,s=function o(t){o.superclass.constructor.call(this,t),this._beforeRenderUI(),this._renderUI(),this._bindUI()};s.CFG={},i.extend(s,a),i.augment(s,{_beforeRenderUI:function(){this._initCfg(),this._multiRatioCfg()},_renderUI:function(){},_multiRatioCfg:function(){},_initCfg:function(){},_bindUI:function(){}}),t.exports=s},function(t,e,n){"use strict";t.exports={GMixin:n(37),GroupBase:n(23),GroupMixin:n(38)}},function(t,e){"use strict";var n={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-0.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-0.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-0.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-0.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n)))},easeOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*t)*Math.sin((1*t-e)*(2*Math.PI)/n)+1)},easeInOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:2==(t/=.5)?1:(n||(n=1*(.3*1.5)),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),1>t?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n)):i*Math.pow(2,-10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n)*.5+1)},easeInBack:function(t){var e=1.70158;return 1*(t/=1)*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return 1*((t=t/1-1)*t*((e+1)*t+e)+1)},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:function(t){return 1-n.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?1*(7.5625*t*t):2/2.75>t?1*(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return.5>t?.5*n.easeInBounce(2*t):.5*n.easeOutBounce(2*t-1)+.5}};t.exports=n},function(t,e,n){"use strict";var i=n(9),r=n(16),a=n(25),s=function o(t){o.superclass.constructor.call(this,t),this._init()};r.extend(s,i),s.ATTRS={type:"tween",canvas:null,target:null,easing:"linear",startTime:null,endTime:null,duration:null,ratio:0,delay:0,needsDestroy:!1,available:!0,callBack:null,currentFrame:null,startKeyFrame:{attrs:null,matrix:null},endKeyFrame:{attrs:null,matrix:null}},r.augment(s,{_init:function(){var t=this.get("delay"),e=this.get("startTime"),n=this.get("duration");this.set("endTime",e+t+n)},_autoSetStartKeyFrame:function(){var t=this.get("target"),e=this.get("endKeyFrame"),n=r.mix({},r.getTargetAttrs(t,e.attrs)),i=t.getMatrix().clone();this.set("startKeyFrame",{attrs:n,matrix:i})},tryStep:function(t){var e=this.get("startTime"),n=this.get("delay"),i=(this.get("duration"),this.get("startKeyFrame")),r=e+n;return t>=r?(i.attrs||i.matrix||this._autoSetStartKeyFrame(),void this.step(t)):!1},step:function(t){var e,n,i=this.get("target"),s=this.get("startTime"),o=this.get("delay"),u=t-s+o,c=this.get("duration"),h=this.get("startKeyFrame"),l=this.get("endKeyFrame"),f=this.get("easing");n=u/c,n=0>=n?0:n>=1?1:n,n=a[f](n),e=r.getFrame(n,h,l),i.attr(e.attrs),i.setMatrix(e.matrix),this.set("ratio",n),this.set("currentFrame",e),this.updateStatus()},updateStatus:function(){var t=this.get("ratio"),e=this.get("callBack"),n=this.get("target");t>=1&&(this.set("needsDestroy",!0),e&&e(n))},reset:function(){this.set("ratio",0),this.set("needsDestroy",!1)},play:function(){var t=this,e=t.get("target"),n=e.get("canvas"),i=t.get("available"),a=t.get("ratio"),s=t.get("callBack"),o=+new Date;t.step(o),n.draw(),r.requestAnimationFrame(function(){return i?a>=1?(s&&s(),void t.destroy()):void(a>=0&&t.play()):void 0})},animate:function(t,e,n,i,a){var s=r.getKeyFrameByProps(t,e);this.set("target",t),this.set("startTime",+new Date),this.set("duration",n),this.set("startKeyFrame",s[0]),this.set("endKeyFrame",s[1]),this.set("easing",i),this.set("callBack",a),this.play()}}),t.exports=s},function(t,e,n){"use strict";var i=n(3),r=n(8),a=n(69),s=n(75),o=n(74),u=function c(t){this.__cfg={};var e=this.getDefaultCfg();i.mix(this.__cfg,c.CFG,e,t),this.__cfg.uuid=i.guid(r.prefix),this.initAttrs(this.__cfg.attrs),this.initTransform(),this.initEventDispatcher(),this.init()};u.CFG={id:null,zIndex:0,canvas:null,parent:null,capture:!0,context:null,visible:!0,destroyed:!1},i.augment(u,a,s,o,{init:function(){},getDefaultCfg:function(){return{}},set:function(t,e){var n=this,r="__set"+i.ucfirst(t);return n[r]&&(e=n[r](e)),n.__cfg[t]=e,this},get:function(t){return this.__cfg[t]},beforeDraw:function(){},draw:function(){var t=this,e=t.get("context"),n=t.__attrs.clip;t.beforeDraw(),t.get("visible")&&(e.save(),n&&(e.save(),n.resetTransform(),n.createPath(),e.restore(),e.clip()),t.resetAttrs(),t.resetTransform(),t.drawInner(),e.restore())},drawInner:function(){},show:function(){return this.set("visible",!0),this},hide:function(){return this.set("visible",!1),this},remove:function(t){var e=this;if(void 0===t&&(t=!0),e.get("parent")){var n=e.get("parent"),r=n.get("children");i.remove(r,e),e.set("parent",null)}return t&&e.destroy(),e},destroy:function(){var t=this,e=t.get("destroyed");return e?void 0:(t.__cfg={},t.__attrs=null,t.__listeners=null,t.__m=null,t.set("destroyed",!0),t)},__setZIndex:function(t){var e=this;return this.__cfg.zIndex=t,i.notNull(e.get("parent"))&&e.get("parent").sort(),t},__setAttrs:function(t){var e=this;return e.attr(t),t},clone:function(){return i.clone(this)},getBBox:function(){return{minX:0,maxX:0,minY:0,maxY:0}}}),t.exports=u},function(t,e,n){"use strict";function i(t){i.superclass.constructor.call(this,t),this.set("children",[])}var r=n(3),a=n(27),s=(n(5),n(2)),o=s.Vector3;r.extend(i,a),r.augment(i,{isGroup:!0,canFill:!0,canStroke:!0,remove:function(t,e){var n=this;if(arguments.length>=2)n.contain(t)&&t.remove(e);else{if(1===arguments.length){if(!r.isBoolean(t))return n.contain(t)&&t.remove(!0),n;e=t}0===arguments.length&&(e=!0),i.superclass.remove.call(n,e)}return n},add:function(t){var e=this,n=e.get("children");if(r.isArray(t))r.each(t,function(t){t.get("parent")&&t.get("parent").remove(t,!1),e.__setEvn(t)}),n.push.apply(n,t);else{var i=t;i.get("parent")&&i.get("parent").remove(i,!1),e.__setEvn(i),n.push(i)}return e},contain:function(t){for(var e=this,n=e.get("children"),i=0,r=n.length;r>i;i++)if(n[i]===t)return!0;return!1},__setEvn:function(t){var e=this;t.set("parent",e),t.set("context",e.get("context"));var n=t.__attrs.clip;n&&(n.set("parent",e),n.set("context",e.get("context"))),t.set("canvas",e.get("canvas")),r.each(t.get("children"),function(e){t.__setEvn(e)})},getBBox:function(){var t=this,e=1/0,n=-(1/0),i=1/0,a=-(1/0),s=t.get("children");return r.each(s,function(t){if(t.get("visible")){var r=t.getBBox("box");if(!r)return!0;var s=new o(r.minX,r.minY,1),u=new o(r.minX,r.maxY,1),c=new o(r.maxX,r.minY,1),h=new o(r.maxX,r.maxY,1);t.apply(s),t.apply(u),t.apply(c),t.apply(h);var l=Math.min(s.x,u.x,c.x,h.x),f=Math.max(s.x,u.x,c.x,h.x),g=Math.min(s.y,u.y,c.y,h.y),x=Math.max(s.y,u.y,c.y,h.y);e>l&&(e=l),f>n&&(n=f),i>g&&(i=g),x>a&&(a=x)}}),{minX:e,minY:i,maxX:n,maxY:a}},drawInner:function(){var t=this,e=t.get("children");return r.each(e,function(t){t.draw()}),t},getCount:function(){var t=this;return t.get("children").length},sort:function(){var t=this,e=t.get("children");return e.sort(function(t,e){return t.get("zIndex")-e.get("zIndex")}),t},find:function(t){var e=this;return e.findBy(function(e){return e.get("id")===t})},findBy:function(t){var e=this,n=e.get("children"),i=null;return r.each(n,function(e){return t(e)?i=e:e.findBy&&(i=e.findBy(t)),i?!1:void 0}),i},getShape:function(t,e){function n(){for(var n=s.length-1;n>=0;n--){var r=s[n];if(r.get("visible")&&r.get("capture")&&(r.isGroup?i=r.getShape(t,e):r.isHit(t,e)&&(i=r)),i)break}}var i,r=this,a=r.__attrs.clip,s=r.get("children");return a?a.inside(t,e)&&n():n(),i},clear:function(){for(var t=this,e=t.get("children");0!==e.length;)e[e.length-1].remove();return t},destroy:function(){var t=this;t.get("destroyed")||(t.clear(),i.superclass.destroy.call(t))}}),t.exports=i},function(t,e,n){"use strict";function i(t,e,n){var i=g.exec(t),r=c.mod(c.degreeToRad(parseFloat(i[1])),2*Math.PI),a=i[2],o=e.getBBox();if(r>=0&&r<.5*Math.PI)var u={x:o.minX,y:o.minY},h={x:o.maxX,y:o.maxY};else if(.5*Math.PI<=r&&r<Math.PI)var u={x:o.maxX,y:o.minY},h={x:o.minX,y:o.maxY};else if(Math.PI<=r&&r<1.5*Math.PI)var u={x:o.maxX,y:o.maxY},h={x:o.minX,y:o.minY};else var u={x:o.minX,y:o.maxY},h={x:o.maxX,y:o.minY};var l=Math.tan(r),f=l*l,x=(h.x-u.x+l*(h.y-u.y))/(f+1)+u.x,v=l*(h.x-u.x+l*(h.y-u.y))/(f+1)+u.y,d=e.get("context"),p=d.createLinearGradient(u.x,u.y,x,v);return s(a,p,n),p}function r(t,e,n){var i=x.exec(t),r=parseFloat(i[1]),a=parseFloat(i[2]),o=parseFloat(i[3]),u=i[4],c=e.getBBox(),h=e.get("context"),l=c.maxX-c.minX,f=c.maxY-c.minY,g=Math.sqrt(l*l+f*f)/2,v=h.createRadialGradient(c.minX+l*r,c.minY+f*a,o,c.minX+l/2,c.minY+f/2,g);return s(u,v,n),v}function a(t,e){var n=v.exec(t),i=n[1],r=n[2];switch(i){case"a":i="repeat";break;case"x":i="repeat-x";break;case"y":i="repeat-y";break;case"n":i="no-repeat";break;default:i="no-repeat"}var a=document.getElementById(r),s=e.get("context"),o=s.createPattern(a,i);return o}function s(t,e,n){var i=t.match(d);u.each(i,function(t){t=t.split(":");var i=o(t[1],n);e.addColorStop(t[0],i)})}function o(t,e){if(void 0===e)return t;t=new h(t),t.multiplyA(e);var n=t.getType();return"hsl"===n?t.getHSLStyle():"rgb"===n?t.getRGBStyle():void 0}var u=n(3),c=n(4),h=n(12),l=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,f=/[^\s\,]+/gi,g=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,x=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,v=/^p\s*([axyn])\s+(.*)/i,d=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,p={parsePath:function(t){return t=t||[],u.isArray(t)?t:u.isString(t)?(t=t.match(l),u.each(t,function(e,n){if(e=e.match(f),e[0].length>1){var i=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=i}u.each(e,function(t,n){isNaN(t)||(e[n]=+t)}),t[n]=e}),t):void 0},parseStyle:function(t,e,n){return u.isString(t)?g.test(t)?i(t,e,n):x.test(t)?r(t,e,n):v.test(t)?a(t,e):o(t,n):void 0}};t.exports=p},function(t,e,n){"use strict";var i=n(2),r=i.Vector2;t.exports={at:function(t,e,n){return(e-t)*n+t},pointDistance:function(t,e,n,i,a,s){var o=new r(n-t,i-e);if(o.isZero())return NaN;var u=o.vertical();u.normalize();var c=new r(a-t,s-e);return Math.abs(c.dot(u))},box:function(t,e,n,i,r){var a=r/2,s=Math.min(t,n),o=Math.max(t,n),u=Math.min(e,i),c=Math.max(e,i);return{minX:s-a,minY:u-a,maxX:o+a,maxY:c+a}}}},function(t,e,n){"use strict";window.GradientPalette=n(91),window.Canvas=n(22),window.G=n(22).G,window.Tween=n(61),window.Util=n(1)},function(t,e,n){"use strict";function i(t){if(!t._attrs&&t!==r){var e=t.superclass.constructor;e&&!e._attrs&&i(e),t._attrs={},a.mix(!0,t._attrs,e._attrs),a.mix(!0,t._attrs,t.ATTRS)}}var r,a=n(1);r=function(t){i(this.constructor),this._attrs={},this.events={};var e=this.getDefaultCfg();a.mix(this._attrs,e,t)},a.augment(r,{getDefaultCfg:function(){var t=this,e=t.constructor,n=e._attrs,i=a.mix(!0,{},n);return i},set:function(t,e){var n="_onRender"+a.ucfirst(t);return this[n]&&this[n](e,this._attrs[t]),this._attrs[t]=e,this},get:function(t){return this._attrs[t]},on:function(t,e){var n=this,i=n.events,r=i[t];return r||(r=i[t]=[]),r.push(e),n},fire:function(t,e){var n=this,i=n.events,r=i[t];r&&a.each(r,function(t){t(e)})},off:function(t,e){var n=this,i=n.events,r=i[t];return t?(r&&a.remove(r,e),n):(n.events={},n)},destroy:function(){var t=this,e=t.destroyed;return e?t:(t._attrs={},t.events={},void(t.destroyed=!0))}}),t.exports=r},function(t,e,n){"use strict";var i=n(10),r=n(7),a=r.Shape.superclass.constructor,s=r.Canvas,o=n(21);i.mixin(a,[o.GMixin]),i.mixin(r.Group,[o.GroupMixin]);var u=function c(t){c.superclass.constructor.call(this,t)};u.CFG={width:null,height:null,widthCanvas:null,heightCanvas:null,widthStyle:null,heightStyle:null,containerDOM:null,canvasDOM:null,pixelRatio:null},i.extend(u,s),i.augment(u,{init:function(){u.superclass.constructor.superclass.init.call(this),this._setGlobalParam(),this._setDOM(),this._setInitSize(),this._setCanvas()},_setCanvas:function(){var t=this.get("canvasDOM");this.set("el",t),this.set("context",t.getContext("2d")),this.set("canvas",this),this.__events()},_setGlobalParam:function(){var t=this.get("pixelRatio");t||this.set("pixelRatio",i.getRatio())},_setDOM:function(){this._setContainer(),this._setLayer()},_setContainer:function(){var t=this.get("containerId"),e=document.getElementById(t);i.modiCSS(e,{position:"relative"}),this.set("containerDOM",e)},_setLayer:function(){var t=this.get("containerDOM"),e=i.guid("canvas_");if(t){var n=i.createDom('<canvas id="'+e+'"></canvas>');t.appendChild(n),this.set("canvasDOM",n)}},_setInitSize:function(){this.get("widthStyle")?this.changeSizeByCss(this.get("widthStyle"),this.get("heightStyle")):this.get("width")&&this.changeSize(this.get("width"),this.get("height"))},_getPx:function(t,e){var n=this.get("canvasDOM");n.style[t]=e;var r=i.getBoundingClientRect(n);return"width"===t?r.right-r.left:"height"===t?r.bottom-r.top:void 0},_reSize:function(){var t=this.get("canvasDOM"),e=this.get("widthCanvas"),n=this.get("heightCanvas"),i=this.get("widthStyle"),r=this.get("heightStyle");t.style.width=i,t.style.height=r,t.setAttribute("width",e),t.setAttribute("height",n)},getWidth:function(){var t=this.get("pixelRatio"),e=this.get("width");return e*t},getHeight:function(){var t=this.get("pixelRatio"),e=this.get("height");return e*t},changeSizeByCss:function(t,e){var n=this.get("pixelRatio"),t=this._getPx("width",t),e=this._getPx("height",e),i=t*n,r=e*n;this.set("widthStyle",t),this.set("heightStyle",e),this.set("widthCanvas",i),this.set("heightCanvas",r),this.set("width",t),this.set("height",e),this._reSize()},changeSize:function(t,e){var n=this.get("pixelRatio"),i=t*n,r=e*n;this.set("widthCanvas",i),this.set("heightCanvas",r),this.set("widthStyle",t+"px"),this.set("heightStyle",e+"px"),this.set("width",t),this.set("height",e),this._reSize()}}),t.exports=u},function(t,e,n){"use strict";var i=n(10),r=(n(7),function(){});i.augment(r,{getParent:function(){return this.get("parent")||this.get("father")},getDefaultCfg:function(){i.initClassCfgs(this.constructor);var t=i.mix(!0,{},this.constructor.__cfg);return t},getBBBox:function(){var t=this.getBBox();return t?(t.x=t.minX,t.y=t.minY,t.width=t.maxX-t.minX,t.height=t.maxY-t.minY,t.centerX=t.x+t.width/2,t.centerY=t.y+t.height/2):t={x:0,y:0,centerX:0,centerY:0,width:0,height:0},t},move:function(t,e){var n=this,i=n.get("x")||0,r=n.get("y")||0;n.translate(t-i,e-r),n.set("x",t),n.set("y",e)}}),t.exports=r},function(t,e,n){"use strict";var i=n(10),r=n(7),a=n(20),s=function(){};i.augment(s,{addShape:function(t,e){var n,a=this.get("canvas");return e=i.mix({},e),e?(e.type=t,e.canvas=a,e.father=this,t=i.upperFirst(t),n=new r[t](e)):n=new r[t],this.add(n),n},addGroup:function(t,e){var n,r=this.get("canvas");if(e=i.mix({},e),i.isFunction(t))e?(e.canvas=r,e.father=this,n=new t(e)):n=new t({canvas:r,father:this}),this.add(n);else if(i.isObject(t))t.canvas=r,n=new a(t),this.add(n);else{if(void 0!==t)return!1;n=new a,this.add(n)}return n},findByCFG:function(t,e){var n=this.get("children"),r=[];return i.each(n,function(n,i){n.get(t)===e&&r.push(n)}),r}}),t.exports=s},function(t,e,n){"use strict";var i=n(11),r=n(7),a=r.Shape.superclass.constructor,s=r.Canvas,o=n(24);i.mixin(a,[o.GMixin]),i.mixin(r.Group,[o.GroupMixin]);var u=function c(t){c.superclass.constructor.call(this,t)};u.CFG={width:null,height:null,widthCanvas:null,heightCanvas:null,widthStyle:null,heightStyle:null,containerDOM:null,canvasDOM:null,pixelRatio:null},i.extend(u,s),i.augment(u,{init:function(){u.superclass.constructor.superclass.init.call(this),this._setGlobalParam(),this._setDOM(),this._setInitSize(),this._setCanvas(),this._scale()},_scale:function(){var t=this.get("pixelRatio");this.scale(t,t)},_setCanvas:function(){var t=this.get("canvasDOM");this.set("el",t),this.set("context",t.getContext("2d")),this.set("canvas",this),this.__events()},_setGlobalParam:function(){var t=this.get("pixelRatio");t||this.set("pixelRatio",i.getRatio())},_setDOM:function(){this._setContainer(),this._setLayer()},_setContainer:function(){var t=this.get("containerId"),e=document.getElementById(t);i.modiCSS(e,{position:"relative"}),this.set("containerDOM",e)},_setLayer:function(){var t=this.get("containerDOM"),e=i.guid("canvas_");if(t){var n=i.createDom('<canvas id="'+e+'"></canvas>');t.appendChild(n),this.set("canvasDOM",n)}},_setInitSize:function(){this.get("widthStyle")?this.changeSizeByCss(this.get("widthStyle"),this.get("heightStyle")):this.get("width")&&this.changeSize(this.get("width"),this.get("height"))},_getPx:function(t,e){var n=this.get("canvasDOM");n.style[t]=e;var r=i.getBoundingClientRect(n);return"width"===t?r.right-r.left:"height"===t?r.bottom-r.top:void 0},_reSize:function(){var t=this.get("canvasDOM"),e=this.get("widthCanvas"),n=this.get("heightCanvas"),i=this.get("widthStyle"),r=this.get("heightStyle");t.style.width=i,t.style.height=r,t.setAttribute("width",e),t.setAttribute("height",n)},getWidth:function(){var t=this.get("pixelRatio"),e=this.get("width");return e*t},getHeight:function(){var t=this.get("pixelRatio"),e=this.get("height");return e*t},changeSizeByCss:function(t,e){var n=this.get("pixelRatio"),t=this._getPx("width",t),e=this._getPx("height",e),i=t*n,r=e*n;this.set("widthStyle",t),this.set("heightStyle",e),this.set("widthCanvas",i),this.set("heightCanvas",r),this.set("width",t),this.set("height",e),this._reSize()},changeSize:function(t,e){var n=this.get("pixelRatio"),i=t*n,r=e*n;this.set("widthCanvas",i),this.set("heightCanvas",r),this.set("widthStyle",t+"px"),this.set("heightStyle",e+"px"),this.set("width",t),this.set("height",e),this._reSize()}}),t.exports=u},function(t,e,n){"use strict";var i=n(11),r=(n(7),function(){});i.augment(r,{getParent:function(){return this.get("parent")||this.get("father")},getDefaultCfg:function(){i.initClassCfgs(this.constructor);var t=i.mix(!0,{},this.constructor.__cfg);return t},getBBBox:function(){var t=this.getBBox();return t?(t.x=t.minX,t.y=t.minY,t.width=t.maxX-t.minX,t.height=t.maxY-t.minY,t.centerX=t.x+t.width/2,t.centerY=t.y+t.height/2):t={x:0,y:0,centerX:0,centerY:0,width:0,height:0},t},move:function(t,e){var n=this,i=n.get("x")||0,r=n.get("y")||0;n.translate(t-i,e-r),n.set("x",t),n.set("y",e)}}),t.exports=r},function(t,e,n){"use strict";var i=n(11),r=n(7),a=n(23),s=function(){};i.augment(s,{addShape:function(t,e){var n,a=this.get("canvas");return e=i.mix({},e),e?(e.type=t,e.canvas=a,e.father=this,t=i.upperFirst(t),n=new r[t](e)):n=new r[t],this.add(n),n},addGroup:function(t,e){var n,r=this.get("canvas");if(e=i.mix({},e),i.isFunction(t))e?(e.canvas=r,e.father=this,n=new t(e)):n=new t({canvas:r,father:this}),this.add(n);else if(i.isObject(t))t.canvas=r,n=new a(t),this.add(n);else{if(void 0!==t)return!1;n=new a,this.add(n)}return n},findByCFG:function(t,e){var n=this.get("children"),r=[];return i.each(n,function(n,i){n.get(t)===e&&r.push(n)}),r}}),t.exports=s},function(t,e,n){"use strict";function i(t){this.space={},r.isString(t)?this.setStyle(t):t instanceof i&&this.copy(t)}var r=n(1),a=(n(4),n(41)),s=n(42),o=n(40),u={
hex:/^#([A-Fa-f0-9]{3}|[A-Fa-f0-9]{6})$/,space:/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)$/,rgbNum:/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*$/,rgbaNum:/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([0-9]*\.?[0-9]+)\s*$/,rgbPre:/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*$/,rgbaPre:/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*([0-9]*\.?[0-9]+)\s*$/,hsl:/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*$/,hsla:/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*([0-9]*\.?[0-9]+)\s*$/};r.augment(i,{getType:function(){return this.space.type},toRGB:function(){var t=this.space;if("rgb"!==t.type){var e=t.toRGB();this.setRGB(e.r,e.g,e.b,e.a)}},toHSL:function(){var t=this.space;if("hsl"!==t.type){var e=t.toHSL();this.setHSL(e.h,e.s,e.l,e.a)}},getR:function(){return this.toRGB(),this.space.r},getG:function(){return this.toRGB(),this.space.g},getB:function(){return this.toRGB(),this.space.b},getH:function(){return this.toHSL(),this.space.h},getS:function(){return this.toHSL(),this.space.s},getL:function(){return this.toHSL(),this.space.l},getA:function(){return this.space.a},multiplyA:function(t){return void 0===t?this:(void 0===this.space.a&&(this.space.a=1),this.space.a*=t,this)},getRGBStyle:function(){return this.toRGB(),this.space.getStyle()},getRGBPreStyle:function(){return this.toRGB(),this.space.getPreStyle()},getHSLStyle:function(){return this.toHSL(),this.space.getStyle()},getHex:function(){return this.toRGB(),this.space.getHex()},setRGB:function(t,e,n,i){return this.space=new s,this.space.setRGB(t,e,n,i),this},setHSL:function(t,e,n,i){return this.space=new a,this.space.setHSL(t,e,n,i),this},setHex:function(t){return this.space=new s,t=Math.floor(t),this.space.r=(t>>16&255)/255,this.space.g=(t>>8&255)/255,this.space.b=(255&t)/255,this},setStyle:function(t){var e;if(e=u.hex.exec(t)){var n=e[1],i=n.length;if(3===i)return this.setRGB(parseInt(n.charAt(0)+n.charAt(0),16)/255,parseInt(n.charAt(1)+n.charAt(1),16)/255,parseInt(n.charAt(2)+n.charAt(2),16)/255),this;if(6===i)return this.setRGB(parseInt(n.charAt(0)+n.charAt(1),16)/255,parseInt(n.charAt(2)+n.charAt(3),16)/255,parseInt(n.charAt(4)+n.charAt(5),16)/255),this}else if(e=u.space.exec(t)){var r,a=e[1],s=e[2];switch(a){case"rgb":if(r=u.rgbNum.exec(s))return this.setRGB(parseInt(r[1],10)/255,parseInt(r[2],10)/255,parseInt(r[3],10)/255),this;if(r=u.rgbPre.exec(s))return this.setRGB(parseInt(r[1],10)/100,parseInt(r[2],10)/100,parseInt(r[3],10)/100),this;break;case"rgba":if(r=u.rgbaNum.exec(s))return this.setRGB(parseInt(r[1],10)/255,parseInt(r[2],10)/255,parseInt(r[3],10)/255,parseFloat(r[4])),this;if(r=u.rgbaPre.exec(s))return this.setRGB(parseInt(r[1],10)/100,parseInt(r[2],10)/100,parseInt(r[3],10)/100,parseFloat(r[4])),this;break;case"hsl":if(r=u.hsl.exec(s))return this.setHSL(parseInt(r[1],10)/360,parseInt(r[2],10)/100,parseInt(r[3],10)/100),this;break;case"hsla":if(r=u.hsla.exec(s))return this.setHSL(parseInt(r[1],10)/360,parseInt(r[2],10)/100,parseInt(r[3],10)/100,parseFloat(r[4])),this}}else t=t.toLowerCase(),void 0!==o[t]?this.setHex(o[t]):this.setHex(o.black)},copy:function(t){this.space=t.space.clone()},clone:function(){return new i(this)}}),t.exports=i},function(t,e){"use strict";t.exports={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074}},function(t,e,n){"use strict";var i=n(1),r=n(4),a=function(){this.h=0,this.s=0,this.l=0};i.augment(a,{type:"hsl",setHSL:function(t,e,n,i){this.h=r.mod(t,1),this.s=r.clamp(e,0,1),this.l=r.clamp(n,0,1),void 0!==i?this.a=r.clamp(i,0,1):this.a=void 0},toRGB:function(){function t(t,e,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?t+6*(e-t)*n:.5>n?e:2/3>n?t+6*(e-t)*(2/3-n):t}return function(){var e=this,n=e.h,i=e.s,r=e.l;if(0===i)return{r:r,g:r,b:r,a:e.a};var a=.5>=r?r*(1+i):r+i-r*i,s=2*r-a;return{r:t(s,a,n+1/3),g:t(s,a,n),b:t(s,a,n-1/3),a:e.a}}}(),clone:function(){var t=new a;return t.h=this.h,t.s=this.s,t.l=this.l,t.a=this.a,t},copy:function(t){return this.h=t.h,this.s=t.s,this.l=t.l,this.a=t.a,this},getStyle:function(){var t=this;return void 0===t.a?"hsl("+Math.round(360*t.h)+", "+Math.round(100*t.s)+"%, "+Math.round(100*t.l)+"%)":"hsla("+Math.round(360*t.h)+", "+Math.round(100*t.s)+"%, "+Math.round(100*t.l)+"%, "+t.a+")"}}),t.exports=a},function(t,e,n){"use strict";var i=n(1),r=n(4),a=function(){this.r=0,this.g=0,this.b=0,this.type="rgb"};i.augment(a,{type:"rgb",setRGB:function(t,e,n,i){this.r=r.clamp(t,0,1),this.g=r.clamp(e,0,1),this.b=r.clamp(n,0,1),void 0!==i?this.a=r.clamp(i,0,1):this.a=void 0},toHSL:function(){var t,e,n=this.r,i=this.g,r=this.b,a=Math.max(n,i,r),s=Math.min(n,i,r),o=(s+a)/2;if(s===a)t=0,e=0;else{var u=a-s;switch(e=.5>=o?u/(a+s):u/(2-a-s),a){case n:t=(i-r)/u+(r>i?6:0);break;case i:t=(r-n)/u+2;break;case r:t=(n-i)/u+4}t/=6}return{h:t,s:e,l:o,a:this.a}},getHex:function(){var t=255*this.r<<16^255*this.g<<8^255*this.b<<0;return"#"+("000000"+t.toString(16)).slice(-6)},getStyle:function(){return void 0===this.a?"rgb("+Math.round(255*this.r).toString()+", "+Math.round(255*this.g).toString()+", "+Math.round(255*this.b).toString()+")":"rgba("+Math.round(255*this.r).toString()+", "+Math.round(255*this.g).toString()+", "+Math.round(255*this.b).toString()+", "+this.a+")"},getPreStyle:function(){return void 0===this.a?"rgb("+Math.round(100*this.r).toString()+"%, "+Math.round(100*this.g).toString()+"%, "+Math.round(100*this.b).toString()+"%)":"rgba("+Math.round(100*this.r).toString()+"%, "+Math.round(100*this.g).toString()+"%, "+Math.round(100*this.b).toString()+"%, "+this.a+")"},clone:function(){var t=new a;return t.r=this.r,t.g=this.g,t.b=this.b,t.a=this.a,t},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}}),t.exports=a},function(t,e,n){"use strict";var i=n(44);t.exports=i},function(t,e,n){"use strict";var i=n(1),r=function(t,e,n,i){this.type=t,this.target=null,this.currentTarget=null,this.bubbles=n,this.cancelable=i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.removed=!1,this.event=e};i.augment(r,{preventDefault:function(){this.defaultPrevented=this.cancelable&&!0},stopPropagation:function(){this.propagationStopped=!0},remove:function(){this.remove=!0},clone:function(){return i.clone(this)},toString:function(){return"[Event (type="+this.type+")]"}}),t.exports=r},function(t,e,n){"use strict";var i=n(48);t.exports={interpolation:i.interpolation,unInterpolation:i.unInterpolation}},function(t,e,n){"use strict";function i(t,e){for(var n=[],i=Math.min(t.length,e.length),r=0;i>r;r++)n[r]=a.singular(t[r],e[r]);return function(t){for(var e=[],r=0;i>r;r++)e[r]=n[r](t);return e}}function r(t,e){for(var n=[],i=Math.min(t.length,e.length),r=0;i>r;r++)n[r]=a.unSingular(t[r],e[r]);return function(t){for(var e=Math.min(n.length,t.length),i=0,r=0,a=0;e>a;a++)i+=n[a](t[a]),r++;return 0===r?0:i/r}}var a=n(14);t.exports={array:i,unArray:r}},function(t,e,n){"use strict";function i(t,e){switch(e.getType()){case"rgb":return a(t,e);case"hsl":return o(t,e)}}function r(t,e){switch(e.getType()){case"rgb":return s(t,e);case"hsl":return u(t,e)}}function a(t,e){var n=t.getR(),i=t.getG(),r=t.getB(),a=t.getA(),s=e.getR()-n,o=e.getG()-i,u=e.getB()-r,h=e.getA();return(void 0!==a||void 0!==h)&&(a=a||1,h=(void 0===h?1:h)-a),function(t){var e=new c;return e.setRGB(n+s*t,i+o*t,r+u*t,void 0!==a&&void 0!==h?a+h*t:void 0),e.getRGBStyle()}}function s(t,e){var n=t.getR(),i=t.getG(),r=t.getB(),a=t.getA(),s=e.getR()-n,o=e.getG()-i,u=e.getB()-r,h=e.getA();return(void 0!==a||void 0!==h)&&(a=a||1,h=(void 0===h?1:h)-a),function(t){if(t=new c(t),!t.getType())return 0;var e=t.getR(),l=t.getG(),f=t.getB(),g=t.getA();g=g||1;var x=0,v=0;return 0!==s&&(x+=(e-n)/s,v++),0!==o&&(x+=(l-i)/o,v++),0!==u&&(x+=(f-r)/u,v++),0!==h&&h&&(x+=(g-a)/h,v++),0===v?0:x/v}}function o(t,e){var n=t.getH(),i=t.getS(),r=t.getL(),a=t.getA(),s=e.getH()-n,o=e.getS()-i,u=e.getL()-r,h=e.getA();return(void 0!==a||void 0!==h)&&(a=a||1,h=(void 0===h?1:h)-a),function(t){var e=new c;return e.setHSL(n+s*t,i+o*t,r+u*t,void 0!==a&&void 0!==h?a+h*t:void 0),e.getHSLStyle()}}function u(t,e){var n=t.getH(),i=t.getS(),r=t.getL(),a=t.getA(),s=e.getH()-n,o=e.getS()-i,u=e.getL()-r,h=e.getA();return(void 0!==a||void 0!==h)&&(a=a||1,h=(void 0===h?1:h)-a),function(t){if(t=new c(t),!t.getType())return 0;var e=t.getH(),l=t.getS(),f=t.getL(),g=t.getA();g=g||1;var x=0,v=0;return 0!==s&&(x+=(e-n)/s,v++),0!==o&&(x+=(l-i)/o,v++),0!==u&&(x+=(f-r)/u,v++),0!==h&&h&&(x+=(g-a)/h,v++),0===v?0:x/v}}var c=n(12);t.exports={color:i,unColor:r}},function(t,e,n){"use strict";function i(t,e){return t instanceof l&&e instanceof l?c.matrix(t,e):a.isArray(t)&&a.isArray(e)?s.array(t,e):a.isObject(t)&&a.isObject(e)?o.object(t,e):u.singular(t,e)}function r(t,e){return t instanceof l&&e instanceof l?c.unMatrix(t,e):a.isArray(t)&&a.isArray(e)?s.unArray(t,e):a.isObject(t)&&a.isObject(e)?o.unObject(t,e):u.unSingular(t,e)}var a=n(1),s=n(46),o=n(51),u=n(14),c=n(49),h=n(2),l=h.Matrix3;t.exports={interpolation:i,unInterpolation:r}},function(t,e,n){"use strict";function i(t,e){for(var n=[],i=t.elements,r=e.elements,s=0;u>s;s++)n[s]=a.singular(i[s],r[s]);return function(t){for(var e=new o,i=e.elements,r=0;u>r;r++)i[r]=n[r](t);return e}}function r(t,e){for(var n=[],i=t.elements,r=e.elements,s=0;u>s;s++)n[s]=a.unSingular(i[s],r[s]);return function(t){for(var e=t.elements,i=0,r=0,a=0;u>a;a++){var s=n[a](e[a]);0!==s&&(i+=s,r++)}return i/r}}var a=n(14),s=n(2),o=s.Matrix3,u=9;t.exports={matrix:i,unMatrix:r}},function(t,e){"use strict";function n(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function i(t,e){return e-=t,function(n){return 0===e?0:(n-t)/e}}t.exports={number:n,unNumber:i}},function(t,e,n){"use strict";function i(t,e){var n={};for(var i in t)i in e&&(n[i]=a.singular(t[i],e[i]));return function(t){var e={};for(var i in n)e[i]=n[i](t);return e}}function r(t,e){var n={};for(var i in t)i in e&&(n[i]=a.unSingular(t[i],e[i]));return function(t){var e=0,i=0;for(var r in n)r in t&&(e+=n[r](t[r]),i++);return 0===i?0:e/i}}var a=n(14);t.exports={object:i,unObject:r}},function(t,e){"use strict";function n(t,e){var n=t.length;if(0===n)return NaN;var i=t[0];if(e<t[0])return NaN;if(e>=t[n-1])return t[n-1];for(var r=1;r<t.length&&!(e<t[r]);r++)i=t[r];return i}function i(t,e){var n=t.length;if(0===n)return NaN;var i,r=t[0];if(e>t[n-1])return NaN;if(e<t[0])return t[0];for(var a=1;a<t.length;a++){if(e<=t[a]){i=t[a];break}r=t[a]}return i}var r={PRECISION:1e-5,equal:function(t,e){return Math.abs(t-e)<r.PRECISION},clamp:function(t,e,n){return e>t?e:t>n?n:t},snapTo:function(t,e){var r=n(t,e),a=i(t,e);if(isNaN(r)||isNaN(a)){if(t[0]>=e)return t[0];var s=t[t.length-1];if(e>=s)return s}return Math.abs(e-r)<Math.abs(a-e)?r:a},snapFloor:function(t,e){return n(t,e)},snapCeiling:function(t,e){return i(t,e)},degreeToRad:function(t){return Math.PI/180*t},radToDegree:function(t){return 180/Math.PI*t},mod:function(t,e){return(t%e+e)%e}};t.exports=r},function(t,e,n){"use strict";function i(){"undefined"!=typeof Float32Array?this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]):this.elements=[1,0,0,0,1,0,0,0,1]}var r=n(1),a=n(4);i.multiply=function(t,e){var n=t.elements,r=e.elements,a=new i;return a.set(n[0]*r[0]+n[3]*r[1]+n[6]*r[2],n[0]*r[3]+n[3]*r[4]+n[6]*r[5],n[0]*r[6]+n[3]*r[7]+n[6]*r[8],n[1]*r[0]+n[4]*r[1]+n[7]*r[2],n[1]*r[3]+n[4]*r[4]+n[7]*r[5],n[1]*r[6]+n[4]*r[7]+n[7]*r[8],n[2]*r[0]+n[5]*r[1]+n[8]*r[2],n[2]*r[3]+n[5]*r[4]+n[8]*r[5],n[2]*r[6]+n[5]*r[7]+n[8]*r[8])},i.equal=function(t,e){for(var n=t.elements,i=e.elements,r=!0,s=0,o=n.length;o>s;s++)if(!a.equal(n[s],i[s])){r=!1;break}return r},r.augment(i,{type:"matrix3",set:function(t,e,n,i,r,a,s,o,u){var c=this.elements;return c[0]=t,c[3]=e,c[6]=n,c[1]=i,c[4]=r,c[7]=a,c[2]=s,c[5]=o,c[8]=u,this},get:function(t,e){return t--,e--,this.elements[3*e+t]},identity:function(){return this.set(1,0,0,0,1,0,0,0,1)},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},det:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=t[6],u=t[7],c=t[8];return e*a*c-e*s*u-n*r*c+n*s*o+i*r*u-i*a*o},inverse:function(t){return this.copy(this.getInverse(t))},getInverse:function(t){var e=this.det();if(0===e){if(t)throw"matrix exception: get inverse matrix with 0 det";return console.warn("matrix cannot inverse"),new i}var n=this.elements,r=(n[0],n[3],n[6],n[1],n[4],n[7],n[2],n[5],n[8],new i);return r.set(n[4]*n[8]-n[7]*n[5],-(n[3]*n[8]-n[6]*n[5]),n[3]*n[7]-n[6]*n[4],-(n[1]*n[8]-n[7]*n[2]),n[0]*n[8]-n[6]*n[2],-(n[0]*n[7]-n[6]*n[1]),n[1]*n[5]-n[4]*n[2],-(n[0]*n[5]-n[3]*n[2]),n[0]*n[4]-n[3]*n[1]),r.multiplyScalar(1/e),r},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},multiply:function(t){return this.copy(i.multiply(this,t))},translate:function(t,e){var n=new i;return n.set(1,0,t,0,1,e,0,0,1),this.copy(i.multiply(n,this))},rotate:function(t){var e=new i;return e.set(Math.cos(t),-Math.sin(t),0,Math.sin(t),Math.cos(t),0,0,0,1),this.copy(i.multiply(e,this))},scale:function(t,e){var n=new i;return n.set(t,0,0,0,e,0,0,0,1),this.copy(i.multiply(n,this))},equal:function(t){return i.equal(this,t)},copy:function(t){for(var e=t.elements,n=this.elements,i=0,r=e.length;r>i;i++)n[i]=e[i];return this},clone:function(){for(var t=new i,e=t.elements,n=this.elements,r=0,a=n.length;a>r;r++)e[r]=n[r];return t},to2DObject:function(){var t=this.elements;return{a:t[0],b:t[1],c:t[3],d:t[4],e:t[6],f:t[7]}},from2DObject:function(t){var e=this.elements;return e[0]=t.a,e[1]=t.b,e[3]=t.c,e[4]=t.d,e[6]=t.e,e[7]=t.f,this}}),t.exports=i},function(t,e,n){"use strict";function i(t,e){if(1===arguments.length){var n=t;t=n[0],e=n[1]}this.x=t||0,this.y=e||0}var r=n(1),a=n(4);i.add=function(t,e){return new i(t.x+e.x,t.y+e.y)},i.sub=function(t,e){return new i(t.x-e.x,t.y-e.y)},i.lerp=function(t,e,n){return new i(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},i.angle=function(t,e){var n=t.dot(e)/(t.length()*e.length());return Math.acos(a.clamp(n,-1,1))},i.direction=function(t,e){return t.x*e.y-e.x*t.y},r.augment(i,{type:"vector2",set:function(t,e){return this.x=t,this.y=e,this},setComponent:function(t,e){switch(t){case 0:return this.x=e,this;case 1:return this.y=e,this;default:throw new Error("the index out of range:"+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("the index out of range:"+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t){return this.copy(i.add(this,t))},sub:function(t){return this.copy(i.sub(this,t))},subBy:function(t){return this.copy(i.sub(t,this))},multiplyScaler:function(t){return this.x*=t,this.y*=t,this},divideScaler:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e}else this.x=0,this.y=0;return this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this},clampScale:function(){var t,e;return function(n,r){return void 0===t&&(t=new i,e=new i),t.set(n,n),e.set(r,r),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSq())},normalize:function(){return this.divideScaler(this.length())},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},angleTo:function(t,e){var n=this.angle(t),r=i.direction(this,t)>=0;return e?r?2*Math.PI-n:n:r?n:2*Math.PI-n},vertical:function(t){return t?new i(this.y,-this.x):new i(-this.y,this.x)},angle:function(t){return i.angle(this,t)},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScaler(t/e),this},isZero:function(){return 0===this.x&&0===this.y},lerp:function(t,e){return this.copy(i.lerp(this,t,e))},equal:function(t){return a.equal(this.x,t.x)&&a.equal(this.y,t.y)},clone:function(){return new i(this.x,this.y)}}),t.exports=i},function(t,e,n){"use strict";function i(t,e,n){if(1===arguments.length)if(r.isArray(t)){var i=t;t=i[0],e=i[1],n=i[2]}else if("vector2"===t.type){var a=t;t=a.x,e=a.y,n=1}this.x=t||0,this.y=e||0,this.z=n||0}var r=n(1),a=n(4);i.add=function(t,e){return new i(t.x+e.x,t.y+e.y,t.z+e.z)},i.sub=function(t,e){return new i(t.x-e.x,t.y-e.y,t.z-e.z)},i.lerp=function(t,e,n){return new i(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n,t.z+(e.z-t.z)*n)},i.cross=function(t,e){var n=t.x,r=t.y,a=t.z,s=e.x,o=e.y,u=e.z;return new i(r*u-a*o,a*s-n*u,n*o-r*s)},i.angle=function(t,e){var n=t.dot(e)/(t.length()*e.length());return Math.acos(a.clamp(n,-1,1))},r.augment(i,{type:"vector3",set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setComponent:function(t,e){switch(t){case 0:return this.x=e,this;case 1:return this.y=e,this;case 2:return this.z=e,this;default:throw new Error("index is out of range:"+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range:"+t)}},add:function(t){return this.copy(i.add(this,t))},sub:function(t){return this.copy(i.sub(this,t))},subBy:function(t){return this.copy(i.sub(t,this))},multiplyScaler:function(t){return this.x*=t,this.y*=t,this.z*=t,this},divideScaler:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e,this.z*=e}else this.x=0,this.y=0,this.z=0;return this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this.z<t.z?this.z=t.z:this.z>e.z&&(this.z=e.z),this},clampScale:function(){var t,e;return function(n,r){return void 0===t&&(t=new i,e=new i),t.set(n,n,n),e.set(r,r,r),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.lengthSq())},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScaler(this.length())},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScaler(t/e),this},lerp:function(t,e){return this.copy(i.lerp(this,t,e))},cross:function(t){return this.copy(i.cross(this,t))},angle:function(t){return i.angle(this,t)},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},applyMatrix:function(t){var e=t.elements,n=e[0]*this.x+e[3]*this.y+e[6]*this.z,i=e[1]*this.x+e[4]*this.y+e[7]*this.z,r=e[2]*this.x+e[5]*this.y+e[8]*this.z;return this.x=n,this.y=i,this.z=r,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=void 0!==t.z?t.z:1,this},equal:function(t){return a.equal(this.x,t.x)&&a.equal(this.y,t.y)&&a.equal(this.z,t.z)},clone:function(){return new i(this.x,this.y,this.z)}}),t.exports=i},function(t,e,n){"use strict";var i=n(58);if(window.G){new i(window.G)}else t.exports=i},function(t,e,n){"use strict";var i=n(1),r=n(43),a=function(t){this.canvas=t,this.el=t.get("el"),this.current=null,this.pre=null};i.augment(a,{tryTrigger:function(t,e){t.__listeners&&t.trigger(e)},getCurrent:function(t){var e=this.canvas,n=e.getPointByClient(t.clientX,t.clientY);this.point=n,this.pre=this.current,this.current=e.getShape(n.x,n.y)},mousemove:function s(t){this.getCurrent(t);var e=this.point,n=this.canvas;if(n.has("canvas-mousemove")){var i=new r("canvas-mousemove",t,!0,!0);i.x=e.x,i.y=e.y,i.clientX=t.clientX,i.clientY=t.clientY,i.currentTarget=n,this.tryTrigger(n,i)}if(this.pre&&this.pre!==this.current){var a=new r("mouseleave",t,!0,!0);a.x=e.x,a.y=e.y,a.clientX=t.clientX,a.clientY=t.clientY,a.currentTarget=this.pre,a.target=this.pre,this.tryTrigger(this.pre,a)}if(this.current){var s=new r("mousemove",t,!0,!0);if(s.x=e.x,s.y=e.y,s.clientX=t.clientX,s.clientY=t.clientY,s.currentTarget=this.current,s.target=this.current,this.tryTrigger(this.current,s),this.pre!==this.current){var o=new r("mouseenter",t,!0,!0);o.x=e.x,o.y=e.y,o.clientX=t.clientX,o.clientY=t.clientY,o.currentTarget=this.current,o.target=this.current,this.tryTrigger(this.current,o)}}},mousedown:function o(t){var e=this.point,n=this.canvas;if(n.has("canvas-mousedown")){var i=new r("canvas-mousedown",t,!0,!0);i.x=e.x,i.y=e.y,i.clientX=t.clientX,i.clientY=t.clientY,i.currentTarget=n,this.tryTrigger(n,i)}if(this.current){var o=new r("mousedown",t,!0,!0);o.x=e.x,o.y=e.y,o.clientX=t.clientX,o.clientY=t.clientY,o.currentTarget=this.current,o.target=this.current,this.tryTrigger(this.current,o)}},mouseup:function u(t){var e=this.point,n=this.canvas;if(n.has("canvas-mouseup")){var i=new r("canvas-mouseup",t,!0,!0);i.x=e.x,i.y=e.y,i.clientX=t.clientX,i.clientY=t.clientY,i.currentTarget=n,this.tryTrigger(n,i)}if(this.current){var u=new r("mouseup",t,!0,!0);u.x=e.x,u.y=e.y,u.clientX=t.clientX,u.clientY=t.clientY,u.currentTarget=this.current,u.target=this.current,this.tryTrigger(this.current,u)}},click:function c(t){this.getCurrent(t);var e=this.point,n=this.canvas;if(n.has("canvas-click")){var i=new r("canvas-click",t,!0,!0);i.x=e.x,i.y=e.y,i.clientX=t.clientX,i.clientY=t.clientY,i.currentTarget=n,this.tryTrigger(n,i)}if(this.current){var c=new r("click",t,!0,!0);c.x=e.x,c.y=e.y,c.clientX=t.clientX,c.clientY=t.clientY,c.currentTarget=this.current,c.target=this.current,this.tryTrigger(this.current,c)}},dblclick:function h(t){var e=this.point,n=this.canvas;if(n.has("canvas-dblclick")){var i=new r("canvas-dblclick",t,!0,!0);i.x=e.x,i.y=e.y,i.clientX=t.clientX,i.clientY=t.clientY,i.currentTarget=n,this.tryTrigger(n,i)}if(this.current){var h=new r("dblclick",t,!0,!0);h.x=e.x,h.y=e.y,h.clientX=t.clientX,h.clientY=t.clientY,h.currentTarget=this.current,h.target=this.current,this.tryTrigger(this.current,h)}},mouseout:function(t){var e=(this.point,this.canvas),n=new r("canvas-mouseleave",t,!0,!0);n.currentTarget=e,this.tryTrigger(e,n)},mouseover:function(t){var e=(this.point,this.canvas),n=new r("canvas-mouseenter",t,!0,!0);n.currentTarget=e,this.tryTrigger(e,n)}}),t.exports=a},function(t,e,n){"use strict";function i(t){this.name="mouseEvent",this.type="event",i.superclass.constructor.call(this,t)}var r=n(1),a=n(57),s=n(59);r.extend(i,s),r.augment(i,{__events:function(){var t=this,e=t.get("el"),n=new a(this);e.addEventListener("mouseout",function(t){n.mouseout(t)},!1),e.addEventListener("mouseover",function(t){n.mouseover(t)},!1),e.addEventListener("mousemove",function(t){n.mousemove(t)},!1),e.addEventListener("mousedown",function(t){n.mousedown(t)},!1),e.addEventListener("mouseup",function(t){n.mouseup(t)},!1),e.addEventListener("click",function(t){n.click(t)},!1),e.addEventListener("dblclick",function(t){n.dblclick(t)},!1)}}),t.exports=i},function(t,e,n){"use strict";var i=n(60);t.exports=i},function(t,e,n){"use strict";function i(t){this.register(t)}var r=n(1);r.augment(i,{register:function(t){var e=this;if(t.plugins||(t.plugins={}),!t.plugins[e.name])switch(t.plugins[e.name]=e,e.type){case"event":e.__registerEvent(t)}},__registerEvent:function(t){var e=this;if(e.__events){var n=t.Canvas.prototype.__events;r.augment(t.Canvas,{__events:function(){n&&n.call(this),e.__events.call(this)}})}}}),t.exports=i},function(t,e,n){"use strict";var i=n(64);i.Tweengit=n(26),i.Ease=n(25),t.exports=i},function(t,e,n){"use strict";var i=n(1),r={transform:function(t,e){return t=t.clone(),i.each(e,function(e){switch(e[0]){case"t":t.translate(e[1],e[2]);break;case"s":t.scale(e[1],e[2]);break;case"r":t.rotate(e[1]);break;case"m":t.multiply(e[1])}}),t},isMatrix3:function(t){return"matrix3"===t.type?!0:!1},scale:function(t,e,n,i,r){return t=t.clone(),t.translate(-1*i,-1*r),t.scale(e,n),t.translate(i,r),t}};t.exports=r},function(t,e,n){"use strict";function i(t,e){for(var n=[],i=0,r=t.length;r-2*!e>i;i+=2){var a=[{x:+t[i-2],y:+t[i-1]},{x:+t[i],y:+t[i+1]},{x:+t[i+2],y:+t[i+3]},{x:+t[i+4],y:+t[i+5]}];e?i?r-4===i?a[3]={x:+t[0],y:+t[1]}:r-2===i&&(a[2]={x:+t[0],y:+t[1]},a[3]={x:+t[2],y:+t[3]}):a[0]={x:+t[r-2],y:+t[r-1]}:r-4===i?a[3]=a[2]:i||(a[0]={x:+t[i],y:+t[i+1]}),n.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return n}var r=n(1),a="concat",s=String.prototype.toUpperCase,o=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,u=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,c={path2Absolute:function(t){if(r.isArray(t)&&r.isArray(t&&t[0])||(t=c.parsePathString(t)),!t||!t.length)return[["M",0,0]];var e=[],n=0,o=0,u=0,h=0,l=0;"M"===t[0][0]&&(n=+t[0][1],o=+t[0][2],u=n,h=o,l++,e[0]=["M",n,o]);for(var f,g,x=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),v=l,d=t.length;d>v;v++){e.push(f=[]),g=t[v];var p;if(g[0]!==s.call(g[0]))switch(f[0]=s.call(g[0]),f[0]){case"A":f[1]=g[1],f[2]=g[2],f[3]=g[3],f[4]=g[4],f[5]=g[5],f[6]=+(g[6]+n),f[7]=+(g[7]+o);break;case"V":f[1]=+g[1]+o;break;case"H":f[1]=+g[1]+n;break;case"R":p=[n,o][a](g.slice(1));for(var _=2,m=p.length;m>_;_++)p[_]=+p[_]+n,p[++_]=+p[_]+o;e.pop(),e=e[a](i(p,x));break;case"M":for(u=+g[1]+n,h=+g[2]+o,_=1,m=g.length;m>_;_++)f[_]=+g[_]+(_%2?n:o);break;default:for(_=1,m=g.length;m>_;_++)f[_]=+g[_]+(_%2?n:o)}else if("R"===g[0])p=[n,o][a](g.slice(1)),e.pop(),e=e[a](i(p,x)),f=["R"][a](g.slice(-2));else for(var y=0,S=g.length;S>y;y++)f[y]=g[y];switch(f[0]){case"Z":n=u,o=h;break;case"H":n=f[1];break;case"V":o=f[1];break;case"M":u=f[f.length-2],h=f[f.length-1],n=f[f.length-2],o=f[f.length-1];break;default:n=f[f.length-2],o=f[f.length-1]}}return e},parsePathString:function(t){if(!t)return null;var e={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},n=[];return r.isArray(t)&&r.isArray(t[0])&&(n=t.slice(0)),!n.length&&r.isString(t)&&t.replace(u,function(t,i,r){var s=[],u=i.toLowerCase();if(r.replace(o,function(t,e){e&&s.push(+e)}),"m"===u&&s.length>2&&(n.push([i][a](s.splice(0,2))),u="l",i="m"===i?"l":"L"),"r"===u)n.push([i][a](s));else for(;s.length>=e[u]&&(n.push([i][a](s.splice(0,e[u]))),e[u]););}),n},parsePathArray:function(t){if(r.isArray(t)){var e=r.map(t,function(t){var e=t.join(" ");return e.replace(/([a-z,A-Z])\s+/,"$1")});return e.join(" ")}return t}};t.exports=c},function(t,e,n){"use strict";var i=n(16),r=n(9),a=n(65),s=function o(t){o.superclass.constructor.call(this,t),this._init()};i.extend(s,r),s.ATTRS={time:0,createTime:null,playTime:null,pauseTimeSpace:0,available:!1,canvases:[],tweens:[],endTime:0,infinite:!1,autoDestroy:!0,autoPlay:!1,autoDraw:!0,loop:!1},i.augment(s,{_init:function(){var t=this.get("autoPlay");this.set("createTime",+new Date),t&&this.play()},_trySetEndTime:function(t){var e=this;i.isObject(t)?e._setEndTime(t):i.isArray(t)&&i.each(t,function(t,n){e._setEndTime(t)})},_trySetCanvases:function(t){var e=this;i.isObject(t)?e._setCanvases(t):i.isArray(t)&&i.each(t,function(t,n){e._setCanvases(t)})},_setEndTime:function(t){var e=this.get("endTime"),n=t.get("endTime");this.set("endTime",n>e?n:e)},_setCanvases:function(t){var e=t.get("canvas"),n=this.get("canvases");-1===n.indexOf(e)&&n.push(e)},_resetTweens:function(){var t=this.get("tweens");i.each(t,function(t){t.reset()})},_getTime:function(){var t=this.get("playTime"),e=this.get("pauseTimeSpace");return+new Date-t+e},_refresh:function(t){for(var e,n=this.get("tweens"),i=this.get("autoDraw"),r=this.get("autoDestroy"),a=[],s=0;s<n.length;s++)e=n[s],e.get("needsDestroy")&&r?e.destroy():e.get("destroyed")||e.get("needsDestroy")||e.tryStep(t),e.destroyed||a.push(e);
i&&this.draw(),this.set("tweens",a)},_update:function(){if(this.get("available")){var t=this,e=t._getTime(),n=t.get("endTime"),r=t.get("loop"),a=t.get("infinite");t._refresh(e),t.set("time",e),t.timer(),i.requestAnimationFrame(function(){n+16>=e||a?t._update():t.reset(),e>=n&&r&&(t.set("pauseTimeSpace",0),t._resetTweens(),t.play())})}},animate:function(t,e){var n=new a({target:t,canvas:t.get("canvas"),timeline:this,startTime:e?e:0});return n},add:function(t){var e,n=this.get("tweens");return i.isArray(t)?e=n.concat(t):i.isObject(t)&&"tween"===t.get("type")?(n.push(t),e=n):console.error("Timeline not Support this type"),this.set("tweens",e),this._trySetCanvases(t),this._trySetEndTime(t),this},getTime:function(){return+new Date-this.get("playTime")},play:function(){var t=this.get("available");return this.set("playTime",+new Date),t||(this.set("available",!0),this._update()),this},loop:function(t){return t||void 0===t?(this.set("infinite",!0),this.set("autoDestroy",!1),this.set("loop",!0)):this.set("loop",!1),this},stop:function(){this.set("available",!1),this.set("pauseTimeSpace",0),this._resetTweens(),this.reset(),this._refresh(0),this.draw()},pause:function(){var t=this.get("available");return t&&this.set("pauseTimeSpace",+new Date-this.get("playTime")),this.set("available",!1),this},reset:function(){var t=this.get("autoDestroy");this.set("time",0),t&&(this.set("tweens",[]),this.set("canvases",[]))},draw:function(){for(var t=this.get("canvases"),e=0;e<t.length;e++)t[e].draw()},timer:function(){}}),t.exports=s},function(t,e,n){"use strict";var i=n(16),r=n(9),a=n(26),s=n(2),o=(s.Matrix3,function u(t){u.superclass.constructor.call(this,t),this.init()});i.extend(o,r),o.ATTRS={target:null,timeline:null,startTime:null,delay:0,cursorFrame:{attrs:{},matrix:null},cursorTimeSpan:0,tweens:[]},i.augment(o,{init:function(){var t=this.get("cursorFrame"),e=this.get("target");t.attrs=i.mix({},e.__attrs),t.matrix=e.getMatrix().clone()},append:function(t,e,n,r){var s,o=i.guid("tween_"),u=this.get("target"),c=this.get("tweens"),h=this.get("timeline"),l=this.get("startTime"),f=i.getKeyFrameByProps(u,e),g=f[1];return n=n?n:"linear",s=new a({id:o,canvas:u.get("canvas"),startTime:t?t:l,target:u,easing:n,duration:e.duration?e.duration:1e3,callBack:r,endKeyFrame:g}),h&&h.add(s),c.push(s),this},at:function(t){return this.set("startTime",t),this}}),t.exports=o},function(t,e,n){"use strict";var i=n(67);t.exports=i},function(t,e){"use strict";function n(t,e,i){i=i||0;for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];null!==o&&s.isObject(o)?(s.isObject(t[r])||(t[r]={}),a>i?n(t[r],e[r]):t[r]=e[r]):s.isArray(o)?(t[r]=[],t[r]=t[r].concat(o)):void 0!==o&&(t[r]=e[r])}}var i=Object.prototype,r=i.toString,a=5,s={substitute:function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]}):t},ucfirst:function(t){return t+="",t.charAt(0).toUpperCase()+t.substring(1)},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},isBoolean:function(t){return"boolean"==typeof t},isFunction:function(t){return"function"==typeof t},isArray:"isArray"in Array?Array.isArray:function(t){return"[object Array]"===r.call(t)},isDate:function(t){return"[object Date]"===r.call(t)},isNull:function(t){return void 0===t||null===t},notNull:function(t){return!s.isNull(t)},isBlank:function(t){if(s.isArray(t))return 0===t.length;if(s.isObject(t)){var e=0;return s.each(t,function(t,n){e++}),0===e}return!1},isObject:"[object Object]"===r.call(null)?function(t){return null!==t&&void 0!==t&&"[object Object]"===r.call(t)&&void 0===t.ownerDocument}:function(t){return"[object Object]"===r.call(t)},extend:function(t,e,n,i){s.isFunction(e)||(n=e,e=t,t=function(){});var r=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}n.prototype=t;var i=new n;return i.constructor=e,i},a=r(e.prototype,t);return t.prototype=s.mix(a,t.prototype),t.superclass=r(e.prototype,e),s.mix(a,n),s.mix(t,i),t},augment:function(t){for(var e=s.toArray(arguments),n=1;n<e.length;n++){var i=e[n];s.isFunction(i)&&(i=i.prototype),s.mix(t.prototype,i)}},toArray:function(t){return t&&t.length?Array.prototype.slice.call(t):[]},mix:function(){var t=s.toArray(arguments),e=t[0];if(e===!0){e=t[1];for(var i=2;i<t.length;i++){var r=t[i];n(e,r)}}else for(var i=1;i<t.length;i++){var r=t[i];for(var a in r)r.hasOwnProperty(a)&&"constructor"!==a&&(e[a]=r[a])}return e},each:function(t,e){if(t)if(s.isObject(t)){for(var n in t)if(t.hasOwnProperty(n)){var i=e(t[n],n);if(i===!1)break}}else if(t.length)for(var r=0;r<t.length;r++){var i=e(t[r],r);if(i===!1)break}},requestAnimationFrame:function(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return setTimeout(t,16)};return e(t)},cancelAnimationFrame:function(t){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||function(t){return clearTimeout(t)};return e(t)}};t.exports=s},function(t,e,n){"use strict";function i(t,e){var n=e.toString(),i=n.indexOf(".");if(-1===i)return Math.round(t);var r=n.substr(i+1).length;return parseFloat(t.toFixed(r))}var r=Object.prototype,a=(r.toString,n(66));a.mix(a,{mixin:function(t,e){if(t&&e){t._mixins=e,t.ATTRS=t.ATTRS||{};var n={};a.each(e,function(e){a.augment(t,e);var i=e.ATTRS;i&&a.mix(n,i)}),t.ATTRS=a.mix(n,t.ATTRS)}},map:function(t,e){var n=[];return a.each(t,function(t,i){n.push(e(t,i))}),n},filter:function(t,e){var n=[];return a.each(t,function(t,i){e(t,i)&&n.push(t)}),n},guid:function(){var t={};return function(e){return e=e||"g",t[e]?t[e]+=1:t[e]=1,e+t[e]}}(),inArray:function(t,e){return-1!==a.indexOf(t,e)},indexOf:function(t,e){var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var i=-1,r=0;r<t.length;r++)if(t[r]===e){i=r;break}return i},remove:function(t,e){var n=a.indexOf(t,e);-1!==n&&t.splice(n,1)},empty:function(t){if(!(t instanceof Array))for(var e=t.length-1;e>=0;e--)delete t[e];t.length=0},equalsArray:function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=!0,i=0;i<t.length;i++)if(t[i]!==e[i]){n=!1;break}return n},wrapBehavior:function(t,e){return t["_wrap_"+e]=function(n){t[e](n)}},getWrapBehavior:function(t,e){return t["_wrap_"+e]},fixedBase:function(t,e){return i(t,e)},length:function s(t){if(a.isArray(t))return t.length;if(a.isObject(t)){var s=0;return a.each(t,function(){s++}),s}return 0},clone:function(t){if("object"!=typeof t||null===t)return t;if(a.isArray(t))for(var e=[],n=0,i=t.length;i>n;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=a.clone(t[n]):e[n]=t[n];else{var e={};for(var n in t)"object"==typeof t[n]&&null!=t[n]?e[n]=a.clone(t[n]):e[n]=t[n]}return e}}),t.exports=a},function(t,e,n){"use strict";var i=n(3),r=n(71),a=n(72),s=n(29),o=n(8),u=n(70),c=n(2),h=c.Vector3,l=function(t){};i.augment(l,{canFill:!1,canStroke:!1,initAttrs:function(t){return this.__attrs={},this.attr(i.mix({},this.getDefaultAttrs(),t)),this},getDefaultAttrs:function(){return{}},attr:function(t,e){var n=this;if(0===arguments.length)return n.__attrs;if(i.isObject(t))return i.each(t,function(t,e){n._setAttr(e,t)}),n.__afterSetAttrAll&&n.__afterSetAttrAll(t),n;if(2===arguments.length){if(n._setAttr(t,e)!==!1){var r="__afterSetAttr"+i.ucfirst(t);n[r]&&n[r](e)}return n}return n._getAttr(t)},resetAttrs:function(){var t=this,e=t,n=t.get("context"),o=e.__attrs;e.isGroup?i.each(o,function(t,a){r[a]&&("fillStyle"===a&&(t=s.parseStyle(t,e,o.fillOpacity)),"strokeStyle"===a&&(t=s.parseStyle(t,e,o.strokeOpacity)),"lineDash"===a&&n.setLineDash?i.isArray(t)?n.setLineDash(t):i.isString(t)&&n.setLineDash(t.split(" ")):n[a]=t)}):i.each(o,function(t,r){a[r]&&("fillStyle"===r&&(t=s.parseStyle(t,e,o.fillOpacity)),"strokeStyle"===r&&(t=s.parseStyle(t,e,o.strokeOpacity)),"lineDash"===r&&n.setLineDash?i.isArray(t)?n.setLineDash(t):i.isString(t)&&n.setLineDash(t.split(" ")):n[r]=t)})},_getAttr:function(t){var e=this,n=e.__attrs[t],r="__getAttr"+i.ucfirst(t);return e[r]&&(n=e[r](n)),n},_setAttr:function(t,e){var n=this,r="__setAttr"+i.ucfirst(t);return n[r]&&(e=n[r](e,n.__attrs[t])),e===n.__attrs[t]?!1:(n.__attrs[t]=e,n)},__setAttrFill:function(t){var e=this;if(e.canFill)return e.__attrs.fillStyle=t,t},hasFill:function(){if(this.canFill)for(var t=this;t;){if(t.__attrs.fill)return t.__attrs.fill;t=t.get("parent")}},__setAttrStroke:function(t){var e=this;if(e.canStroke)return this.__attrs.strokeStyle=t,t},hasStroke:function(){if(this.canStroke)for(var t=this;t;){if(t.__attrs.stroke)return t.__attrs.stroke;t=t.get("parent")}},__setAttrOpacity:function(t){return this.__attrs.globalAlpha=t,t},__getAttrOpacity:function(){return this.__attrs.globalAlpha},__setAttrLineWidth:function(t,e){return t>=0&&20>=t?t:(o.warn("lineWidth \u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e0\u6216\u8005\u5c0f\u4e8e\u7b49\u4e8e20"),e||1)},__setAttrClip:function(t){var e=this;return t&&t.type in u?(null===t.get("canvas")&&(t=i.clone(t)),t.set("parent",e.get("parent")),t.set("context",e.get("context")),t.inside=function(n,i){var r=new h(n,i,1);return t.invert(r,e.get("canvas")),t.__isPointInFill(r.x,r.y)},t):void 0}}),t.exports=l},function(t,e){"use strict";t.exports={circle:1,ellipse:1,fan:1,polygon:1,rect:1,path:1}},function(t,e){"use strict";t.exports={fillStyle:1,strokeStyle:1,globalAlpha:1,shadowBlur:1,shadowColor:1,shadowOffsetX:1,shadowOffsetY:1,lineDash:1}},function(t,e){"use strict";t.exports={fillStyle:1,font:1,globalAlpha:1,lineCap:1,lineWidth:1,lineJoin:1,miterLimit:1,shadowBlur:1,shadowColor:1,shadowOffsetX:1,shadowOffsetY:1,strokeStyle:1,textAlign:1,textBaseline:1,lineDash:1}},function(t,e,n){"use strict";var i=n(3),r=n(28),a=function s(t){s.superclass.constructor.call(this,t)};i.extend(a,r),i.augment(a,{init:function(){a.superclass.init.call(this);var t=this,e=t.get("canvasId"),n=document.getElementById(e);t.set("el",n),t.set("context",n.getContext("2d")),t.set("canvas",t),t.__events()},__events:function(){},getPointByClient:function(t,e){var n=this,i=n.get("el"),r=i.getBoundingClientRect(),a=r.right-r.left,s=r.bottom-r.top;return{x:(t-r.left)*(i.width/a),y:(e-r.top)*(i.height/s)}},getClientByPoint:function(t,e){var n=this,i=n.get("el"),r=i.getBoundingClientRect(),a=r.right-r.left,s=r.bottom-r.top;return{clientX:t/(i.width/a)+r.left,clientY:e/(i.height/s)+r.top}},beforeDraw:function(){var t=this,e=t.get("context"),n=t.get("el");e.clearRect(0,0,n.width,n.height)},draw:function(){function t(){e.set("animateHandler",i.requestAnimationFrame(function(){e.set("animateHandler",void 0),e.get("toDraw")&&t()})),a.superclass.draw.call(e),e.set("toDraw",!1)}var e=this;e.get("animateHandler")?e.set("toDraw",!0):t()}}),t.exports=a},function(t,e,n){"use strict";var i=n(3),r=function(){};i.augment(r,{initEventDispatcher:function(){this.__listeners={}},on:function(t,e){var n=this.__listeners;return i.isNull(n[t])&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e),this},off:function(t,e){var n=this.__listeners;return 0===arguments.length?(this.__listeners={},this):1===arguments.length&&i.isString(t)?(n[t]=[],this):2===arguments.length&&i.isString(t)&&i.isFunction(e)?(i.remove(n[t],e),this):void 0},has:function(t,e){var n=this.__listeners;return 0!==arguments.length||i.isBlank(n)?1===arguments.length&&n[t]&&!i.isBlank(n[t])?!0:2===arguments.length&&n[t]&&-1!==n[t].indexOf(e)?!0:!1:!0},trigger:function(t){var e=this,n=e.__listeners,r=n[t.type];if(t.target=e,i.notNull(r)&&i.each(r,function(n){n.call(e,t)}),t.bubbles){var a=e.get("parent");a&&!t.propagationStopped&&a.trigger(t)}return e}}),t.exports=r},function(t,e,n){"use strict";var i=n(3),r=n(2),a=r.Matrix3,s=(r.Vector3,n(4)),o=function(){};i.augment(o,{initTransform:function(){this.__m=new a},translate:function(t,e){return this.__m.translate(t,e),this},rotate:function(t){return this.__m.rotate(s.degreeToRad(t)),this},scale:function(t,e){return this.__m.scale(t,e),this},transform:function(t){var e=this;return i.each(t,function(t){switch(t[0]){case"t":e.translate(t[1],t[2]);break;case"s":e.scale(t[1],t[2]);break;case"r":e.rotate(t[1]);break;case"m":e.__m=a.multiply(t[1],e.__m)}}),this},setTransform:function(t){return this.__m.identity(),this.transform(t)},getMatrix:function(){return this.__m},setMatrix:function(t){return this.__m=t,this},apply:function(t,e){var n=this;e=e||n;for(var r=n,s=[];r!==e;)s.unshift(r),r=r.get("parent");s.unshift(r);var o=new a;return i.each(s,function(t){o.multiply(t.__m)}),t.applyMatrix(o),this},invert:function(t,e){var n=this;e=e||n;for(var r=n,s=[];r!==e;)s.unshift(r),r=r.get("parent");s.unshift(r);var o=new a;i.each(s,function(t){o.multiply(t.__m)});var u=o.getInverse();return t.applyMatrix(u),this},resetTransform:function(){var t=this,e=t.get("context"),n=t.__m.to2DObject();e.transform(n.a,n.b,n.c,n.d,n.e,n.f)}}),t.exports=o},function(t,e,n){"use strict";var i=n(3),r=n(6),a=n(5),s=n(17),o=n(4),u=n(13),c=n(2),h=c.Vector2,l=n(8),f=function g(t){g.superclass.constructor.call(this,t)};f.ATTRS={x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,arrow:!1},i.extend(f,r),i.augment(f,{canStroke:!0,type:"arc",getDefaultAttrs:function(){return f.ATTRS},__setAttrR:function(t,e){return t>=0?t:(l.warn("r \u5fc5\u987b\u5927\u4e8e0"),e)},__setAttrClockwise:function(t,e){return i.isBoolean(t)?t:(l.warn("clockwise \u5fc5\u987b\u662fboolean\u503c"),e)},__setAttrStartAngle:function(t){return o.degreeToRad(t)},__getAttrStartAngle:function(t){return o.radToDegree(t)},__setAttrEndAngle:function(t){return o.degreeToRad(t)},__getAttrEndAngle:function(t){return o.radToDegree(t)},__afterSetAttrX:function(){this.__calculateBox()},__afterSetAttrY:function(){this.__calculateBox()},__afterSetAttrR:function(){this.__calculateBox()},__afterSetAttrStartAngle:function(){this.__calculateBox()},__afterSetAttrEndAngle:function(){this.__calculateBox()},__afterSetAttrClockwise:function(){this.__calculateBox()},__afterSetAttrLineWidth:function(){this.__calculateBox()},__afterSetAttrAll:function(){this.__calculateBox()},__calculateBox:function(){var t=this,e=t.__attrs,n=e.x,i=e.y,r=e.r,a=e.startAngle,o=e.endAngle,u=e.clockwise,c=e.lineWidth,h=s.box(n,i,r,a,o,u),l=c/2;h.minX-=l,h.minY-=l,h.maxX+=l,h.maxY+=l,this.set("box",h)},isPointInPath:function(t,e){var n=this,i=n.__attrs,r=i.x,s=i.y,o=i.r,u=i.startAngle,c=i.endAngle,h=i.clockwise,l=i.lineWidth;return n.hasStroke()?a.arcline(r,s,o,u,c,h,l,t,e):!1},createPath:function(){var t=this,e=t.get("context"),n=t.__attrs,i=n.x,r=n.y,a=n.r,s=n.startAngle,o=n.endAngle,c=n.clockwise,l=n.lineWidth,f=n.arrow;if(e.beginPath(),e.arc(i,r,a,s,o,c),f){var g={x:i+a*Math.cos(o),y:r+a*Math.sin(o)},x=new h(-a*Math.sin(o),a*Math.cos(o));c&&x.multiplyScaler(-1),u.makeArrow(e,x,g,l)}}}),t.exports=f},function(t,e,n){"use strict";var i=n(3),r=n(6),a=n(5),s=n(8),o=function u(t){u.superclass.constructor.call(this,t)};o.ATTRS={x:0,y:0,r:0,lineWidth:1},i.extend(o,r),i.augment(o,{canFill:!0,canStroke:!0,type:"circle",getDefaultAttrs:function(){return o.ATTRS},__setAttrR:function(t,e){return t>=0?t:(s.warn("r \u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e0"),e)},__afterSetAttrX:function(){this.__calculateBox()},__afterSetAttrY:function(){this.__calculateBox()},__afterSetAttrR:function(){this.__calculateBox()},__afterSetAttrLineWidth:function(){this.__calculateBox()},__afterSetAttrAll:function(){this.__calculateBox()},__calculateBox:function(){var t=this,e=t.__attrs,n=e.x,i=e.y,r=e.r,a=e.lineWidth,s=a/2+r;this.set("box",{minX:n-s,minY:i-s,maxX:n+s,maxY:i+s})},isPointInPath:function(t,e){var n=this,i=n.hasFill(),r=n.hasStroke();return i&&r?n.__isPointInFill(t,e)||n.__isPointInStroke(t,e):i?n.__isPointInFill(t,e):r?n.__isPointInStroke(t,e):!1},__isPointInFill:function(t,e){var n=this,i=n.__attrs,r=i.x,s=i.y,o=i.r;return a.circle(r,s,o,t,e)},__isPointInStroke:function(t,e){var n=this,i=n.__attrs,r=i.x,s=i.y,o=i.r,u=i.lineWidth;return a.arcline(r,s,o,0,2*Math.PI,!1,u,t,e)},createPath:function(){var t=this,e=t.get("context"),n=t.__attrs,i=n.x,r=n.y,a=n.r;e.beginPath(),e.arc(i,r,a,0,2*Math.PI,!1),e.closePath()}}),t.exports=o},function(t,e,n){"use strict";var i=n(3),r=n(6),a=n(5),s=(n(4),n(13)),o=n(18),u=n(2),c=u.Vector2,h=function l(t){l.superclass.constructor.call(this,t)};h.ATTRS={p1:null,p2:null,p3:null,p4:null,lineWidth:1,arrow:!1},i.extend(h,r),i.augment(h,{canStroke:!0,type:"cubic",getDefaultAttrs:function(){return h.ATTRS},__afterSetAttrP1:function(){this.__calculateBox()},__afterSetAttrP2:function(){this.__calculateBox()},__afterSetAttrP3:function(){this.__calculateBox()},__afterSetAttrP4:function(){this.__calculateBox()},__afterSetAttrLineWidth:function(){this.__calculateBox()},__afterSetAttrAll:function(){this.__calculateBox()},__calculateBox:function(){var t=this,e=t.__attrs,n=e.p1,r=e.p2,a=e.p3,s=e.p4;if(!(i.isNull(n)||i.isNull(r)||i.isNull(a)||i.isNull(s))){for(var u=e.lineWidth/2,c=o.extrema(n[0],r[0],a[0],s[0]),h=0,l=c.length;l>h;h++)c[h]=o.at(n[0],r[0],a[0],s[0],c[h]);for(var f=o.extrema(n[1],r[1],a[1],s[1]),h=0,l=f.length;l>h;h++)f[h]=o.at(n[1],r[1],a[1],s[1],f[h]);c.push(n[0],s[0]),f.push(n[1],s[1]),t.set("box",{minX:Math.min.apply(Math,c)-u,maxX:Math.max.apply(Math,c)+u,minY:Math.min.apply(Math,f)-u,maxY:Math.max.apply(Math,f)+u})}},isPointInPath:function(t,e){var n=this,i=n.__attrs,r=i.p1,s=i.p2,o=i.p3,u=i.p4,c=i.lineWidth;return a.cubicline(r[0],r[1],s[0],s[1],o[0],o[1],u[0],u[1],c,t,e)},createPath:function(){var t=this,e=t.get("context"),n=t.__attrs,r=n.p1,a=n.p2,o=n.p3,u=n.p4,h=n.lineWidth,l=n.arrow;if(!(i.isNull(r)||i.isNull(a)||i.isNull(o)||i.isNull(u))&&(e.beginPath(),e.moveTo(r[0],r[1]),e.bezierCurveTo(a[0],a[1],o[0],o[1],u[0],u[1]),l)){var f=new c(u[0]-o[0],u[1]-o[1]);s.makeArrow(e,f,{x:u[0],y:u[1]},h)}},getPoint:function(t){var e=this.__attrs;return{x:o.at(e.p4[0],e.p3[0],e.p2[0],e.p1[0],t),y:o.at(e.p4[1],e.p3[1],e.p2[1],e.p1[1],t)}}}),t.exports=h},function(t,e,n){"use strict";var i=n(3),r=n(6),a=n(5),s=n(2),o=s.Matrix3,u=s.Vector3,c=n(8),h=function l(t){l.superclass.constructor.call(this,t)};h.ATTRS={x:0,y:0,rx:1,ry:1,lineWidth:1},i.extend(h,r),i.augment(h,{canFill:!0,canStroke:!0,type:"ellipse",getDefaultAttrs:function(){return h.ATTRS},__setAttrRx:function(t,e){return t>0?t:(c.warn("rx \u5927\u4e8e\u7b49\u4e8e0"),e)},__setAttrRy:function(t,e){return t>0?t:(c.warn("ry \u5927\u4e8e\u7b49\u4e8e0"),e)},__afterSetAttrX:function(){this.__calculateBox()},__afterSetAttrY:function(){this.__calculateBox()},__afterSetAttrRx:function(){this.__calculateBox()},__afterSetAttrRy:function(){this.__calculateBox()},__afterSetAttrLineWidth:function(){this.__calculateBox()},__afterSetAttrAll:function(){this.__calculateBox()},__calculateBox:function(){var t=this,e=t.__attrs,n=e.x,i=e.y,r=e.rx,a=e.ry,s=e.lineWidth,o=r+s/2,u=a+s/2;this.set("box",{minX:n-o,minY:i-u,maxX:n+o,maxY:i+u})},isPointInPath:function(t,e){var n=this,i=n.hasFill(),r=n.hasStroke();return i&&r?n.__isPointInFill(t,e)||n.__isPointInStroke(t,e):i?n.__isPointInFill(t,e):r?n.__isPointInStroke(t,e):!1},__isPointInFill:function(t,e){var n=this,i=n.__attrs,r=i.x,s=i.y,c=i.rx,h=i.ry,l=c>h?c:h,f=c>h?1:c/h,g=c>h?h/c:1,x=new u(t,e,1),v=new o;v.scale(f,g),v.translate(r,s);var d=v.getInverse();return x.applyMatrix(d),a.circle(0,0,l,x.x,x.y)},__isPointInStroke:function(t,e){var n=this,i=n.__attrs,r=i.x,s=i.y,c=i.rx,h=i.ry,l=i.lineWidth,f=c>h?c:h,g=c>h?1:c/h,x=c>h?h/c:1,v=new u(t,e,1),d=new o;d.scale(g,x),d.translate(r,s);var p=d.getInverse();return v.applyMatrix(p),a.arcline(0,0,f,0,2*Math.PI,!1,l,v.x,v.y)},createPath:function(){var t=this,e=t.get("context"),n=t.__attrs,i=n.x,r=n.y,a=n.rx,s=n.ry,u=a>s?a:s,c=a>s?1:a/s,h=a>s?s/a:1,l=new o;l.scale(c,h),l.translate(i,r);var f=l.to2DObject();e.beginPath(),e.save(),e.transform(f.a,f.b,f.c,f.d,f.e,f.f),e.arc(0,0,u,0,2*Math.PI),e.restore(),e.closePath()}}),t.exports=h},function(t,e,n){"use strict";var i=n(3),r=n(6),a=n(5),s=n(4),o=n(17),u=n(2),c=u.Vector2,h=n(8),l=function f(t){f.superclass.constructor.call(this,t)};l.ATTRS={x:0,y:0,rs:0,re:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1},i.extend(l,r),i.augment(l,{canFill:!0,canStroke:!0,type:"fan",getDefaultAttrs:function(){return l.ATTRS},__setAttrRs:function(t,e){return t>=0?t:(h.warn("rs \u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e0"),e)},__setAttrRe:function(t,e){return t>=0?t:(h.warn("re \u5fc5\u987b\u5927\u4e8e\u7b49\u4f600"),e)},__setAttrClockwise:function(t,e){return i.isBoolean(t)?t:(h.warn("clockwise \u5fc5\u987b\u4e3aboolean\u503c"),e)},__setAttrStartAngle:function(t){return s.degreeToRad(t)},__getAttrStartAngle:function(t){return s.radToDegree(t)},__setAttrEndAngle:function(t){return s.degreeToRad(t)},__getAttrEndAngle:function(t){return s.radToDegree(t)},__afterSetAttrX:function(){this.__calculateBox()},__afterSetAttrY:function(){this.__calculateBox()},__afterSetAttrRs:function(){this.__calculateBox()},__afterSetAttrRe:function(){this.__calculateBox()},__afterSetAttrStartAngle:function(){this.__calculateBox()},__afterSetAttrEndAngle:function(){this.__calculateBox()},__afterSetAttrClockwise:function(){this.__calculateBox()},__afterSetAttrLineWidth:function(){this.__calculateBox()},__afterSetAttrAll:function(){this.__calculateBox()},__calculateBox:function(){var t=this,e=t.__attrs,n=e.x,i=e.y,r=e.rs,a=e.re,s=e.startAngle,u=e.endAngle,c=e.clockwise,h=e.lineWidth,l=o.box(n,i,r,s,u,c),f=o.box(n,i,a,s,u,c),g=Math.min(l.minX,f.minX),x=Math.min(l.minY,f.minY),v=Math.max(l.maxX,f.maxX),d=Math.max(l.maxY,f.maxY),p=h/2;this.set("box",{minX:g-p,minY:x-p,maxX:v+p,maxY:d+p})},isPointInPath:function(t,e){var n=this,i=n.hasFill(),r=n.hasStroke();return i&&r?n.__isPointInFill(t,e)||n.__isPointInStroke(t,e):i?n.__isPointInFill(t,e):r?n.__isPointInStroke(t,e):!1},__isPointInFill:function(t,e){var n=this,i=n.__attrs,r=i.x,a=i.y,u=i.rs,h=i.re,l=i.startAngle,f=i.endAngle,g=i.clockwise,x=new c(1,0),v=new c(t-r,e-a),d=x.angleTo(v),p=o.nearAngle(d,l,f,g);if(s.equal(d,p)){var _=v.lengthSq();if(_>=u*u&&h*h>=_)return!0}return!1},__isPointInStroke:function(t,e){var n=this,i=n.__attrs,r=i.x,s=i.y,o=i.rs,u=i.re,c=i.startAngle,h=i.endAngle,l=i.clockwise,f=i.lineWidth,g={x:Math.cos(c)*o+r,y:Math.sin(c)*o+s},x={x:Math.cos(c)*u+r,y:Math.sin(c)*u+s},v={x:Math.cos(h)*o+r,y:Math.sin(h)*o+s},d={x:Math.cos(h)*u+r,y:Math.sin(h)*u+s};return a.line(g.x,g.y,x.x,x.y,f,t,e)?!0:a.line(v.x,v.y,d.x,d.y,f,t,e)?!0:a.arcline(r,s,o,c,h,l,f,t,e)?!0:a.arcline(r,s,u,c,h,l,f,t,e)?!0:!1},createPath:function(){var t=this,e=t.get("context"),n=t.__attrs,i=n.x,r=n.y,a=n.rs,s=n.re,o=n.startAngle,u=n.endAngle,c=n.clockwise,h={x:Math.cos(o)*a+i,y:Math.sin(o)*a+r},l={x:Math.cos(o)*s+i,y:Math.sin(o)*s+r},f={x:Math.cos(u)*a+i,y:Math.sin(u)*a+r};({x:Math.cos(u)*s+i,y:Math.sin(u)*s+r});e.beginPath(),e.moveTo(h.x,h.y),e.lineTo(l.x,l.y),e.arc(i,r,s,o,u,c),e.lineTo(f.x,f.y),e.arc(i,r,a,u,o,!c),e.closePath()}}),t.exports=l},function(t,e,n){"use strict";var i=n(3),r=n(6),a=n(5),s=n(8),o=function u(t){u.superclass.constructor.call(this,t)};o.ATTRS={x:0,y:0,img:void 0,width:0,height:0,sx:null,sy:null,swidth:null,sheight:null},i.extend(o,r),i.augment(o,{type:"image",getDefaultAttrs:function(){return o.ATTRS},__setAttrWidth:function(t,e){return t>=0?t:(s.warn("width \u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e0"),e)},__setAttrHeight:function(t,e){return t>=0?t:(s.warn("height \u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e0"),e)},__afterSetAttrX:function(){this.__calculateBox()},__afterSetAttrY:function(){this.__calculateBox()},__afterSetAttrWidth:function(){this.__calculateBox()},__afterSetAttrHeight:function(){this.__calculateBox()},__afterSetAttrAll:function(){this.__calculateBox()},__calculateBox:function(){var t=this,e=t.__attrs,n=e.x,i=e.y,r=e.width,a=e.height;this.set("box",{minX:n,minY:i,maxX:n+r,maxY:i+a})},isPointInPath:function(t,e){var n=this,i=n.__attrs;if(n.get("toDraw")||!i.img)return!1;var r=i.x,s=i.y,o=i.width,u=i.height;return a.rect(r,s,o,u,t,e)},__setLoading:function(t){var e=this,n=e.get("canvas");return t===!1&&e.get("toDraw")===!0&&(e.__cfg.loading=!1,n.draw()),t},__setAttrImg:function(t){var e=this,n=e.__attrs;e.get("context");if(!i.isString(t))return t instanceof Image?(n.width||e.attr("width",t.width),n.height||e.attr("height",t.height),t):t instanceof HTMLElement&&i.isString(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase()?(n.width||e.attr("width",Number(t.getAttribute("width"))),n.height||e.attr("height",Number(t.getAttribute("height"))),t):t instanceof ImageData?(n.width||e.attr("width",t.width),n.height||e.attr("height",t.height),t):void 0;var r=new Image;r.onload=function(){e.attr("imgSrc",t),e.attr("img",r),e.set("loading",!1)},r.src=t,e.set("loading",!0)},drawInner:function(){var t=this;return t.get("loading")?void t.set("toDraw",!0):void t.__drawImage()},__drawImage:function(){var t=this,e=t.get("context"),n=t.__attrs,r=n.x,a=n.y,s=n.img,o=n.width,u=n.height,c=n.sx,h=n.sy,l=n.swidth,f=n.sheight;return t.set("toDraw",!1),s instanceof Image||s instanceof HTMLElement&&i.isString(s.nodeName)&&"CANVAS"===s.nodeName.toUpperCase()?i.isNull(c)||i.isNull(h)||i.isNull(l)||i.isNull(f)?void e.drawImage(s,r,a,o,u):i.notNull(c)&&i.notNull(h)&&i.notNull(l)&&i.notNull(f)?void e.drawImage(s,c,h,l,f,r,a,o,u):void 0:s instanceof ImageData?void e.putImageData(s,r,a,c||0,h||0,l||o,f||u):void 0}}),t.exports=o},function(t,e,n){"use strict";var i=n(3),r=n(6),a=n(5),s=n(2),o=s.Vector2,u=n(13),c=n(30),h=function l(t){l.superclass.constructor.call(this,t)};h.ATTRS={x1:0,y1:0,x2:0,y2:0,lineWidth:1,arrow:!1},i.extend(h,r),i.augment(h,{canStroke:!0,type:"line",getDefaultAttrs:function(){return h.ATTRS},__afterSetAttrX1:function(){this.__calculateBox()},__afterSetAttrY1:function(){this.__calculateBox()},__afterSetAttrX2:function(){this.__calculateBox()},__afterSetAttrY2:function(){this.__calculateBox()},__afterSetAttrLineWidth:function(){this.__calculateBox()},__afterSetAttrAll:function(){this.__calculateBox()},__calculateBox:function(){var t=this,e=t.__attrs,n=e.x1,i=e.y1,r=e.x2,a=e.y2,s=e.lineWidth;this.set("box",c.box(n,i,r,a,s))},isPointInPath:function(t,e){var n=this,i=n.__attrs,r=i.x1,s=i.y1,o=i.x2,u=i.y2,c=i.lineWidth;return n.hasStroke()?a.line(r,s,o,u,c,t,e):!1},createPath:function(){var t=this,e=t.get("context"),n=t.__attrs,i=n.x1,r=n.y1,a=n.x2,s=n.y2,c=n.arrow,h=n.lineWidth;if(e.beginPath(),e.moveTo(i,r),c){var l=new o(a-i,s-r),f=u.getEndPoint(l,new o(a,s),h);e.lineTo(f.x,f.y),u.makeArrow(e,l,f,h)}else e.lineTo(a,s)},getPoint:function(t){var e=this.__attrs;return{x:c.at(e.x1,e.x2,t),y:c.at(e.y1,e.y2,t)}}}),t.exports=h},function(t,e,n){"use strict";function i(t,e,n,i,r){return e*Math.cos(t)*Math.cos(r)-n*Math.sin(t)*Math.sin(r)+i}function r(t,e,n,i,r){return e*Math.sin(t)*Math.cos(r)+n*Math.cos(t)*Math.sin(r)+i}function a(t,e,n){return Math.atan(-n/e*Math.tan(t))}function s(t,e,n){return Math.atan(n/(e*Math.tan(t)))}var o=n(2);o.Vector2,n(4);t.exports={xAt:i,yAt:r,xExtrema:a,yExtrema:s}},function(t,e,n){"use strict";var i=n(3),r=n(6),a=n(90),s=n(29),o=function u(t){u.superclass.constructor.call(this,t)};o.ATTRS={path:null,lineWidth:1},i.extend(o,r),i.augment(o,{canFill:!0,canStroke:!0,type:"path",getDefaultAttrs:function(){return o.ATTRS},__afterSetAttrPath:function(t){var e=this;if(i.isNull(t))return e.set("segments",null),void e.set("box",void 0);var n,r=s.parsePath(t),o=[];!i.isArray(r)||0===r.length||"M"!==r[0][0]&&"m"!==r[0][0]||(i.each(r,function(t){n=new a(t,n),o.push(n)}),e.set("segments",o),e.__calculateBox())},__afterSetAttrLineWidth:function(t){var e=this;e.get("segments");e.__calculateBox()},__afterSetAttrAll:function(t){var e=this;t.path?e.__afterSetAttrPath(t.path):e.__calculateBox()},__calculateBox:function(){var t=this,e=t.__attrs,n=e.lineWidth,r=t.get("segments");if(r){var a=1/0,s=-(1/0),o=1/0,u=-(1/0);i.each(r,function(t,e){t.getBBox(n);var i=t.box;i&&(i.minX<a&&(a=i.minX),i.maxX>s&&(s=i.maxX),i.minY<o&&(o=i.minY),i.maxY>u&&(u=i.maxY))}),this.set("box",{minX:a,minY:o,maxX:s,maxY:u})}},isPointInPath:function(t,e){var n=this,i=n.hasFill(),r=n.hasStroke();return i&&r?n.__isPointInFill(t,e)||n.__isPointInStroke(t,e):i?n.__isPointInFill(t,e):r?n.__isPointInStroke(t,e):!1},__isPointInFill:function(t,e){var n=this,i=n.get("context");return i?(n.createPath(),i.isPointInPath(t,e)):void 0},__isPointInStroke:function(t,e){for(var n=this,i=n.get("segments"),r=n.__attrs,a=r.lineWidth,s=0,o=i.length;o>s;s++)if(i[s].isInside(t,e,a))return!0;return!1},createPath:function(){var t=this,e=t.get("context"),n=t.get("segments");e.beginPath();for(var i=0,r=n.length;r>i;i++)n[i].draw(e)}}),t.exports=o},function(t,e,n){"use strict";var i=n(3),r=n(6),a=n(5),s=function o(t){o.superclass.constructor.call(this,t)};s.ATTRS={points:null,lineWidth:1},i.extend(s,r),i.augment(s,{canFill:!0,canStroke:!0,type:"polygon",getDefaultAttrs:function(){return s.ATTRS},__afterSetAttrPoints:function(){this.__calculateBox()},__afterSetAttrLineWidth:function(){this.__calculateBox()},__afterSetAttrAll:function(){this.__calculateBox()},__calculateBox:function(){var t=this,e=t.__attrs,n=e.points,r=e.lineWidth;if(n&&0!==n.length){var a=1/0,s=1/0,o=-(1/0),u=-(1/0);i.each(n,function(t){var e=t[0],n=t[1];a>e&&(a=e),e>o&&(o=e),s>n&&(s=n),n>u&&(u=n)});var c=r/2;t.set("box",{minX:a-c,minY:s-c,maxX:o+c,maxY:u+c})}},isPointInPath:function(t,e){var n=this,i=n.hasFill(),r=n.hasStroke();return i&&r?n.__isPointInFill(t,e)||n.__isPointInStroke(t,e):i?n.__isPointInFill(t,e):r?n.__isPointInStroke(t,e):!1},__isPointInFill:function(t,e){var n=this,i=n.get("context");return n.createPath(),i.isPointInPath(t,e)},__isPointInStroke:function(t,e){var n=this,i=n.__attrs,r=i.points;if(r.length<2)return!1;var s=i.lineWidth,o=r.slice(0);return r.length>=3&&o.push(r[0]),a.polyline(o,s,t,e)},createPath:function(){var t=this,e=t.get("context"),n=t.__attrs,r=n.points;r.length<2||(e.beginPath(),i.each(r,function(t,n){0===n?e.moveTo(t[0],t[1]):e.lineTo(t[0],t[1])}),e.closePath())}}),t.exports=s},function(t,e,n){"use strict";var i=n(3),r=n(6),a=n(5),s=n(2),o=s.Vector2,u=n(13),c=function h(t){h.superclass.constructor.call(this,t)};c.ATTRS={points:null,lineWidth:1,arrow:!1},i.extend(c,r),i.augment(c,{canStroke:!0,type:"polyline",getDefaultAttrs:function(){return c.ATTRS},__afterSetAttrPoints:function(){this.__calculateBox()},__afterSetAttrLineWidth:function(){this.__calculateBox()},__afterSetAttrAll:function(){this.__calculateBox()},__calculateBox:function(){var t=this,e=t.__attrs,n=e.lineWidth,r=e.points;if(r&&0!==r.length){var a=1/0,s=1/0,o=-(1/0),u=-(1/0);i.each(r,function(t){var e=t[0],n=t[1];a>e&&(a=e),e>o&&(o=e),s>n&&(s=n),n>u&&(u=n)});var c=n/2;this.set("box",{minX:a-c,minY:s-c,maxX:o+c,maxY:u+c})}},isPointInPath:function(t,e){var n=this,i=n.__attrs;if(n.hasStroke()){var r=i.points;if(r.length<2)return!1;var s=i.lineWidth;return a.polyline(r,s,t,e)}return!1},createPath:function(){var t=this,e=t.get("context"),n=t.__attrs,i=n.points,r=n.arrow,a=n.lineWidth;if(!(i.length<2)){e.beginPath(),e.moveTo(i[0][0],i[0][1]);for(var s=1,c=i.length-1;c>s;s++)e.lineTo(i[s][0],i[s][1]);if(r){var h=new o(i[c][0]-i[c-1][0],i[c][1]-i[c-1][1]),l=u.getEndPoint(h,new o(i[c][0],i[c][1]),a);e.lineTo(l.x,l.y),u.makeArrow(e,h,l,a)}else e.lineTo(i[c][0],i[c][1])}}}),t.exports=c},function(t,e,n){"use strict";var i=n(3),r=n(6),a=n(5),s=(n(4),n(13)),o=n(19),u=n(2),c=u.Vector2,h=function l(t){l.superclass.constructor.call(this,t)};h.ATTRS={p1:null,p2:null,p3:null,lineWidth:1,arrow:!1},i.extend(h,r),i.augment(h,{canStroke:!0,type:"quadratic",getDefaultAttrs:function(){return h.ATTRS},__afterSetAttrP1:function(){this.__calculateBox()},__afterSetAttrP2:function(){this.__calculateBox()},__afterSetAttrP3:function(){this.__calculateBox()},__afterSetAttrLineWidth:function(){this.__calculateBox()},__afterSetAttrAll:function(){this.__calculateBox()},__calculateBox:function(){var t=this,e=t.__attrs,n=e.p1,r=e.p2,a=e.p3;if(!(i.isNull(n)||i.isNull(r)||i.isNull(a))){for(var s=e.lineWidth/2,u=o.extrema(n[0],r[0],a[0]),c=0,h=u.length;h>c;c++)u[c]=o.at(n[0],r[0],a[0],u[c]);u.push(n[0],a[0]);for(var l=o.extrema(n[1],r[1],a[1]),c=0,h=l.length;h>c;c++)l[c]=o.at(n[1],r[1],a[1],l[c]);
l.push(n[1],a[1]),t.set("box",{minX:Math.min.apply(Math,u)-s,maxX:Math.max.apply(Math,u)+s,minY:Math.min.apply(Math,l)-s,maxY:Math.max.apply(Math,l)+s})}},isPointInPath:function(t,e){var n=this,i=n.__attrs,r=i.p1,s=i.p2,o=i.p3,u=i.lineWidth;return a.quadraticline(r[0],r[1],s[0],s[1],o[0],o[1],u,t,e)},createPath:function(){var t=this,e=t.get("context"),n=t.__attrs,r=n.p1,a=n.p2,o=n.p3,u=n.lineWidth,h=n.arrow;if(!(i.isNull(r)||i.isNull(a)||i.isNull(o))&&(e.beginPath(),e.moveTo(r[0],r[1]),e.quadraticCurveTo(a[0],a[1],o[0],o[1]),h)){var l=new c(o[0]-a[0],o[1]-a[1]);s.makeArrow(e,l,{x:o[0],y:o[1]},u)}},getPoint:function(t){var e=this.__attrs;return{x:o.at(e.p1[0],e.p2[0],e.p3[0],t),y:o.at(e.p1[1],e.p2[1],e.p3[1],t)}}}),t.exports=h},function(t,e,n){"use strict";var i=n(3),r=n(6),a=n(5),s=n(8),o=function u(t){u.superclass.constructor.call(this,t)};o.ATTRS={x:0,y:0,width:0,height:0,radius:0,lineWidth:1},i.extend(o,r),i.augment(o,{canFill:!0,canStroke:!0,type:"rect",getDefaultAttrs:function(){return o.ATTRS},__setAttrWidth:function(t,e){return t>=0?t:(s.warn("width \u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e0"),e)},__setAttrHeight:function(t,e){return t>=0?t:(s.warn("height \u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e0"),e)},__setAttrRadius:function(t,e){return t>=0?t:(s.warn("radius \u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e0"),e)},__afterSetAttrX:function(){this.__calculateBox()},__afterSetAttrY:function(){this.__calculateBox()},__afterSetAttrWidth:function(){this.__calculateBox()},__afterSetAttrHeight:function(){this.__calculateBox()},__afterSetAttrLineWidth:function(){this.__calculateBox()},__afterSetAttrAll:function(){this.__calculateBox()},__calculateBox:function(){var t=this,e=t.__attrs,n=e.x,i=e.y,r=e.width,a=e.height,s=e.lineWidth,o=s/2;this.set("box",{minX:n-o,minY:i-o,maxX:n+r+o,maxY:i+a+o})},isPointInPath:function(t,e){var n=this,i=n.hasFill(),r=n.hasStroke();return i&&r?n.__isPointInFill(t,e)||n.__isPointInStroke(t,e):i?n.__isPointInFill(t,e):r?n.__isPointInStroke(t,e):!1},__isPointInFill:function(t,e){var n=this,i=n.__attrs,r=(i.x,i.y,i.width,i.height,i.radius,n.get("context"));return r?(n.createPath(),r.isPointInPath(t,e)):!1},__isPointInStroke:function(t,e){var n=this,i=n.__attrs,r=i.x,s=i.y,o=i.width,u=i.height,c=i.radius,h=i.lineWidth;if(0===c){var l=h/2;return a.line(r-l,s,r+o+l,s,h,t,e)||a.line(r+o,s-l,r+o,s+u+l,h,t,e)||a.line(r+o+l,s+u,r-l,s+u,h,t,e)||a.line(r,s+u+l,r,s-l,h,t,e)}return a.line(r+c,s,r+o-c,s,h,t,e)||a.line(r+o,s+c,r+o,s+u-c,h,t,e)||a.line(r+o-c,s+u,r+c,s+u,h,t,e)||a.line(r,s+u-c,r,s+c,h,t,e)||a.arcline(r+o-c,s+c,c,1.5*Math.PI,2*Math.PI,!1,h,t,e)||a.arcline(r+o-c,s+u-c,c,0,.5*Math.PI,!1,h,t,e)||a.arcline(r+c,s+u-c,c,.5*Math.PI,Math.PI,!1,h,t,e)||a.arcline(r+c,s+c,c,Math.PI,1.5*Math.PI,!1,h,t,e)},createPath:function(){var t=this,e=t.get("context"),n=t.__attrs,i=n.x,r=n.y,a=n.width,s=n.height,o=n.radius;e.beginPath(),0===o?(e.moveTo(i,r),e.lineTo(i+a,r),e.lineTo(i+a,r+s),e.lineTo(i,r+s),e.lineTo(i,r)):(e.moveTo(i+o,r),e.lineTo(i+a-o,r),e.arc(i+a-o,r+o,o,-Math.PI/2,0,!1),e.lineTo(i+a,r+s-o),e.arc(i+a-o,r+s-o,o,0,Math.PI/2,!1),e.lineTo(i+o,r+s),e.arc(i+o,r+s-o,o,Math.PI/2,Math.PI,!1),e.lineTo(i,r+o),e.arc(i+o,r+o,o,Math.PI,3*Math.PI/2,!1)),e.closePath()}}),t.exports=o},function(t,e,n){"use strict";var i=n(3),r=n(6),a=n(5),s=n(8),o=function g(t){g.superclass.constructor.call(this,t)};o.ATTRS={x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom",lineWidth:1};var u={start:1,right:1,left:1,end:1,center:1},c={top:1,middle:1,bottom:1},h={normal:1,italic:1,oblique:1},l={normal:1,"small-caps":1},f={normal:1,bold:1,bolder:1,lighter:1,100:1,200:1,300:1,400:1,500:1,600:1,700:1,800:1,900:1};i.extend(o,r),i.augment(o,{canFill:!0,canStroke:!0,type:"text",getDefaultAttrs:function(){return o.ATTRS},__setAttrTextAlign:function(t,e){return t in u?t:e},__setAttrTextBaseline:function(t,e){return t in c?t:e},__setAttrFontSize:function(t,e){return t>=12?t:e},__setAttrFontStyle:function(t,e){return t in h?t:e},__setAttrFontVariant:function(t,e){return t in l?t:e},__setAttrFontWeight:function(t,e){return t in f?t:e},__assembleFont:function(){var t=this,e=t.attr("fontSize"),n=t.attr("fontFamily"),i=t.attr("fontWeight"),r=t.attr("fontStyle"),a=t.attr("fontVariant");t.attr("font",[r,a,i,e+"px",n].join(" "))},__afterSetAttrFontSize:function(t){var e=this;e.attr({height:t}),e.__assembleFont()},__afterSetAttrFontFamily:function(){this.__assembleFont()},__afterSetAttrFontWeight:function(){this.__assembleFont()},__afterSetAttrFontStyle:function(){this.__assembleFont()},__afterSetAttrFontVariant:function(){this.__assembleFont()},__afterSetAttrFont:function(){this.attr("width",this.measureText())},__afterSetAttrText:function(){this.attr("width",this.measureText())},__afterSetAttrTextAlign:function(){this.__calculateBox()},__afterSetAttrTextBaseline:function(){this.__calculateBox()},__afterSetAttrX:function(){this.__calculateBox()},__afterSetAttrY:function(){this.__calculateBox()},__afterSetAttrWidth:function(){this.__calculateBox()},__afterSetAttrLineWidth:function(){this.__calculateBox()},__afterSetAttrAll:function(t){var e=this;"fontSize"in t&&e.attr("height",t.fontSize),("fontSize"in t||"fontWeight"in t||"fontStyle"in t||"fontVariant"in t||"fontFamily"in t)&&e.__assembleFont(),"text"in t&&e.__afterSetAttrText(t.text),e.__calculateBox()},__calculateBox:function(){var t=this,e=t.__attrs,n=e.x,i=e.y,r=e.width;if(r){var a=e.height,s=e.textAlign,o=e.textBaseline,u=e.lineWidth,c={x:n,y:i-a};s&&("end"===s||"right"===s?c.x-=r:"center"===s&&(c.x-=r/2)),o&&("top"===o?c.y+=a:"middle"===o&&(c.y+=a/2)),this.set("startPoint",c);var h=u/2;this.set("box",{minX:c.x-h,minY:c.y-h,maxX:c.x+r+h,maxY:c.y+a+h})}},isPointInPath:function(t,e){var n=this,i=n.getBBox();return n.hasFill()||n.hasStroke()?a.box(i.minX,i.maxX,i.minY,i.maxY,t,e):void 0},drawInner:function(){var t=this,e=t.get("context"),n=t.__attrs,r=n.text,a=n.x,s=n.y;i.isNull(r)||(e.beginPath(),t.hasFill()&&e.fillText(r,a,s),t.hasStroke()&&e.strokeText(r,a,s))},measureText:function(){var t=this,e=t.__attrs,n=e.text,r=e.font;if(!i.isNull(n)){var a=s.backupContext;a.save(),a.font=r;var o=a.measureText(n).width;return a.restore(),o}}}),t.exports=o},function(t,e,n){"use strict";function i(t,e){this.preSegment=e,this.init(t,e)}function r(t,e,n){return{x:n.x+t,y:n.y+e}}function a(t,e){return{x:e.x+(e.x-t.x),y:e.y+(e.y-t.y)}}function s(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function o(t,e){return(t[0]*e[0]+t[1]*e[1])/(s(t)*s(e))}function u(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(o(t,e))}function c(t,e,n,i,r,a,s){var c=l.mod(l.degreeToRad(s),2*Math.PI),h=t.x,f=t.y,g=e.x,x=e.y,v=Math.cos(c)*(h-g)/2+Math.sin(c)*(f-x)/2,d=-1*Math.sin(c)*(h-g)/2+Math.cos(c)*(f-x)/2,p=v*v/(r*r)+d*d/(a*a);p>1&&(r*=Math.sqrt(p),a*=Math.sqrt(p));var _=Math.sqrt((r*r*(a*a)-r*r*(d*d)-a*a*(v*v))/(r*r*(d*d)+a*a*(v*v)));n===i&&(_*=-1),isNaN(_)&&(_=0);var m=_*r*d/a,y=_*-a*v/r,S=(h+g)/2+Math.cos(c)*m-Math.sin(c)*y,w=(f+x)/2+Math.sin(c)*m+Math.cos(c)*y,b=u([1,0],[(v-m)/r,(d-y)/a]),A=[(v-m)/r,(d-y)/a],M=[(-1*v-m)/r,(-1*d-y)/a],P=u(A,M);return o(A,M)<=-1&&(P=Math.PI),o(A,M)>=1&&(P=0),0===i&&P>0&&(P-=2*Math.PI),1===i&&0>P&&(P+=2*Math.PI),[t,S,w,r,a,b,P,c,i]}var h=n(3),l=n(4),f=n(2),g=n(5),x=n(18),v=n(19),d=n(83),p=f.Vector3,_=f.Matrix3;h.augment(i,{init:function(t,e){var n=t[0];e=e||{endPoint:{x:0,y:0}};var i=/[a-z]/.test(n),s=n.toUpperCase(),o=t;switch(s){case"M":if(i)var u=r(o[1],o[2],e.endPoint);else var u={x:o[1],y:o[2]};this.command="M",this.params=[e.endPoint,u],this.subStart=u,this.endPoint=u;break;case"L":if(i)var u=r(o[1],o[2],e.endPoint);else var u={x:o[1],y:o[2]};this.command="L",this.params=[e.endPoint,u],this.subStart=e.subStart,this.endPoint=u;break;case"H":if(i)var u=r(o[1],0,e.endPoint);else var u={x:o[1],y:e.endPoint.y};this.command="L",this.params=[e.endPoint,u],this.subStart=e.subStart,this.endPoint=u;break;case"V":if(i)var u=r(0,o[1],e.endPoint);else var u={x:e.endPoint.x,y:o[1]};this.command="L",this.params=[e.endPoint,u],this.subStart=e.subStart,this.endPoint=u;break;case"Q":if(i)var h=r(o[1],o[2],e.endPoint),l=r(o[3],o[4],e.endPoint);else var h={x:o[1],y:o[2]},l={x:o[3],y:o[4]};this.command="Q",this.params=[e.endPoint,h,l],this.subStart=e.subStart,this.endPoint=l;break;case"T":if(i)var l=r(o[1],o[2],e.endPoint);else var l={x:o[1],y:o[2]};if("Q"===e.command){var h=a(e.params[1],e.endPoint);this.command="Q",this.params=[e.endPoint,h,l],this.subStart=e.subStart,this.endPoint=l}else this.command="TL",this.params=[e.endPoint,l],this.subStart=e.subStart,this.endPoint=l;break;case"C":if(i)var h=r(o[1],o[2],e.endPoint),l=r(o[3],o[4],e.endPoint),f=r(o[5],o[6],e.endPoint);else var h={x:o[1],y:o[2]},l={x:o[3],y:o[4]},f={x:o[5],y:o[6]};this.command="C",this.params=[e.endPoint,h,l,f],this.subStart=e.subStart,this.endPoint=f;break;case"S":if(i)var l=r(o[1],o[2],e.endPoint),f=r(o[3],o[4],e.endPoint);else var l={x:o[1],y:o[2]},f={x:o[3],y:o[4]};if("C"===e.command){var h=a(e.params[2],e.endPoint);this.command="C",this.params=[e.endPoint,h,l,f],this.subStart=e.subStart,this.endPoint=f}else this.command="SQ",this.params=[e.endPoint,l,f],this.subStart=e.subStart,this.endPoint=f;break;case"A":var g=o[1],x=o[2],v=o[3],d=o[4],p=o[5];if(i)var u=r(o[6],o[7],e.endPoint);else var u={x:o[6],y:o[7]};this.command="A",this.params=c(e.endPoint,u,d,p,g,x,v),this.subStart=e.subStart,this.endPoint=u;break;case"Z":this.command="Z",this.params=[e.endPoint,e.subStart],this.subStart=e.subStart,this.endPoint=e.subStart}},isInside:function(t,e,n){var i=this,r=i.command,a=i.params,s=i.box;if(s&&!g.box(s.minX,s.maxX,s.minY,s.maxY,t,e))return!1;switch(r){case"M":return!1;case"TL":case"L":case"Z":return g.line(a[0].x,a[0].y,a[1].x,a[1].y,n,t,e);case"SQ":case"Q":return g.quadraticline(a[0].x,a[0].y,a[1].x,a[1].y,a[2].x,a[2].y,n,t,e);case"C":return g.cubicline(a[0].x,a[0].y,a[1].x,a[1].y,a[2].x,a[2].y,a[3].x,a[3].y,n,t,e);case"A":var o=a,u=o[1],c=o[2],h=o[3],l=o[4],f=o[5],x=o[6],v=o[7],d=o[8],m=h>l?h:l,y=h>l?1:h/l,S=h>l?l/h:1,o=new p(t,e,1),w=new _;return w.translate(-u,-c),w.rotate(-v),w.scale(1/y,1/S),o.applyMatrix(w),g.arcline(0,0,m,f,f+x,1-d,n,o.x,o.y)}return!1},draw:function(t){var e=this.command,n=this.params;switch(e){case"M":t.moveTo(n[1].x,n[1].y);break;case"TL":case"L":t.lineTo(n[1].x,n[1].y);break;case"SQ":case"Q":var i=n[1],r=n[2];t.quadraticCurveTo(i.x,i.y,r.x,r.y);break;case"C":var i=n[1],r=n[2],a=n[3];t.bezierCurveTo(i.x,i.y,r.x,r.y,a.x,a.y);break;case"A":var s=n,o=s[1],u=s[2],c=s[3],h=s[4],l=s[5],f=s[6],g=s[7],x=s[8],v=c>h?c:h,d=c>h?1:c/h,p=c>h?h/c:1;t.translate(o,u),t.rotate(g),t.scale(d,p),t.arc(0,0,v,l,l+f,1-x),t.scale(1/d,1/p),t.rotate(-g),t.translate(-o,-u);break;case"Z":t.closePath()}},getBBox:function(t){var e=t/2,n=this.params;switch(this.command){case"M":case"Z":break;case"TL":case"L":this.box={minX:Math.min(n[0].x,n[1].x)-e,maxX:Math.max(n[0].x,n[1].x)+e,minY:Math.min(n[0].y,n[1].y)-e,maxY:Math.max(n[0].y,n[1].y)+e};break;case"SQ":case"Q":for(var i=v.extrema(n[0].x,n[1].x,n[2].x),r=0,a=i.length;a>r;r++)i[r]=v.at(n[0].x,n[1].x,n[2].x,i[r]);i.push(n[0].x,n[2].x);for(var s=v.extrema(n[0].y,n[1].y,n[2].y),r=0,a=s.length;a>r;r++)s[r]=v.at(n[0].y,n[1].y,n[2].y,s);s.push(n[0].y,n[2].y),this.box={minX:Math.min.apply(Math,i)-e,maxX:Math.max.apply(Math,i)+e,minY:Math.min.apply(Math,s)-e,maxY:Math.max.apply(Math,s)+e};break;case"C":for(var i=x.extrema(n[0].x,n[1].x,n[2].x,n[3].x),r=0,a=i.length;a>r;r++)i[r]=x.at(n[0].x,n[1].x,n[2].x,n[3].x,i[r]);for(var s=x.extrema(n[0].y,n[1].y,n[2].y,n[3].y),r=0,a=s.length;a>r;r++)s[r]=x.at(n[0].y,n[1].y,n[2].y,n[3].y,s[r]);i.push(n[0].x,n[3].x),s.push(n[0].y,n[3].y),this.box={minX:Math.min.apply(Math,i)-e,maxX:Math.max.apply(Math,i)+e,minY:Math.min.apply(Math,s)-e,maxY:Math.max.apply(Math,s)+e};break;case"A":for(var o=n,u=o[1],c=o[2],h=o[3],l=o[4],f=o[5],g=o[6],p=o[7],_=o[8],m=f,y=f+g,S=d.xExtrema(p,h,l),w=1/0,b=-(1/0),A=[m,y],r=2*-Math.PI;r<=2*Math.PI;r+=Math.PI){var M=S+r;1===_?M>m&&y>M&&A.push(M):M>y&&m>M&&A.push(M)}for(var r=0,a=A.length;a>r;r++){var P=d.xAt(p,h,l,u,A[r]);w>P&&(w=P),P>b&&(b=P)}for(var T=d.yExtrema(p,h,l),B=1/0,I=-(1/0),k=[m,y],r=2*-Math.PI;r<=2*Math.PI;r+=Math.PI){var C=T+r;1===_?C>m&&y>C&&k.push(C):C>y&&m>C&&k.push(C)}for(var r=0,a=k.length;a>r;r++){var R=d.yAt(p,h,l,c,k[r]);B>R&&(B=R),R>I&&(I=R)}this.box={minX:w-e,maxX:b+e,minY:B-e,maxY:I+e}}}}),t.exports=i},function(t,e,n){"use strict";var i=n(15),r=n(56),a=n(93);new r(i.G),t.exports=a},function(t,e,n){"use strict";function i(t){i.superclass.constructor.call(this,t),this._init()}var r=n(1),a=n(9),s=n(12),o=n(15);r.extend(i,a),i.ATTRS={id:null,H:null,canvas:null,width:null,height:null},r.augment(i,{_init:function(){this._initCanvas(),this._renderBack(),this._bindEvent()},_bindEvent:function(){var t=this.get("canvas");t.on("canvas-mousedown",r.wrapBehavior(this,"_onClick"))},_onClick:function(t){var e=this.get("canvas"),n=e.get("heightCanvas"),i=parseInt(360*t.y/n)/360,r=new s;r.setHSL(i,1,.5),r.h=i,this.fire("click",{color:r})},_renderBack:function(){for(var t,e,n,i=this.get("H"),r=this.get("backCanvas"),a=r.get("widthCanvas"),o=r.get("heightCanvas"),u=r.get("context"),c=u.createImageData(a,o),h=c.data,l=h.length,f=new s,g=parseInt(o/(360*r.get("pixelRatio"))),x=3;l>x;x+=4)t=parseInt(x/4),e=parseInt(t/a),n=parseInt(e/g),i=n/o,f.setHSL(i,1,.5),h[x-3]=Math.round(255*f.getR()),h[x-2]=Math.round(255*f.getG()),h[x-1]=Math.round(255*f.getB()),h[x]=255;u.putImageData(c,0,0)},_initCanvas:function(){var t=this.get("id"),e=this.get("width"),n=this.get("height"),i=new o({containerId:t,widthStyle:e,heightStyle:n}),r=new o({containerId:t,widthStyle:e,heightStyle:n});this._styleAbsoltue(r),this.set("backCanvas",i),this.set("canvas",r)},_styleAbsoltue:function(t){var e=t.get("el");e.style.position="absolute",e.style.top=0,e.style.left=0}}),t.exports=i},function(t,e,n){"use strict";t.exports={H:n(92),SL:n(94)}},function(t,e,n){"use strict";var i=n(1),r=n(12),a=n(2),s=n(15),o=n(9),u=a.Vector2,c=function h(t){h.superclass.constructor.call(this,t),this._init()};i.extend(c,o),c.ATTRS={id:null,canvas:null,width:null,height:null,H:null,S:null,L:null,bezier:[[.1,.1],[.15,.1],[.3,.2],[.5,.6]],reverse:null,activeShape:null,bezierShape:null,controlPointsGroup:null},i.augment(c,{_init:function(){this._initCanvas(),this._initElement(),this._calculateData(),this.render(),this._bindEvent()},_getmirrorPoint:function(t,e){var n=u.sub(e,t);return n.add(e)},_calculateData:function(){var t=this.get("bezier"),e=this._getmirrorPoint({x:t[1][0],y:t[1][1]},{x:t[0][0],y:t[0][1]}),n=this._getmirrorPoint({x:t[2][0],y:t[2][1]},{x:t[3][0],y:t[3][1]});e=[e.x,e.y],n=[n.x,n.y],this.set("reverse",[e,n])},_initElement:function(){for(var t=this.get("canvas"),e=this.get("bezier"),n=t.addShape("Cubic"),i=t.addGroup(),r=0;r<e.length;r++)i.addShape("circle",{"class":"forward",attrs:{fill:"#ddd",stroke:"#333",r:4*t.get("pixelRatio")},index:r});for(var r=0;2>r;r++)i.addShape("circle",{"class":"reverse",attrs:{fill:"#333",stroke:"#ddd",r:4*t.get("pixelRatio")},index:r});this.set("bezierShape",n),this.set("controlPointsGroup",i)},_bindEvent:function(){var t=this.get("canvas"),e=this.get("controlPointsGroup");t.on("canvas-mouseleave",i.wrapBehavior(this,"_onMouseLeave")),t.on("canvas-mousemove",i.wrapBehavior(this,"_onMouseMove")),t.on("canvas-mouseup",i.wrapBehavior(this,"_onMouseUp")),e.on("mouseenter",i.wrapBehavior(this,"_ctrolPointonMouseEnter")),e.on("mouseleave",i.wrapBehavior(this,"_ctrolPointonMouseLeave")),e.on("mousedown",i.wrapBehavior(this,"_ctrolPointonMouseDown")),e.on("mouseup",i.wrapBehavior(this,"_ctrolPointonMouseUp"))},_ctrolPointonMouseUp:function(){var t=this.get("bezier"),e=this.get("bezierShape");t[0]=e.attr("p1"),t[1]=e.attr("p2"),t[2]=e.attr("p3"),t[3]=e.attr("p4"),t=this.convert(t),this.fire("mouseUp",{bezier:t})},_ctrolPointonMouseLeave:function(){var t=this.get("canvas"),e=t.get("el");e.style.cursor="default"},_ctrolPointonMouseEnter:function(){var t=this.get("canvas"),e=t.get("el");e.style.cursor="pointer"},_onMouseLeave:function(t){this.set("activeShape",null)},_onMouseUp:function(t){this.set("activeShape",null)},_onReverseMove:function(t,e){var n,i,r,a=this.get("bezierShape"),s=t.get("index"),o=this.get("controlPointsGroup"),u=o.findByCFG("class","forward"),c=o.findByCFG("class","reverse");0===s?(r={x:c[0].attr("x"),y:c[0].attr("y")},n={x:u[0].attr("x"),y:u[0].attr("y")},i=this._getmirrorPoint(r,n),u[1].attr(i)):1===s&&(r={x:c[1].attr("x"),y:c[1].attr("y")},n={x:u[3].attr("x"),y:u[3].attr("y")},i=this._getmirrorPoint(r,n),u[2].attr(i)),a.attr("p"+(s+2),[i.x,i.y]),t.attr({x:e.x,y:e.y})},_onForwardMove:function(t,e){var n,i,r=this.get("bezierShape"),a=t.get("index"),s=this.get("controlPointsGroup"),o=s.findByCFG("class","forward"),u=s.findByCFG("class","reverse");0===a||1===a?(n={x:o[1].attr("x"),y:o[1].attr("y")},i={x:o[0].attr("x"),y:o[0].attr("y")},u[0].attr(this._getmirrorPoint(n,i))):(2===a||3===a)&&(n={x:o[2].attr("x"),y:o[2].attr("y")},i={x:o[3].attr("x"),y:o[3].attr("y")},u[1].attr(this._getmirrorPoint(n,i))),r.attr("p"+(a+1),[e.x,e.y]),t.attr({x:e.x,y:e.y})},_onMouseMove:function(t){var e=this.get("canvas"),n=this.get("activeShape"),i={x:t.x,y:t.y};n&&("forward"===n.get("class")?this._onForwardMove(n,i):this._onReverseMove(n,i),e.draw())},_ctrolPointonMouseDown:function(t){this.set("activeShape",t.currentTarget)},_renderContorlPoint:function(){var t=this.get("controlPointsGroup"),e=t.findByCFG("class","forward"),n=t.findByCFG("class","reverse");this._renderForwardPoints(e),this._renderReversePoints(n)},_renderReversePoints:function(t){var e,n=this.get("reverse");n=this.invert(n);for(var i=0;i<t.length;i++)e=n[i],t[i].attr({x:e[0],y:e[1]})},_renderForwardPoints:function(t){var e,n=this.get("bezier");n=this.invert(n);for(var i=0;i<t.length;i++)e=n[i],t[i].attr({x:e[0],y:e[1]})},_renderBezier:function(){var t=this.get("bezier"),e=this.get("bezierShape");t=this.invert(t),e.attr({p1:t[0],p2:t[1],p3:t[2],p4:t[3],stroke:"white"})},_renderBack:function(){for(var t,e,n=this.get("H"),i=this.get("backCanvas"),a=i.get("widthCanvas"),s=i.get("heightCanvas"),o=i.get("context"),u=o.createImageData(a,s),c=u.data,h=c.length,l=new r,f=3;h>f;f+=4)t=parseInt(f/4/a)/s,e=parseInt(f/4%s)/a,l.setHSL(n/360,t,e),c[f-3]=Math.round(255*l.getR()),c[f-2]=Math.round(255*l.getG()),c[f-1]=Math.round(255*l.getB()),c[f]=255;o.putImageData(u,0,0)},_initCanvas:function(){var t=this.get("id"),e=this.get("width"),n=this.get("height"),i=new s({containerId:t,widthStyle:e,heightStyle:n}),r=new s({containerId:t,widthStyle:e,heightStyle:n});this._styleAbsoltue(r),this.set("backCanvas",i),this.set("canvas",r)},_styleAbsoltue:function(t){var e=t.get("el");e.style.position="absolute",e.style.top=0,e.style.left=0},render:function(){this._renderBack(),this._renderContorlPoint(),this._renderBezier()},setBezier:function(t){var e=this.get("canvas");this.set("bezier",t),this._calculateData(),this._renderBezier(),this._renderContorlPoint(),e.draw()},setHex:function(t){var e=new r(t),n=e.getH();return this.setH(360*n),e},setH:function(t){this.set("H",t),this._renderBack()},getRGBStyle:function(t){for(var e=[],n=0;t>n;n++)e.push(this.getColor(n/t).getRGBStyle());return e},getColors:function(t){for(var e=[],n=0;t>=n;n++)e.push(this.getColor(n/t));return e},getColor:function(t){var e,n,i=this.get("H"),a=this.get("canvas"),s=a.get("widthCanvas"),o=a.get("heightCanvas"),u=this.get("bezierShape"),c=u.getPoint(t),h=new r;return i/=360,e=c.y/o,n=c.x/s,(c.x>s||c.y>o)&&(n=0),h.setHSL(i,e,n),h},draw:function(){var t=this.get("canvas");t.draw()},convert:function(t){for(var e=this.get("canvas"),n=e.get("widthCanvas"),i=e.get("heightCanvas"),r=[],a=0;a<t.length;a++){var s=t[a];r.push([s[0]/n,s[1]/i])}return r},invert:function(t){for(var e=this.get("canvas"),n=e.get("widthCanvas"),i=e.get("heightCanvas"),r=[],a=0;a<t.length;a++){var s=t[a];r.push([s[0]*n,s[1]*i])}return r}}),t.exports=c}]);
