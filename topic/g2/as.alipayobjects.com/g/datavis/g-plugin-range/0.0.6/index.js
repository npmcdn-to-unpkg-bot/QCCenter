!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";var n=r(2);if(window.G2){var i=window.G2,s=i.Plugin||{};s.range=n}else e.exports=n},function(e,t,r){"use strict";var n=r(3),i=G2.Base,s=function(e){s.superclass.constructor.call(this,e)};s.ATTRS={chart:{},frame:null,data:[],width:null,height:26,dim:null,range:[40,60],isDomCreated:!1},n.extend(s,i),n.augment(s,{_init:function(){this._setDOM(),this._initComponent(),this._addEvents(),this.set("isDomCreated",!0)},_initComponent:function(){this._initSeletor(),this._initTick()},_initSeletor:function(){var e=this.get("containerDOM"),t=this.get("selectorDOMs"),r=t.selector,i=n.filtObj("selector",t);n.appendChildren(r,i),e.appendChild(r)},_initTick:function(){var e=this.get("containerDOM"),t=this.get("ticksDOMs").tickser,r=this._getTickDOMs();n.appendChildren(t,r),e.appendChild(t)},_setDOM:function(){var e=document.getElementById(this.get("id")),t={selector:n.createDOMLabel("div","range-selector range-selector-normal"),triggerLeft:n.createDOMLabel("div","range-trigger"),triggerRight:n.createDOMLabel("div","range-trigger"),blockMiddle:n.createDOMLabel("div","range-block range-block-middle"),blockSideLeft:n.createDOMLabel("div","range-block range-block-side"),blockSideRight:n.createDOMLabel("div","range-block range-block-side")},r={tickser:n.createDOMLabel("div","range-ticks")};this.set("containerDOM",e),this.set("ticksDOMs",r),this.set("selectorDOMs",t)},_addDocumentEvents:function(){var e=this;this.onMouseMoveListener=n.addEventListenera(document,"mousemove",n.wrapBehavior(e,"onMouseMove")),this.onMouseUpListener=n.addEventListenera(document,"mouseup",n.wrapBehavior(e,"onMouseUp"))},_removeDocumentEvents:function(){this.onMouseMoveListener.remove(),this.onMouseUpListener.remove()},_addEvents:function(){var e=this,t=e.get("range"),r=e.get("selectorDOMs");this.get("ticksDOMs").tickser;r.triggerLeft.addEventListener("mousedown",function(r){r.preventDefault(),e.set("currentPageX",r.pageX),e.set("currentTrigger","triggerLeft"),e.set("currentRange",[t[0],t[1]]),e._addDocumentEvents()}),r.triggerRight.addEventListener("mousedown",function(r){r.preventDefault(),e.set("currentPageX",r.pageX),e.set("currentTrigger","triggerRight"),e.set("currentRange",[t[0],t[1]]),e._addDocumentEvents()}),r.blockMiddle.addEventListener("mousedown",function(r){r.preventDefault(),e.set("currentPageX",r.pageX),e.set("currentTrigger","blockMiddle"),e.set("currentRange",[t[0],t[1]]),e._addDocumentEvents()}),r.blockSideRight.addEventListener("click",function(t){t.preventDefault(),e._blockSideOnClick(t.pageX)}),r.blockSideLeft.addEventListener("click",function(t){t.preventDefault(),e._blockSideOnClick(t.pageX)})},_blockSideOnClick:function(e){var t=this.get("range"),r=this.get("selectorDOMs"),i=n.pageX(r.triggerLeft),s=n.pageX(r.triggerRight),a=n.getStyle(r.triggerRight,"width"),o=n.formatCssLength(a).value,c=n.getStyle(r.selector,"width"),g=n.formatCssLength(c).value;if(e>s){var h=e-s-o/2;t[1]=t[1]+h/g*100,this.render()}else{var h=e-i-o/2;t[0]=t[0]+h/g*100,this.render()}},onMouseMove:function(e){var t=this,r=t.get("range"),i=t.get("selectorDOMs"),s=n.formatCssLength(n.getStyle(i.selector,"width")).value,a=t.get("currentPageX"),o=t.get("currentTrigger"),c=t.get("currentRange"),g=e.pageX-a;if("triggerLeft"===o){var h=c[0]+g/s*100;h>=0&&h<=r[1]-2&&(r[0]=h)}else if("triggerRight"===o){var d=c[1]+g/s*100;100>=d&&d>=r[0]+2&&(r[1]=d)}else if("blockMiddle"===o){var h=c[0]+g/s*100,d=c[1]+g/s*100,l=c[1]-c[0];h>=0&&100>=d?(r[0]=h,r[1]=d):d>100?r[0]=100-l:0>h&&(r[1]=l)}d>100&&(r[1]=100),0>h&&(r[0]=0),t.render()},onMouseUp:function(){this._removeDocumentEvents()},render:function(){var e=this.get("data"),t=this.get("chart"),r=this.get("dim"),n=this.get("isDomCreated");e?t?r?n?(this._renderRanger(),this._renderChart()):(this._init(),this._firstRender()):console.error("Please set dim for Range"):console.error("Please set chart for Range"):console.error("Please set data for Range")},_firstRender:function(){this._renderContainer(),this._renderRanger(),this._renderTicker(),this._renderChart()},_renderContainer:function(){var e=this.get("containerDOM");n.modiCSS(e,{position:"relative",width:this.get("width")+"px",height:this.get("height")+"px"})},_renderTicker:function(){var e=this.get("ticksDOMs").tickser,t=e.childNodes,r=t[t.length-1],i=n.formatCssLength(n.getStyle(r,"width")),s=-i.value+i.unit;n.modiCSS(r,{textIndent:s,display:"none"});for(var a=0;a<t.length;a++)n.modiCSS(t[a],{left:a/(t.length-1)*100+"%"})},_renderRanger:function(){var e=this.get("range"),t=this.get("selectorDOMs"),r=n.formatCssLength(n.getStyle(t.selector,"height")),i=n.formatCssLength(n.getStyle(t.triggerLeft,"height")),s=r.value/2-i.value/2+"px";n.modiCSS(t.triggerLeft,{left:e[0]+"%",top:s}),n.modiCSS(t.triggerRight,{left:e[1]+"%",top:s}),n.modiCSS(t.blockSideLeft,{width:e[0]+"%"}),n.modiCSS(t.blockSideRight,{left:e[1]+"%",width:100-e[1]+"%"}),n.modiCSS(t.blockMiddle,{left:e[0]+"%",width:e[1]-e[0]+"%"})},_renderChart:function(){var e=this.get("chart"),t=this.get("range"),r=this._getRangeData(t);e.changeData(r)},_getRangeData:function(e){var t=this.get("data"),r=parseInt(t.length*e[0]/100,10),n=parseInt(t.length*e[1]/100,10);return t.slice(r,n)},_getTickDOMs:function(){var e=(this.get("chart"),this.get("dim")),t=this._getTicksCfg(this.get("chart").getScale(e).getTicks()),r=n.createDOMLabels(t);return r},_getTicksCfg:function(e){for(var t=[],r=0;r<e.length;r++)t[r]={innerHtml:e[r].text,lableName:"div",className:"range-tick"};return t},source:function(e){var t,r,i=this.get("start"),s=this.get("end"),a=this.get("dim");if(e.data)var e=e,o=e.toJSON(),c=o.length;else if(e instanceof Array)var o=e,c=o.length;if(i&&s){var g=!1,h=!1;n.each(o,function(e,n){e[a]===i?(t=n/c*100,g=!0):e[a]===s&&(r=n/c*100,h=!0)}),g&&h||(t=40,r=60)}else t=40,r=60;return o.sort(function(e,t){return e[a]-t[a]}),this.set("range",[t,r]),this.set("frame",e),this.set("data",o),this},link:function(e){var t=this,r={},n=[];return e instanceof Array?n=e:e instanceof Object&&n.push(e),r.g2chart=n,r.render=function(){for(var e=0;e<this.g2chart.length;e++)this.g2chart[e].render()},r.changeData=function(e){for(var t=0;t<this.g2chart.length;t++)this.g2chart[t].changeData(e)},r.getScale=function(e){return this.g2chart[0].getScale(e)},t.set("chart",r),this._setDOM(),t},view:function(e,t){return this.set("dim",e),this.set("range",t),this},hideTicks:function(){var e=this.get("ticksDOMs").tickser;n.modiCSS(e,{display:"none"})},showTicks:function(){var e=this.get("ticksDOMs").tickser;n.modiCSS(e,{display:""})}}),e.exports=s},function(e,t){var r=G2.Util;r.mix(r,{formatCssLength:function(e){var t=e.length,r=e.substr(t-1,t);if("%"==r)var n={value:parseInt(e.substr(0,t-1)),unit:e.substr(t-1,t)};else var n={value:parseInt(e.substr(0,t-2)),unit:e.substr(t-2,t)};return n},filtObj:function(e,t){var r,n=[];for(r in t)r!=e&&n.push(t[r]);return n},appendChildren:function(e,t){if(t.length>0){for(var r=0;r<t.length;r++)e.appendChild(t[r]);return!0}return!1},createDOMLabels:function(e){for(var t=[],r=0;r<e.length;r++){var n=this.createDOMLabel(e[r].lableName,e[r].className,e[r].innerHtml);t.push(n)}return t},createDOMLabel:function(e,t,r){r=r?r:"";var n="<"+e+' class="'+t+'">'+r+"</div>",i=this.createDom(n);return i},modiCSS:function(e,t){var r;for(r in t)e.style[r]=t[r];return e},addEventListenera:function(e,t,r){return e.addEventListener?(e.addEventListener(t,r,!1),{remove:function(){e.removeEventListener(t,r,!1)}}):e.attachEvent?(e.attachEvent("on"+t,r),{remove:function(){e.detachEvent("on"+t,r)}}):void 0},pageX:function(e){return e.offsetParent?e.offsetLeft+this.pageX(e.offsetParent):e.offsetLeft}}),e.exports=r}]);