!function(t){function e(a){if(n[a])return n[a].exports;var i=n[a]={exports:{},id:a,loaded:!1};return t[a].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";var a=G2.Util,i=G2.Base,o=(G2.Canvas,n(4)),s="..long",r="..lant",c=function u(t){u.superclass.constructor.call(this,t),this._init()};c.ATTRS={chart:null,mapData:{},defaultStyle:{stroke:"#fff",fill:"#999"}},a.extend(c,i),a.augment(c,{_init:function(){this._bindEvent()},_bindEvent:function(){var t=this,e=t.get("chart");e&&(e.on("beforepaint",function(e){var n=e.chart,a=t.get("maps");a&&a.clear(),t.set("maps",null),t.set("chart",n),t.draw()}),e.on("destroy",function(){t.destroy()}))},_offEvent:function(){var t=self.get("chart");t.off("beforepaint"),t.off("destroy")},_syncScales:function(t){var e=t.get("coordAssist"),n=this.get("chart"),i=n.get("scales"),o=a.mix(e.xScale,{dim:s}),c=a.mix(e.yScale,{dim:r});i[s]=o,i[r]=c;var u=n.get("geoms");a.each(u,function(t){var e=t.getScales();a.each(e,function(t){var e=t.dim;(e===s||e===r)&&(t=a.mix(t,i[e]))})})},draw:function(){var t=this,e=this.get("mapData"),n=this.get("defaultStyle"),i=a.mix({},n,this.get("style")),c=t.get("chart");c.axis(s,!1),c.axis(r,!1);var u=c.get("backCanvas"),l=u.addGroup(o,{shapeCfg:{polygon:i},plotRange:c.get("plotRange")});l.addMap(e),t.set("maps",l),t._syncScales(l),u.draw()},destroy:function(){var t=this,e=t.get("maps");e&&e.clear(),t.set("chart",null),t.set("maps",null)}}),G2.Plugin=G2.Plugin||{},G2.Plugin.GMap=c,t.exports=c},function(t,e){"use strict";var n=G2.Util,a=G2.Scale,i=function(t){this.coord=t,this.init()};n.augment(i,{init:function(){this.xScale=a.linear(),this.yScale=a.linear()},addBBox:function(t){this.bbox?this.bbox=[Math.min(t[0],this.bbox[0]),Math.min(t[1],this.bbox[1]),Math.max(t[2],this.bbox[2]),Math.max(t[3],this.bbox[3])]:this.bbox=t,this.change()},change:function(){var t=this.bbox;this.xScale.change({min:t[0],max:t[2]}),this.yScale.change({min:t[1],max:t[3]})},reset:function(){this.bbox=null,this.xScale=a.linear(),this.yScale=a.linear()},convert:function(t){var e=this.xScale.scale(t.x),n=this.yScale.scale(t.y),a=this.coord.convertPoint({x:e,y:n});return a},invert:function(t){var e=this.coord.invert(t);return{x:this.xScale.invert(e.x),y:this.yScale.invert(e.y)}}}),t.exports=i},function(t,e){"use strict";function n(t){return Math.min.apply(null,t)}function a(t){return Math.max.apply(null,t)}var i=G2.Util,o=G2.Canvas,s=function r(t){r.superclass.constructor.call(this,t)};s.CFG={coordAssist:null,bbox:null,data:null,shapeCfg:{polygon:{stroke:"red",fill:"#3E98C5","stroke-width":1},point:{stroke:"red",fill:"red",radius:8}},name:!1},i.extend(s,o.Group),i.augment(s,{_renderUI:function(){s.superclass._renderUI.call(this),this._initBBox()},_initBBox:function(){var t=this,e=t.get("data"),n=t.get("bbox");e&&!n&&(n=t._getBBox(e),t.set("bbox",n))},_getBBox:function(t){var e=this;if(i.isObject(t)){if(t.bbox)return t.bbox;t=t.features}var o=[],s=[];return i.each(t,function(t){if("GeometryCollection"!==t.type){var n=t.geometry.coordinates,a=e._getPoints(n);i.each(a,function(t){o.push(t[0]),s.push(t[1])})}}),[n(o),n(s),a(o),a(s)]},_getPoints:function(t){var e=this,n=[];return i.isArray(t[0])?i.each(t,function(t){var a=e._getPoints(t);n=n.concat(a)}):n.push(t),n},drawFeatures:function(){var t=this,e=t.get("data");i.isObject(e)&&(e=e.features),i.each(e,function(e){t.addFeature(e)})},addFeature:function(t){var e=this;e.addGeom(t),e.get("name")&&e.addPoint(t)},addGeom:function(t,e){e=e||this;var n,a=this,i=t.geometry,o=i.type;switch(o){case"Polygon":case"MultiPolygon":n=a.addPolygon(i,e)}return n&&n.set("props",t.properties),n},addPoint:function(t,e){e=e||this;var o=this,s=o.get("coordAssist"),r=o.get("shapeCfg").point,c=t.properties,u=c.name,l=c.cp;if(!l){var h=[],d=[],f=t.geometry.coordinates,g=o._getPoints(f);i.each(g,function(t){h.push(t[0]),d.push(t[1])}),l=[n(h)+(a(h)-n(h))/2,n(d)+(a(d)-n(d))/2]}var p=s.convert({x:l[0],y:l[1]}),r=i.mix({cx:p.x,cy:p.y},r);e.addShape("Circle",{attrs:r}),e.addShape("Text",{attrs:{text:u,x:p.x-20,y:p.y+30,fill:"#666"}})},addPolygon:function(t,e){var n=this,a="",o=n.get("shapeCfg"),s=t.coordinates;"Polygon"===t.type?a=n._getPolygonPath(s):i.each(s,function(t){a+=n._getPolygonPath(t)});var r=i.mix({path:a},o.polygon);return e.addShape("Path",{attrs:r})},_getPolygonPath:function(t){var e=this,n="";return i.each(t,function(t){var a=e._getPath(t);a+="z",n+=a}),n},_getPath:function(t){var e=this,n="",a=e.get("coordAssist");return i.each(t,function(t,e){var o=0===e?"M {x} {y}":"L {x} {y}",s={x:t[0],y:t[1]},r=a.convert(s);n+=i.substitute(o,r)}),n}}),t.exports=s},function(t,e,n){"use strict";var a=G2.Util,i=G2.Canvas,o=G2.Coord,s=n(2),r=n(3),c=function(t){r.superclass.constructor.call(this,t)};c.CFG={coord:null,coordAssist:null,plotRange:null},a.extend(c,i.Group),a.augment(c,{_renderUI:function(){c.superclass._renderUI.call(this),this.initCoord()},initCoord:function(){var t=this,e=t.get("coord");e||(e=t._createCoord(),t.set("coord",e));var n=new s(e);t.set("coordAssist",n)},_createCoord:function(){var t=this,e=t.get("canvas"),n=(e.getWidth(),e.getHeight(),t.get("plotRange")),a=new o.Rect({start:n.start,end:n.end});return a},addMap:function(t){var e=this,n=e.get("shapeCfg");e.addGroup(r,{shapeCfg:n,data:t,coordAssist:e.get("coordAssist")});e.reset()},reset:function(){this.resetCoords(),this.resetMaps()},resetCoords:function(){var t=this,e=t.get("coordAssist"),n=t.get("children");e.reset(),a.each(n,function(t){var n=t.get("bbox");e.addBBox(n)})},resetMaps:function(){var t=this,e=t.get("children");a.each(e,function(t){t.clear(),t.drawFeatures()})}}),t.exports=c}]);