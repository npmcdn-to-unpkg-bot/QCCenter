require.config({baseUrl:"assets/js",paths:{jquery:"jquery.min","jquery.fullPage":"jquery.fullPage.min",echarts:"echarts.min",waypoints:"waypoints.min","jquery.counterup":"jquery.counterup.min"},shim:{"jquery.fullPage":{deps:["jquery"]},"jquery.counterup":{deps:["jquery"]}}});var gb={colors:{white:"#FFF",whiteMedium:"rgba(255, 255, 255, 0.6)",whiteMediumLight:"rgba(255, 255, 255, 0.3)",whiteLight:"rgba(255, 255, 255, 0.2)",whiteLighter:"rgba(255, 255, 255, 0.1)",primary:"#556fb5",primaryLight:"#889acb"},dbSheetIdx:27,option:[],optionRenderFlag:[],userInfo:{},dom:[],myChart:[],loadBscInfo:!1,color:["#61A5E8","#7ECF51","#EECB5F","#E4925D","#E16757","#9570E5","#605FF0","#85ca36","#1c9925","#0d8b5f","#0f9cd3","#2f7e9b","#2f677d","#9b7fed","#7453d6","#3b1d98","#27abb1","#017377","#015f63","#b86868","#5669b7","#e5aab4","#60b65f","#98d2b2","#c9c8bc","#45c3dc","#e17979","#5baa5a","#eaccc2","#ffaa74"]};require(["jquery","echarts","waypoints","jquery.fullPage","jquery.counterup"],function(e,t){function o(){e.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getScoreOrder&score="+gb.userInfo.score,async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(t){gb.userInfo.peopleNums=t.allPeople,gb.userInfo.scoreOrder=t.scoreOrder,gb.userInfo.scorePropt=1==t.scoreOrder?100:t.lessThan,e('[name="totals"]').text(gb.userInfo.peopleNums),e('[name="ltdOrder"]').text(gb.userInfo.scoreOrder),e('[name="scorePropt"]').text(gb.userInfo.scorePropt),e('[name="scoreProptDesc"]').text(Number.parseFloat(gb.userInfo.scorePropt)>50?"，想想是不是有点小激动呢？":"。"),b()})}function a(){e.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getScoreOrderByDpt&score="+gb.userInfo.score+"&dpt="+gb.userInfo.user_dpt,async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(t){gb.userInfo.dpt={},gb.userInfo.dpt.all=t.dpt_people,gb.userInfo.dpt.peopleNums=t.allPeople,gb.userInfo.dpt.scoreOrder=t.scoreOrder,gb.userInfo.dpt.scorePropt=1==t.scoreOrder?100:t.lessThan,e('[name="dptName"]').text(gb.userInfo.user_dpt),e('[name="dptCrewNum"]').text(gb.userInfo.dpt.all),e('[name="dptTotals"]').text(gb.userInfo.dpt.peopleNums),e('[name="dptOrder"]').text(gb.userInfo.dpt.scoreOrder),e('[name="dptScorePropt"]').text(gb.userInfo.dpt.scorePropt)})}function r(e,t){return userScore=10*Math.floor(Number.parseInt(gb.userInfo.score)/10),t.grid.x=35,t.yAxis=[{type:"category",show:!0,axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{textStyle:{color:"rgba(255, 255, 255, 0.6)"}},data:[]}],e.map(function(e,o){t.yAxis[0].data.push(e.score),userScore!=e.score?t.series[0].data.push(e.nums):t.series[0].data.push({value:e.nums,itemStyle:{normal:{color:"#95E570"}},label:{normal:{show:!0,formatter:"你的分数 "+gb.userInfo.score+" 分"}}})}),t}function n(){e.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getTimeLength",async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(t){gb.userInfo.dptTime=t.dptTime,gb.userInfo.ltdTime=t.ltdTime,e('[name="timeDesc1"]').text(gb.userInfo.timeUsed<gb.userInfo.dptTime?"低于":"高于"),e('[name="timeDesc2"]').text(gb.userInfo.timeUsed<gb.userInfo.ltdTime?"低于":"高于"),e('[name="dptTimeLength"]').text((Number.parseInt(gb.userInfo.dptTime)/60).toFixed(1)),e('[name="ltdTimeLength"]').text((Number.parseInt(gb.userInfo.ltdTime)/60).toFixed(1))})}function s(){e.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getAnsweredRatio",async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(t){gb.userInfo.dptCompare={},gb.userInfo.dptCompare.answerRatio=t,e('[name="mostPeople"]').text(t[0].dpt),e('[name="answeredPrpt"]').text(t[0].answeredRatio),t[0].dpt!=gb.userInfo.user_dpt?e('[name="answerRatioDesc"]').text(",赶快邀请小伙伴们来参与活动吧。"):e('[name="answerRatioDesc"]').text("。")})}function i(){e.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getScoreCompare",async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(t){gb.userInfo.dptCompare={},gb.userInfo.dptCompare.scoreCompare=t,e('[name="highestScore"]').text(t[0].dpt),e('[name="highestScorePrpt"]').text(t[0].score)})}function d(){e.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getPrizeCompare",async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(t){gb.userInfo.dptCompare={},gb.userInfo.dptCompare.prizeCompare=t,e('[name="prizePrpt"]').text(t[0].passRatio)})}function p(){e.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/get2ndPassedRatio",async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(t){e('[name="2ndTimesPrpt"]').text(t["2ndPassedRatio"]),e('[name="1stTime"]').text(t.moreChance),e.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/get2ndPassedCompare",async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(e){gb.userInfo.dptCompare={},gb.userInfo.dptCompare.moreChancePassedCompare=e})})}for(var c=(function(){var e=document.getElementById("autoplay"),t=document.getElementById("musicBtn"),o=document.getElementById("musicBtnTxt");document.getElementById("musicBtn").addEventListener("touchstart",function(){o.style.display="",e.paused?(e.play(),t.className="music-btn on",o.innerHTML="开始"):(e.pause(),t.className="music-btn",o.innerHTML="关闭"),setTimeout(function(){o.style.display="none"},1e3)},!1)}(),1);9>c;c++)gb.dom[c]=document.getElementById("chart"+c);var l=-1==window.location.href.indexOf("?uid=")?0:window.location.href.split("?uid=")[1].split("&")[0],u=function(){var e={color:["rgba(255,255,255,0.6)"],grid:{borderWidth:0,x:15,y:60,x2:15,y2:35},yAxis:[{type:"category",show:!1,data:[]}],xAxis:[{type:"value",splitLine:{show:!0,lineStyle:{type:"dashed",color:gb.colors.whiteLight}},axisLine:{show:!1},axisTick:{show:!1},boundaryGap:0,axisLabel:{textStyle:{color:gb.colors.whiteMedium}}}],series:[{name:"得分",type:"bar",barMaxWidth:60,areaStyle:{normal:{color:gb.colors.whiteMediumLight}},lineStyle:{normal:{width:1}},data:[],itemStyle:{normal:{color:gb.colors.whiteMedium,width:1,label:{show:!1,textStyle:{fontSize:15,color:"#fff"},position:"insideRight",formatter:"{b}:{c}"},barBorderRadius:2}}}]};return e};gb.option[0]=u();var m=function(t,o){e().counterUp&&t.counterUp({delay:10,time:o})},b=function(){e("#fullpage").fullpage({navigation:!0,afterRender:function(){for(var o=1;9>o;o++)gb.myChart[o-1]=t.init(gb.dom[o]);e(window).resize(function(){for(var e=1;9>e;e++)gb.myChart[e-1].resize()})},afterLoad:function(t,o){m(e(".section:nth("+(o-1)+")").find(".number"),500);var c;2!=o||gb.optionRenderFlag[o-2]?3!=o||gb.optionRenderFlag[o-2]?4!=o||gb.optionRenderFlag[o-2]?5!=o||gb.optionRenderFlag[o-2]?6!=o||gb.optionRenderFlag[o-2]?7!=o||gb.optionRenderFlag[o-2]?8!=o||gb.optionRenderFlag[o-2]?9!=o||gb.optionRenderFlag[o-2]||(c=u(),c.legend={show:!0,data:["第一次","第二次"],textStyle:{color:"#fff"},x:"right",y:30},c.yAxis=[{type:"category",show:!0,axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{textStyle:{color:"rgba(255, 255, 255, 0.6)"}},data:[]}],c.grid.x=95,c.color=gb.color,c.series=[{name:"第一次",type:"bar",barMaxWidth:60,stack:"总比例",label:{normal:{show:!1}},data:[]},{name:"第二次",type:"bar",barMaxWidth:60,stack:"总比例",label:{normal:{show:!1}},data:[]}],gb.userInfo.dptCompare.moreChancePassedCompare.map(function(e){c.yAxis[0].data.push(e.dpt),c.series[0].data.push(e["1stPassed"]),c.series[1].data.push(e["2ndPassed"])}),gb.myChart[o-2].setOption(c),gb.optionRenderFlag[o-2]=!0,console.log("option="+JSON.stringify(c))):(c=u(),c.series=[{name:"获奖比例",type:"bar",barMaxWidth:60,label:{normal:{show:!0,position:"insideRight",textStyle:{fontSize:15},formatter:"{b}\n{c}%"}},itemStyle:{normal:{color:function(e){return gb.color[e.dataIndex]}}},data:[]}],gb.userInfo.dptCompare.prizeCompare.map(function(e){c.yAxis[0].data.push(e.dpt),c.series[0].data.push(e.dptPassRatio)}),c.yAxis[0].data.reverse(),c.series[0].data.reverse(),gb.myChart[o-2].setOption(c),gb.optionRenderFlag[o-2]=!0,p()):(c=u(),c.series=[{type:"bar",label:{normal:{show:!0,position:"insideRight",textStyle:{fontSize:15},formatter:"{b}\n{c}分"}},itemStyle:{normal:{color:function(e){return gb.color[e.dataIndex]}}},data:[]}],gb.userInfo.dptCompare.scoreCompare.map(function(e){c.yAxis[0].data.push(e.dpt),c.series[0].data.push(e.score)}),c.yAxis[0].data.reverse(),c.series[0].data.reverse(),gb.myChart[o-2].setOption(c),gb.optionRenderFlag[o-2]=!0,d()):(c=c={color:gb.color,tooltip:{trigger:"item",formatter:"{a} <br/>{b}分 : {c}人 ({d}%)"},legend:{show:!1,orient:"vertical",left:"left",data:[]},series:[{name:"得分分布",type:"pie",radius:"60%",center:["50%","50%"],data:[],label:{normal:{textStyle:{color:"#334"},formatter:"{b}分\n({d}%)"}},labelLine:{normal:{length:10,lineStyle:{color:"#334"}}}}]},gb.userInfo.dptScoreOrder.map(function(e){c.legend.data.push(e.score),c.series[0].data.push({name:e.score,value:e.nums})}),gb.myChart[o-2].setOption(c),gb.optionRenderFlag[o-2]=!0,i()):(c=u(),c.series=[{name:"已参与",type:"bar",barMaxWidth:60,stack:"比例",label:{normal:{show:!1,position:"insideLeft",textStyle:{fontSize:15},formatter:function(e){return e.name+"\n"+e.value.toFixed(2)+"%"}}},itemStyle:{normal:{color:function(e){return gb.color[e.dataIndex]}}},data:[]},{name:"未参与",type:"bar",barMaxWidth:60,stack:"比例",label:{normal:{show:!0,position:"insideRight",textStyle:{fontSize:15},formatter:function(e){return e.name+"\n"+(100-e.value).toFixed(2)+"%"}}},itemStyle:{normal:{color:gb.colors.whiteMediumLight}},data:[]}],gb.userInfo.dptCompare.answerRatio.map(function(e){c.yAxis[0].data.push(e.dpt);var t=Number.parseFloat(e.answeredRatio);c.series[0].data.push(t),c.series[1].data.push(100-t)}),c.series[0].data[0]>50&&(c.series[0].label.normal.show=!0,c.series[1].label.normal.show=!1),c.yAxis[0].data.reverse(),c.series[0].data.reverse(),c.series[1].data.reverse(),gb.myChart[o-2].setOption(c),gb.optionRenderFlag[o-2]=!0):(s(),c=u(),c.series[0].data=[],c.yAxis[0].data=["全公司",gb.userInfo.user_dpt,gb.userInfo.user_name],c.series[0].data=[(Number.parseInt(gb.userInfo.ltdTime)/60).toFixed(1),(Number.parseInt(gb.userInfo.dptTime)/60).toFixed(1),{value:(Number.parseInt(gb.userInfo.timeUsed)/60).toFixed(1),itemStyle:{normal:{color:"rgb(99,201,99)",label:{textStyle:{color:"#fff"}}}}}],c.series[0].itemStyle.normal.label={show:!0,textStyle:{fontSize:18,color:"#333"},position:"insideLeft",formatter:"{b}:{c}分钟"},gb.myChart[o-2].setOption(c),gb.optionRenderFlag[o-2]=!0):(c=u(),c.series[0].data=[],e.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getScoreRangeByDpt&dpt="+gb.userInfo.user_dpt,async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(t){n(),c=r(t,c);var a=t[t.length-1];e('[name="dptMostScore"]').text(a.score),e('[name="dptMostScoreNum"]').text(a.nums),e('[name="dptMostScoreDesc"]').text("他们对安全规章制度一定是熟记于心了，"),gb.userInfo.dptScoreOrder=t,gb.myChart[o-2].setOption(c),gb.optionRenderFlag[o-2]=!0})):(c=u(),c.series[0].data=[],e.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getScoreRange",async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(e){c=r(e,c),gb.myChart[o-2].setOption(c),gb.optionRenderFlag[o-2]=!0,a()}))}}),e(".hidden").removeClass("hidden")};(function(){e.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getSafeExamData&uid="+l,async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(t){if(gb.loadBscInfo=t.status,gb.loadBscInfo){gb.userInfo=t,gb.userInfo.user_dpt=gb.userInfo.user_dpt.trim(),e('[name="userName"]').text(gb.userInfo.user_name),e('[name="userOrder"]').text(Number.parseInt(gb.userInfo.id)-gb.dbSheetIdx),e('[name="userScore"]').text(gb.userInfo.score);var a=Math.floor(Number.parseInt(gb.userInfo.timeUsed)/60),r=Number.parseInt(gb.userInfo.timeUsed)%60;e('[name="userMinuteLength"]').text(a),e('[name="userSecondLength"]').text(r);var n=Number.parseInt(gb.userInfo.score)>=80?"这是一个不错的分数哟":"下次还需要继续努力呢";e('[name="scoreDesc"]').text(n),e('[name="answerTimes"]').text("1"==gb.userInfo.iTimes?"仅用了一次机会便":"用了两次机会"),o()}})})()});
//# sourceMappingURL=readSafeScore.min.js.map