require.config({baseUrl:"assets/js",paths:{jquery:"jquery.min","jquery-weui":"jquery-weui","jquery.fullPage":"jquery.fullPage.min"},shim:{"jquery.fullPage":{deps:["jquery"]},"jquery-weui":{deps:["jquery"]}}});var exam={loadComplete:!1,total:0,error:[],answerList:[],isAnswered:[],timeReleased:!1,sourceList:[],scoresPerAnswer:0,isSubmit:!1,maxAnswerNum:20,examPaper:"safe",answerNums:0,myErrNums:0,myError:[]},lastPage;require(["jquery.fullPage","jquery-weui"],function(){function e(e){var a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),r=encodeURI(window.location.search).substr(1).match(a);return null!==r?decodeURI(r[2]):null}function a(e,a,r,s){var t=[],i=[],u=["A","B","C","D"];i=n(e.question.length);var o=[];i.map(function(e,a){o[e]=a});var l='<div class="section '+(r%2?"":"background_dark_img")+'"><h1 class="title answer-num ">第<span>'+r+"</span>题</h1>";a&&(l+='<h3 class="weui_cells_title">错误人数：<span>'+s.nums+"人 </span>( "+s.percent+"% )</h3>"),l+='<h3 class="weui_cells_title">正确答案:<span>'+u[Number.parseInt(o[e.answer-1])]+'</h3><div class="weui_cells_title ">'+e.title+'</div><div class="weui_cells weui_cells_checkbox'+(r%2?"":" weui_cells_dark")+'" data-id='+(r-1)+" data-answer="+(o[e.answer-1]+1)+">",e.question.map(function(e,a){t[a]="",t[a]+='    <label class="weui_cell weui_check_label">',t[a]+='<div class="weui_cell_hd">',t[a]+='    <input type="radio" class="weui_check" name="radio'+(r-1)+'">',t[a]+='    <i class="weui_icon_checked"></i>',t[a]+="</div>",t[a]+='<div class="weui_cell_bd weui_cell_primary" data-value='+o[a]+">",t[a]+="    <p>"+e+"</p>",t[a]+="</div></label>"});for(var m="",c=0;c<e.question.length;c++)m+=t[i[c]];return l+=m+"</div></div>"}function r(e,a){return Math.random()>.5?-1:1}function n(e){for(var a=[],n=0;e>n;n++)a.push(n);return a.sort(r)}function s(){$.getJSON("./assets/data/"+exam.examPaper+".min.json",function(e){var r=exam.error.length;r=r<=exam.maxAnswerNum?r:exam.maxAnswerNum,exam.maxAnswerNum=r;for(var n=0;r>n;n++)$("#fullpage").append(a(e[exam.error[n].id],1,n+1,exam.error[n]));for(var n=0;n<exam.myErrNums;n++)$('[name="allErr"]').before(a(e[exam.myError[n]],0,n+1));for(lastPage=r+1+exam.myErrNums,n=0;lastPage>n;n++)u[n]=n%2?"#fff":"#445"}).done(function(){o(),document.getElementById("autoplay").play()})}function t(){$.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getAllErrs",async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(e){for(var a=0;a<e.errors.length;a++)exam.isAnswered[a]=0;exam.answerNums=e.nums;var r=[];e.errors.map(function(e){r.push(e)}),r.sort(function(e,a){return a-e});for(var n=0;n<exam.maxAnswerNum&&exam.error.length<exam.maxAnswerNum;n++)e.errors.map(function(a,s){a==r[n]&&0==exam.isAnswered[s]&&(exam.error.push({id:s,nums:a,percent:Number.parseFloat(100*a/e.nums).toFixed(2)}),exam.isAnswered[s]=1)});s()})}var i=e("uid"),u=[],o=function(){$("#fullpage").fullpage({easingcss3:"cubic-bezier(0.25, 0.5, 0.35, 1.15)",onLeave:function(e,a,r){e-2>lastPage&&"down"==r&&$(".iSlider-arrow").hide()},afterLoad:function(e,a){a-2==lastPage?$(".iSlider-arrow").hide():$(".iSlider-arrow").show()}}),exam.loadComplete||$("#fakeLoader").hide()};$.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getMyErrs&uid="+i,async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(e){$('[name="username"]').text(e.user_name),$('[name="userscore"]').text(e.score),exam.myErrNums=(100-Number.parseInt(e.score))/5,exam.myErrNums>0&&($('[name="errTips"]').text("做错"+exam.myErrNums+"道题,最终"),$('[name="myErrTips"]').text("接下来我们来看看这"+exam.myErrNums+"道题目的正确答案。"),exam.myError=e.errors.split(",")),t()});(function(){var e=document.getElementById("autoplay"),a=document.getElementById("musicBtn"),r=document.getElementById("musicBtnTxt");document.getElementById("musicBtn").addEventListener("touchstart",function(){r.style.display="",e.paused?(e.play(),a.className="music-btn on",r.innerHTML="开始"):(e.pause(),a.className="music-btn",r.innerHTML="关闭"),setTimeout(function(){r.style.display="none"},1e3)},!1)})()});
//# sourceMappingURL=myErr.min.js.map