require.config({baseUrl:"assets/js",paths:{jquery:"jquery.min","jquery-weui":"jquery-weui","jquery.fullPage":"jquery.fullPage.min"},shim:{"jquery.fullPage":{deps:["jquery"]},"jquery-weui":{deps:["jquery"]}}});var exam={total:0,error:[],answerList:[],isAnswered:[],timeReleased:!1,isStarted:!1,timeLength:3e5,sourceList:[],eachScore:0},lastPage;require(["jquery","jquery.fullPage","jquery-weui"],function(e){function a(e,a){var t=[],n=[];n=s(e.question.length);var i=[];n.map(function(e,a){i[e]=a});var r='<div class="section">';r+='<h1 class="title">第<span>'+a+"</span>题</h1>",r+='<div class="weui_cells_title">'+e.title+"</div>",r+='<div class="weui_cells '+(a%2?"":"weui_cells_dark")+' weui_cells_checkbox" data-id='+(a-1)+" data-answer="+(i[e.answer-1]+1)+">",e.question.map(function(e,s){t[s]="",t[s]+='    <label class="weui_cell weui_check_label">',t[s]+='<div class="weui_cell_hd">',t[s]+='    <input type="radio" class="weui_check" name="radio'+(a-1)+'">',t[s]+='    <i class="weui_icon_checked"></i>',t[s]+="</div>",t[s]+='<div class="weui_cell_bd weui_cell_primary" data-value='+i[s]+">",t[s]+="    <p>"+e+"</p>",t[s]+="</div></label>"});for(var l="",u=0;u<e.question.length;u++)l+=t[n[u]];return r+=l+"</div>\n</div>"}function t(e,a){return Math.random()>.5?-1:1}function s(e){for(var a=[],s=0;e>s;s++)a.push(s);return a.sort(t)}var n=[];e.getJSON("./assets/data/test.min.json",function(t){var i=t.length;e('[name="nums"]').text(i),exam.eachScore=100/i,e('[name="scores"]').text(exam.eachScore.toFixed(0)),exam.sourceList=s(i);for(var r=0;i>r;r++)e('[name="form"]').before(a(t[exam.sourceList[r]],r+1)),exam.isAnswered[r]=0;for(lastPage=t.length+2,r=0;lastPage>r;r++)n[r]=r%2?"#fff":"#f3f3ff"}).done(function(){i()});var i=function(){function a(){e.alert("答题时间到，系统将不再记录此后的得分，请提交当前成绩！","时间到！",function(){e.fn.fullpage.moveTo(lastPage)})}function t(a){var t=a-1;!exam.timeReleased&&t>0&&lastPage-1>t&&!exam.isAnswered[t-1]&&(e.alert("第"+t+"题您还没有作答！","警告！"),t==lastPage-2?e(".iSlider-arrow").css("display","none"):e(".iSlider-arrow").css("display",""))}function s(a){var t=!0;return""==a.userName?(e('[name="userName"]').parents(".weui_cell").find("label").css("color","#e64340"),t=!1):e('[name="userName"]').parents(".weui_cell").find("label").attr("style",""),""==a.userCard?(e('[name="userCard"]').parents(".weui_cell").find("label").css("color","#e64340"),t=!1):e('[name="userCard"]').parents(".weui_cell").find("label").attr("style",""),t}e(".weui_check_label").on("click",function(){if(exam.timeReleased)a();else{var t=e(this).parents(".weui_cells"),s=e(this).find(".weui_cell_primary"),n=s.data("value")+1==t.data("answer")?1:0;exam.answerList[t.data("id")]=n,exam.isAnswered[t.data("id")]=1}}),e("#fullpage").fullpage({sectionsColor:n,onLeave:function(s){1!=s||exam.timeReleased||(exam.isStarted=!0,setTimeout(function(){exam.timeReleased=!0,a()},exam.timeLength),setTimeout(function(){e.toast("考试时间已过去三分之一")},27*exam.timeLength),setTimeout(function(){e.toast("考试时间仅剩三分之一")},.67*exam.timeLength)),t(s)},afterLoad:function(e){t(e)}}),e('[name="form"] input').on("focus",function(){e(this).parents(".weui_cell").find("label").attr("style","")}),e('[name="form"] .weui_btn').on("click",function(a){exam.error=[],exam.total=0,exam.answerList.map(function(e,a){exam.total+=e,e||exam.error.push(exam.sourceList[a])});var t={userName:e('[name="userName"]').val(),userCard:e('[name="userCard"]').val(),totalScore:(exam.total*exam.eachScore).toFixed(0),error:exam.error};s(t)?e.toast("您一共取得了"+t.totalScore+"分"):e.toast("请输入个人用户信息","cancel"),console.log(t)})};(function(){var e=document.getElementById("autoplay"),a=document.getElementById("musicBtn"),t=document.getElementById("musicBtnTxt");document.getElementById("musicBtn").addEventListener("touchstart",function(){t.style.display="",e.paused?(e.play(),a.className="music-btn on",t.innerHTML="开始"):(e.pause(),a.className="music-btn",t.innerHTML="关闭"),setTimeout(function(){t.style.display="none"},1e3)},!1)})()});
//# sourceMappingURL=main.min.js.map