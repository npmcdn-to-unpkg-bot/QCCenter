!function(){function a(a,t){return a.substring(a.length-t,a.length)}function t(a,t){return a.substring(0,a.length-t)}function n(t){var n,s=new Date,e=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],o=s.getFullYear(),c=s.getMonth()+1,u=s.getDate(),r=e[s.getDay()],l=a("0"+s.getHours(),2),i=a("0"+s.getMinutes(),2),g=a("0"+s.getSeconds(),2);switch(t){case 0:n=o+"年"+c+"月"+u+"日";break;case 1:n=o+"-"+c+"-"+u+" "+l+":"+i+":"+g;break;case 2:n=o+"年"+c+"月"+u+"日"+l+"时"+i+"分"+g+"秒";break;case 3:n=o+"-"+c+"-"+u+" "+l+":"+i;break;case 4:n=o+"年"+c+"月"+u+"日  "+l+"时"+i+"分";break;case 5:n=c+"/"+u+"/"+o;break;case 6:n=o+"-"+c+"-"+u;break;case 7:n=o.toString()+a("0"+c,2)+a("0"+u,2);break;case 8:n=o.toString()+a("0"+c,2);break;default:n=c+"月"+u+"日 "+r+" "+l+":"+i+":"+g}return n}{var s=function(a,t){var s=function(a,t){$.ajax({url:"http://10.8.2.111:8012/sendnotify.cgi",type:"get",async:!1,data:{delaytime:3e4,msg:a,receiver:t,title:"质量控制中心 "+n()},dataType:"jsonp",callback:"JsonCallback",success:function(a){console.log(n(1)+"    "+a.msg)},error:function(a){console.log(n(1)+"    "+a.msg)}})};s(a,t)},e=function(){var a="http://10.8.2.133:70/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=102&M=3&t=75",t="",n={msg:"",status:0};return $.ajax({url:a,type:"get",async:!1,dataType:"jsonp",callback:"JsonCallback",success:function(a){a.rows>0?(n.status=1,a.data.map(function(a){t+=a[1]+" 好品率较低("+a[11]+"%)\n"}),t+="\n[(点击此处查看详情)|http://10.8.2.133/OnlineQuality.asp]"):console.log("该时间内无相关数据")}}),n.msg=t,n},o=function(){var a,t,n="http://10.8.2.133:70/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=109&M=3",s=")印码机检好品率:\n",e={msg:"",status:0},o={data:{},prod:{}};return $.ajax({url:n,type:"get",async:!1,dataType:"jsonp",callback:"JsonCallback",success:function(n){n.rows>0?(e.status=1,n.data.map(function(t,n){"undefined"==typeof o.data[t[1]]&&(o.data[t[1]]={},o.prod[n]=t[1]),t[0]>1e7?(a=t[0],o.data[t[1]].lastDay=t[2]):o.data[t[1]].theMonth=t[2]}),$.each(o.prod,function(a,t){var n;if("undefined"!=typeof o.data[t].lastDay){var e=o.data[t].lastDay-o.data[t].theMonth;e=e.toFixed(2),n=e>0?"↑"+e:0==e?"-":"↓"+-e,s+=t+" : "+o.data[t].lastDay+" ("+n+"%);\n"}}),t="昨日("+a+s,t+="[(点击此处查看详情)|http://10.8.2.133/MonthStatic.asp]"):(e.status=0,console.log("当前时间范围内无数据"))}}),e.msg=t,e},c=function(){var a="http://10.8.2.133:70/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=110&M=3",t="\n\n----平均未检数最多的机台:----\n",n={msg:"",status:0};return $.ajax({url:a,type:"get",async:!1,dataType:"jsonp",callback:"JsonCallback",success:function(a){if(a.rows>0){n.status=1;for(var s=0;4>s;s++)t+=a.data[s][0]+" : "+a.data[s][1]+" 大张/万\n";t+="[(点击此处查看详情)|http://10.8.2.133/qualitydetail.asp]\n"}else console.log("该时间内无相关数据"),n.status=0,t="\n\n----无机检未检信息----\n"}}),n.msg=t,n},u=function(){var a="";return $.ajax({url:"./assets/data/all.json",async:!1,success:function(n){n.dataCode.map(function(t){a+=t[3]+","}),a=t(a,1)}}),a},r=function(a){$.ajax({url:"./assets/data/all.json",async:!1,success:function(t){t.dataPrint.map(function(t){s(t[1]+",早上好!"+a,t[3].toString())})}})},l=function(){var a="http://10.8.2.133:70/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=60&M=3&tstart="+n(8)+"01&tend="+n(8)+"31",t="\n----本月钞纸过程质量控制水平如下:----\n",s={msg:"",status:0};return $.ajax({url:a,type:"get",async:!1,dataType:"jsonp",callback:"JsonCallback",success:function(a){a.rows>0?(s.status=1,a.data.map(function(a){t+=a[0]+" : "+a[3]+" 分\n"}),t+="[(点击此处查看详情)|http://10.8.2.133:70/qualitytable?tid=60]\n"):(console.log("该时间内无相关数据"),s.status=0,t="\n\n----无本月相关钞纸过程质量控制水平检测数据----\n")}}),s.msg=t,s},i=function(a){$.ajax({url:"./assets/data/all.json",async:!1,success:function(t){t.dataPaperGY.map(function(t){s(t[1]+",早上好!"+a,t[3].toString())})}})},g=function(a){var t=u();s(a,t)},d=function(a){"undefined"==typeof a&&(a=0);var t=new Date,n=t.getDay(),s=t.getHours(),e=t.getMinutes(),o=1;return 0==n||6==n?o=0:0==a?s>=8&&23>s?8==s&&30>e&&(o=0):o=0:1==a&&7!=s&&(o=0),o};!function(){var a={};a.count=0,a.online=setInterval(function(){if(!d())return void console.log("实时质量推送消息 时间校验未通过:     "+n(3));var t=e();t.status>0&&(g(t.msg),500==a.count&&window.console.clear(),a.count++)},12e5),a.lastDay=setInterval(function(){if(d(1))if("undefined"==typeof localStorage.pushLog&&(localStorage.pushLog='{"today":"0"}'),$.parseJSON(localStorage.pushLog).today<n(7)){localStorage.pushLog=JSON.stringify({today:n(7)});var a=o(),t=c(),s="";a.status>0&&(s+=a.msg),t.status>0&&(s+=t.msg),a.status+t.status>0&&r(s),console.log(s);var e=l();e.status>0&&i(e.msg)}else console.log("当天已推送该信息:   "+n(3));else console.log("每天推送消息 时间校验未通过:     "+n(3))},36e5)}()}}();
//# sourceMappingURL=main.min.js.map