define(function(e){function t(e,o){var a=0;r.each(e.children,function(e){t(e,o);var n=e.value;r.isArray(n)&&(n=n[0]),a+=n});var n=e.value;o>=0&&(r.isArray(n)?n=n[0]:e.value=new Array(o)),(null==n||isNaN(n))&&(n=a),0>n&&(n=0),o>=0?e.value[0]=n:e.value=n}function o(e,t){var o=t.get("color");if(o){e=e||[];var a;if(r.each(e,function(e){var t=new i(e),o=t.get("color");(t.get("itemStyle.normal.color")||o&&"none"!==o)&&(a=!0)}),!a){var n=e[0]||(e[0]={});n.color=o.slice()}return e}}var a=e("../../model/Series"),n=e("../../data/Tree"),r=e("zrender/core/util"),i=e("../../model/Model"),l=e("../../util/format"),s=(e("./helper"),l.encodeHTML),d=l.addCommas;return a.extend({type:"series.treemap",dependencies:["grid","polar"],_viewRoot:null,defaultOption:{left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,visualDimension:0,zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{normal:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}}},label:{normal:{show:!0,position:["50%","50%"],textStyle:{align:"center",baseline:"middle",color:"#fff",ellipsis:!0}}},itemStyle:{normal:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{}},color:"none",colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(e,a){var i=e.data||[],l=e.name;null==l&&(l=e.name);var s={name:l,children:e.data},d=(i[0]||{}).value;t(s,r.isArray(d)?d.length:-1);var u=e.levels||[];return u=e.levels=o(u,a),n.createTree(s,this,u).data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(e){var t=this.getData(),o=this.getRawValue(e),a=d(r.isArray(o)?o[0]:o),n=t.getName(e);return s(n)+": "+a},getDataParams:function(e){for(var t=a.prototype.getDataParams.apply(this,arguments),o=this.getData(),n=o.tree.getNodeByDataIndex(e-1),r=t.treePathInfo=[];n;){var i=n.dataIndex;r.push({name:n.name,dataIndex:i,value:this.getRawValue(i)}),n=n.parentNode}return r.reverse(),t},setLayoutInfo:function(e){this.layoutInfo=this.layoutInfo||{},r.extend(this.layoutInfo,e)},mapIdToIndex:function(e){var t=this._idIndexMap;t||(t=this._idIndexMap={},this._idIndexMapCount=0);var o=t[e];return null==o&&(t[e]=o=this._idIndexMapCount++),o},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getData().tree.root;(!e||e!==t&&!t.contains(e))&&(this._viewRoot=t)}})});
//# sourceMappingURL=TreemapSeries.min.js.map